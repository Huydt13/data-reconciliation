{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\quarantine-facilities\\\\components\\\\facilities\\\\SelectFacilitySection.js\";\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { FiChevronRight, FiDownload } from 'react-icons/fi';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectFacility } from 'quarantine-facilities/actions/quarantine-facility';\nimport { DataList } from 'app/components/shared';\nimport { formatObjectToAddress } from 'app/utils/helpers';\nimport { Breadcrumb } from 'semantic-ui-react';\nimport { exportExcel } from 'app/actions/global';\nimport apiLinks from 'app/utils/api-links';\nconst StyledChevronRight = styled(FiChevronRight)`\n  vertical-align: bottom !important;\n`;\nconst BreadcrumbWrapper = styled.div`\n  margin-bottom: 8px;\n`;\nconst SelectFacilitySection = _ref => {\n  let {\n    componentLabel,\n    component,\n    isBeing,\n    isWaiting,\n    isCompleted\n  } = _ref;\n  const dispatch = useDispatch();\n  const exportLoading = useSelector(s => s.global.exportLoading);\n  const getData = useCallback(() => {\n    dispatch(selectFacility(undefined));\n  }, [dispatch]);\n  useEffect(getData, [getData]);\n  const {\n    selectedFacility,\n    facilityData,\n    getFacilitiesLoading\n  } = useSelector(s => s.quarantineFacility);\n  const {\n    data\n  } = facilityData;\n  const handleRenderContent = useCallback(d => {\n    if (d) {\n      if (isBeing) {\n        return `Đang cách ly: ${d.totalOccupier}`;\n      }\n      if (isWaiting) {\n        return `Chờ cách ly: ${d.waitingCount}`;\n      }\n      // if (isCompleted) {\n      //   return `Số người đã cách ly ${d.totalOccupier}`;\n      // }\n    }\n\n    return '';\n  },\n  // eslint-disable-next-line\n  [isBeing, isWaiting, isCompleted]);\n  const dataList = useMemo(() => /*#__PURE__*/React.createElement(DataList, {\n    search: true,\n    toggle: true,\n    title: \"Ch\\u1ECDn khu c\\xE1ch ly\",\n    data: data || [],\n    loading: getFacilitiesLoading || exportLoading,\n    listActions: [{\n      icon: /*#__PURE__*/React.createElement(FiDownload, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 19\n        }\n      }),\n      title: 'Export danh sách khu',\n      color: 'violet',\n      globalAction: true,\n      onClick: () => dispatch(exportExcel({\n        url: apiLinks.facilities.quarantineFacilities.exportFacilities,\n        params: {\n          exportToExcel: true\n        },\n        fileName: 'DS khu',\n        isQuarantine: true\n      }))\n    }],\n    onRowClick: row => {\n      if ((selectedFacility === null || selectedFacility === void 0 ? void 0 : selectedFacility.id) === (row === null || row === void 0 ? void 0 : row.id)) {\n        dispatch(selectFacility(undefined));\n      } else {\n        dispatch(selectFacility(row));\n      }\n    },\n    itemHeaderRender: d => d.name,\n    itemContentRender: handleRenderContent,\n    itemSubContentRender: d => `Địa chỉ: ${formatObjectToAddress(d)}`,\n    getRowKey: d => d.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), [dispatch, getFacilitiesLoading, exportLoading, data, selectedFacility, handleRenderContent]);\n  const sections = useMemo(() => {\n    const bc = [{\n      key: 0,\n      content: !selectedFacility ? `Chọn khu cách ly - ${componentLabel}` : selectedFacility.name,\n      active: !selectedFacility,\n      onClick: () => dispatch(selectFacility(undefined))\n    }];\n    if (selectedFacility) {\n      bc.push({\n        key: 1,\n        content: componentLabel,\n        active: true\n      });\n    }\n    return bc;\n  }, [dispatch, selectedFacility, componentLabel]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BreadcrumbWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    sections: sections,\n    icon: /*#__PURE__*/React.createElement(StyledChevronRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 47\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  })), !selectedFacility && dataList, selectedFacility && component);\n};\nSelectFacilitySection.propTypes = {\n  component: PropTypes.element.isRequired,\n  componentLabel: PropTypes.string.isRequired,\n  isBeing: PropTypes.bool,\n  isWaiting: PropTypes.bool,\n  isCompleted: PropTypes.bool\n};\nSelectFacilitySection.defaultProps = {\n  isBeing: false,\n  isWaiting: false,\n  isCompleted: false\n};\nexport default SelectFacilitySection;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","PropTypes","styled","FiChevronRight","FiDownload","useDispatch","useSelector","selectFacility","DataList","formatObjectToAddress","Breadcrumb","exportExcel","apiLinks","StyledChevronRight","BreadcrumbWrapper","div","SelectFacilitySection","_ref","componentLabel","component","isBeing","isWaiting","isCompleted","dispatch","exportLoading","s","global","getData","undefined","selectedFacility","facilityData","getFacilitiesLoading","quarantineFacility","data","handleRenderContent","d","totalOccupier","waitingCount","dataList","createElement","search","toggle","title","loading","listActions","icon","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","color","globalAction","onClick","url","facilities","quarantineFacilities","exportFacilities","params","exportToExcel","isQuarantine","onRowClick","row","id","itemHeaderRender","name","itemContentRender","itemSubContentRender","getRowKey","sections","bc","key","content","active","push","propTypes","element","isRequired","string","bool","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/quarantine-facilities/components/facilities/SelectFacilitySection.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { FiChevronRight, FiDownload } from 'react-icons/fi';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectFacility } from 'quarantine-facilities/actions/quarantine-facility';\n\nimport { DataList } from 'app/components/shared';\nimport { formatObjectToAddress } from 'app/utils/helpers';\nimport { Breadcrumb } from 'semantic-ui-react';\nimport { exportExcel } from 'app/actions/global';\nimport apiLinks from 'app/utils/api-links';\n\nconst StyledChevronRight = styled(FiChevronRight)`\n  vertical-align: bottom !important;\n`;\nconst BreadcrumbWrapper = styled.div`\n  margin-bottom: 8px;\n`;\n\nconst SelectFacilitySection = ({\n  componentLabel,\n  component,\n  isBeing,\n  isWaiting,\n  isCompleted,\n}) => {\n  const dispatch = useDispatch();\n\n  const exportLoading = useSelector((s) => s.global.exportLoading);\n\n  const getData = useCallback(() => {\n    dispatch(selectFacility(undefined));\n  }, [dispatch]);\n\n  useEffect(getData, [getData]);\n\n  const { selectedFacility, facilityData, getFacilitiesLoading } = useSelector(\n    (s) => s.quarantineFacility,\n  );\n\n  const { data } = facilityData;\n  const handleRenderContent = useCallback(\n    (d) => {\n      if (d) {\n        if (isBeing) {\n          return `Đang cách ly: ${d.totalOccupier}`;\n        }\n        if (isWaiting) {\n          return `Chờ cách ly: ${d.waitingCount}`;\n        }\n        // if (isCompleted) {\n        //   return `Số người đã cách ly ${d.totalOccupier}`;\n        // }\n      }\n      return '';\n    },\n    // eslint-disable-next-line\n    [isBeing, isWaiting, isCompleted],\n  );\n  const dataList = useMemo(\n    () => (\n      <DataList\n        search\n        toggle\n        title=\"Chọn khu cách ly\"\n        data={data || []}\n        loading={getFacilitiesLoading || exportLoading}\n        listActions={[\n          {\n            icon: <FiDownload />,\n            title: 'Export danh sách khu',\n            color: 'violet',\n            globalAction: true,\n            onClick: () =>\n              dispatch(\n                exportExcel({\n                  url: apiLinks.facilities.quarantineFacilities\n                    .exportFacilities,\n                  params: { exportToExcel: true },\n                  fileName: 'DS khu',\n                  isQuarantine: true,\n                }),\n              ),\n          },\n        ]}\n        onRowClick={(row) => {\n          if (selectedFacility?.id === row?.id) {\n            dispatch(selectFacility(undefined));\n          } else {\n            dispatch(selectFacility(row));\n          }\n        }}\n        itemHeaderRender={(d) => d.name}\n        itemContentRender={handleRenderContent}\n        itemSubContentRender={(d) => `Địa chỉ: ${formatObjectToAddress(d)}`}\n        getRowKey={(d) => d.id}\n      />\n    ),\n    [\n      dispatch,\n      getFacilitiesLoading,\n      exportLoading,\n      data,\n      selectedFacility,\n      handleRenderContent,\n    ],\n  );\n\n  const sections = useMemo(() => {\n    const bc = [\n      {\n        key: 0,\n        content: !selectedFacility\n          ? `Chọn khu cách ly - ${componentLabel}`\n          : selectedFacility.name,\n        active: !selectedFacility,\n        onClick: () => dispatch(selectFacility(undefined)),\n      },\n    ];\n\n    if (selectedFacility) {\n      bc.push({\n        key: 1,\n        content: componentLabel,\n        active: true,\n      });\n    }\n\n    return bc;\n  }, [dispatch, selectedFacility, componentLabel]);\n\n  return (\n    <div>\n      <BreadcrumbWrapper>\n        <Breadcrumb sections={sections} icon={<StyledChevronRight />} />\n      </BreadcrumbWrapper>\n      {!selectedFacility && dataList}\n      {selectedFacility && component}\n    </div>\n  );\n};\n\nSelectFacilitySection.propTypes = {\n  component: PropTypes.element.isRequired,\n  componentLabel: PropTypes.string.isRequired,\n  isBeing: PropTypes.bool,\n  isWaiting: PropTypes.bool,\n  isCompleted: PropTypes.bool,\n};\n\nSelectFacilitySection.defaultProps = {\n  isBeing: false,\n  isWaiting: false,\n  isCompleted: false,\n};\n\nexport default SelectFacilitySection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}