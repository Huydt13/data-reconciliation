{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\patient-management\\\\components\\\\infected-patient\\\\ExportInfectedPatientModal.js\";\nimport React, { useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport moment from 'moment';\nimport { Button, Form, Modal } from 'semantic-ui-react';\nimport { KeyboardDateTimePicker } from 'app/components/shared';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'app/hooks';\nimport { exportExcel } from 'app/actions/global';\nimport apiLinks from 'app/utils/api-links';\nimport { naturalCompare } from 'app/utils/helpers';\nimport { getUnitInfo, getPrefixes, getExaminationTypes, getSamplingPlaces } from 'medical-test/actions/medical-test';\nconst defaultOption = {\n  key: -1,\n  value: -1,\n  text: 'Tất cả'\n};\nconst childUnitOption = {\n  key: -2,\n  value: -2,\n  text: 'Tất cả các cơ sở cấp dưới'\n};\nconst dateTypeOptions = [{\n  value: 1,\n  text: 'Ngày xét nghiệm'\n}, {\n  value: 3,\n  text: 'Ngày hệ thống ghi nhận'\n}, {\n  value: 4,\n  text: 'Ngày xác minh'\n}];\nconst resultTypeOptions = ['Dương tính', 'Âm tính', 'Nghi ngờ', 'Chưa xác định'].reduce((r, e) => [...r, {\n  text: e.toUpperCase(),\n  value: e.toUpperCase()\n}], [defaultOption]);\nconst ExportInfectedPatientModal = props => {\n  const {\n    open,\n    onClose\n  } = props;\n  const dispatch = useDispatch();\n  const {\n    isAdmin\n  } = useAuth();\n  const {\n    watch,\n    errors,\n    control,\n    setValue,\n    handleSubmit\n  } = useForm();\n  const {\n    unitInfo,\n    prefixList,\n    examinationTypeList,\n    samplingPlaceList,\n    getPrefixesLoading,\n    getExaminationTypesLoading,\n    getSamplingPlacesLoading\n  } = useSelector(state => state.medicalTest);\n  const {\n    exportLoading\n  } = useSelector(s => s.global);\n  const isMultipleUnit = useMemo(() => {\n    var _unitInfo$name;\n    return isAdmin || ((_unitInfo$name = unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.name) !== null && _unitInfo$name !== void 0 ? _unitInfo$name : '').includes('TRUNG TÂM Y TẾ');\n  }, [isAdmin, unitInfo]);\n  const prefixOptions = useMemo(() => {\n    if (isAdmin) {\n      return prefixList.reduce((result, unit) => [...result, {\n        key: unit.id,\n        value: unit.name,\n        text: unit.name.toUpperCase()\n      }], [defaultOption]);\n    }\n    if ((unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.name) && unitInfo.name.toUpperCase().includes('TRUNG TÂM Y TẾ')) {\n      const unitInfoName = unitInfo.name.substr(20).trim();\n      return prefixList.filter(unit => {\n        if (unitInfo.id === unit.id) {\n          return true;\n        }\n        const unitName = unit.name.toUpperCase().trim();\n        if (unitName.includes('HUYỆN')) {\n          const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n          if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n            return true;\n          }\n        }\n        if (unitName.includes('QUẬN')) {\n          const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n          if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n            return true;\n          }\n        }\n        if (unitName.includes('TP')) {\n          const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n          if (cutString.length === `- TP ${unitInfoName}`.length) {\n            return true;\n          }\n        }\n        return false;\n      }).reduce((result, unit) => [...result, {\n        key: unit.id,\n        value: unit.id,\n        text: unit.name.toUpperCase()\n      }], [defaultOption, childUnitOption]);\n    }\n    return defaultOption;\n  }, [isAdmin, unitInfo, prefixList]);\n  const samplingPlaceOptions = useMemo(() => {\n    const places = samplingPlaceList.reduce((array, place) => [...array, {\n      key: place.id,\n      value: /(\\d+.\\s+)(.*)/i.exec(place.name.toLowerCase().trim())[2],\n      text: place.name.toUpperCase()\n    }], [defaultOption]);\n    return places.sort((a, b) => {\n      var _a$value, _b$value;\n      return naturalCompare(((_a$value = a === null || a === void 0 ? void 0 : a.value) !== null && _a$value !== void 0 ? _a$value : '').toString(), ((_b$value = b === null || b === void 0 ? void 0 : b.value) !== null && _b$value !== void 0 ? _b$value : '').toString());\n    });\n  }, [samplingPlaceList]);\n  const examinationTypeOptions = useMemo(() => examinationTypeList.reduce((result, type) => [...result, {\n    key: type.id,\n    value: type.name.toUpperCase(),\n    text: type.name.toUpperCase()\n  }], [defaultOption]), [examinationTypeList]);\n  const handleMulipleSelect = function () {\n    let type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let value = arguments.length > 1 ? arguments[1] : undefined;\n    if (type !== '') {\n      let newValue = value || [];\n      const lastValue = newValue.slice().pop();\n      if (newValue.length === 0 || newValue.length > 1 && (lastValue === -1 || lastValue === -2)) {\n        newValue = [lastValue];\n      }\n      if (newValue.length > 1 && (newValue.includes(-1) || newValue.includes(-2))) {\n        newValue = newValue.filter(v => v !== -1 && v !== -2);\n      }\n      setValue(type, newValue);\n    }\n  };\n  const onSubmit = async data => {\n    const payload = {\n      FromDate: data.fromDate,\n      ToDate: data.toDate,\n      DataSource: 2\n    };\n    // if (data?.unitIds) {\n    //   if (data.unitIds.includes(-1)) {\n    //     if ((unitInfo?.name ?? '').includes('TRUNG TÂM Y TẾ')) {\n    //       const unitInfoName = unitInfo.name.substr(20).trim();\n    //       payload.unitIds =\n    //         prefixList\n    //           .filter((unit) => {\n    //             if (unitInfo.id === unit.id) {\n    //               return true;\n    //             }\n\n    //             const unitName = unit.name.toUpperCase().trim();\n    //             if (unitName.includes('HUYỆN')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n    //               if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             if (unitName.includes('QUẬN')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n    //               if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             if (unitName.includes('TP')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n    //               if (cutString.length === `- TP ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             return false;\n    //           })\n    //           .map((unit) => unit.id);\n    //     }\n    //   } else if (data.unitIds.includes(-2)) {\n    //     const unitInfoName = unitInfo.name.substr(20).trim();\n    //     payload.unitIds =\n    //       prefixList\n    //         .filter((unit) => {\n    //           if (unitInfo.id === unit.id) {\n    //             return false;\n    //           }\n\n    //           const unitName = unit.name.toUpperCase().trim();\n    //           if (unitName.includes('HUYỆN')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n    //             if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           if (unitName.includes('QUẬN')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n    //             if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           if (unitName.includes('TP')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n    //             if (cutString.length === `- TP ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           return false;\n    //         })\n    //         .map((unit) => unit.id);\n    //   } else {\n    //     payload.unitIds = data.unitIds;\n    //   }\n    // }\n\n    if ((data === null || data === void 0 ? void 0 : data.samplingPlaces) && !data.samplingPlaces.includes(-1)) {\n      payload.SamplingPlace = data.samplingPlaces;\n    }\n    if ((data === null || data === void 0 ? void 0 : data.examinationTypes) && !data.examinationTypes.includes(-1)) {\n      payload.ExaminationType = data.examinationTypes;\n    }\n    if (data === null || data === void 0 ? void 0 : data.dateType) {\n      payload.DateType = data.dateType;\n    }\n    if ((data === null || data === void 0 ? void 0 : data.results) && !data.results.includes(-1)) {\n      payload.Result = data.results;\n    }\n    if ((data === null || data === void 0 ? void 0 : data.unitIds) && !data.unitIds.includes(-1)) {\n      payload.Unit = data.unitIds;\n    }\n    if (!isMultipleUnit) {\n      payload.Unit = [unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id];\n    }\n    try {\n      await dispatch(exportExcel({\n        method: 'GET',\n        url: apiLinks.injectedPatient.exportExcel,\n        params: payload,\n        fileName: 'Xuất dữ liệu khai báo f0'\n      }));\n      onClose();\n    } catch {\n      toast.warn('Không có mẫu');\n    }\n  };\n  useEffect(() => {\n    if (!(unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id)) {\n      dispatch(getUnitInfo());\n    }\n    if (prefixList.length === 0) {\n      dispatch(getPrefixes());\n    }\n    if (examinationTypeList.length === 0) {\n      dispatch(getExaminationTypes());\n    }\n    if (samplingPlaceList.length === 0) {\n      dispatch(getSamplingPlaces());\n    }\n    // eslint-disable-next-line\n  }, [dispatch]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }, \"Xu\\u1EA5t d\\u1EEF li\\u1EC7u khai b\\xE1o f0\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    loading: exportLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }, isMultipleUnit && /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"unitIds\",\n    defaultValue: [-1],\n    render: _ref => {\n      let {\n        value\n      } = _ref;\n      return /*#__PURE__*/React.createElement(Form.Select, {\n        deburr: true,\n        search: true,\n        multiple: true,\n        loading: getPrefixesLoading,\n        label: \"\\u0110\\u01A1n v\\u1ECB x\\xE1c minh\",\n        value: value,\n        options: prefixOptions,\n        onChange: (_, _ref2) => {\n          let {\n            value: v\n          } = _ref2;\n          return handleMulipleSelect('unitIds', v);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 19\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"samplingPlaces\",\n    defaultValue: [-1],\n    render: _ref3 => {\n      let {\n        value\n      } = _ref3;\n      return /*#__PURE__*/React.createElement(Form.Select, {\n        deburr: true,\n        search: true,\n        multiple: true,\n        loading: getSamplingPlacesLoading,\n        label: \"N\\u01A1i l\\u1EA5y m\\u1EABu\",\n        value: value,\n        options: samplingPlaceOptions,\n        onChange: (_, _ref4) => {\n          let {\n            value: v\n          } = _ref4;\n          return handleMulipleSelect('samplingPlaces', v);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"examinationTypes\",\n    defaultValue: [-1],\n    render: _ref5 => {\n      let {\n        value\n      } = _ref5;\n      return /*#__PURE__*/React.createElement(Form.Select, {\n        deburr: true,\n        search: true,\n        multiple: true,\n        loading: getExaminationTypesLoading,\n        label: \"L\\xFD do - \\u0111\\u1ED1i t\\u01B0\\u1EE3ng\",\n        value: value,\n        options: examinationTypeOptions,\n        onChange: (e, _ref6) => {\n          let {\n            value: v\n          } = _ref6;\n          return handleMulipleSelect('examinationTypes', v);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"dateType\",\n    rule: {\n      required: 'Bắt buộc phải chọn thống kê ngày'\n    },\n    defaultValue: 4,\n    render: _ref7 => {\n      let {\n        onChange,\n        onBlur\n      } = _ref7;\n      return /*#__PURE__*/React.createElement(Form.Select, {\n        required: true,\n        label: \"Th\\u1ED1ng k\\xEA theo\",\n        defaultValue: 4,\n        options: dateTypeOptions,\n        onBlur: onBlur,\n        onChange: (e, _ref8) => {\n          let {\n            value\n          } = _ref8;\n          return onChange(value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"fromDate\",\n    defaultValue: moment().format('YYYY-MM-DDT00:00'),\n    rules: {\n      required: true\n    },\n    render: _ref9 => {\n      let {\n        onChange,\n        onBlur,\n        value\n      } = _ref9;\n      return /*#__PURE__*/React.createElement(Form.Field, {\n        fluid: true,\n        required: true,\n        isHavingTime: true,\n        error: errors.fromDate && 'Bắt buộc phải chọn ngày bắt đầu',\n        label: \"T\\u1EEB ng\\xE0y\",\n        control: KeyboardDateTimePicker,\n        disabledDays: [{\n          before: new Date('2022-04-01'),\n          after: new Date()\n        }],\n        value: value,\n        onChange: onChange,\n        onBlur: onBlur,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"toDate\",\n    defaultValue: moment().format('YYYY-MM-DDT00:00'),\n    rules: {\n      required: true\n    },\n    render: _ref10 => {\n      let {\n        onChange,\n        onBlur,\n        value\n      } = _ref10;\n      return /*#__PURE__*/React.createElement(Form.Field, {\n        fluid: true,\n        required: true,\n        isHavingTime: true,\n        error: errors.fromDate && 'Bắt buộc phải chọn ngày kết thúc',\n        label: \"\\u0110\\u1EBFn ng\\xE0y\",\n        control: KeyboardDateTimePicker,\n        disabledDays: [{\n          after: new Date(),\n          before: new Date(watch('fromDate'))\n        }],\n        value: value,\n        onChange: onChange,\n        onBlur: onBlur,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    positive: true,\n    labelPosition: \"right\",\n    icon: \"checkmark\",\n    content: \"X\\xE1c nh\\u1EADn\",\n    disabled: exportLoading,\n    onClick: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 9\n    }\n  })));\n};\nExportInfectedPatientModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default ExportInfectedPatientModal;","map":{"version":3,"names":["React","useEffect","useMemo","PropTypes","toast","moment","Button","Form","Modal","KeyboardDateTimePicker","useForm","Controller","useDispatch","useSelector","useAuth","exportExcel","apiLinks","naturalCompare","getUnitInfo","getPrefixes","getExaminationTypes","getSamplingPlaces","defaultOption","key","value","text","childUnitOption","dateTypeOptions","resultTypeOptions","reduce","r","e","toUpperCase","ExportInfectedPatientModal","props","open","onClose","dispatch","isAdmin","watch","errors","control","setValue","handleSubmit","unitInfo","prefixList","examinationTypeList","samplingPlaceList","getPrefixesLoading","getExaminationTypesLoading","getSamplingPlacesLoading","state","medicalTest","exportLoading","s","global","isMultipleUnit","_unitInfo$name","name","includes","prefixOptions","result","unit","id","unitInfoName","substr","trim","filter","unitName","cutString","indexOf","length","samplingPlaceOptions","places","array","place","exec","toLowerCase","sort","a","b","_a$value","_b$value","toString","examinationTypeOptions","type","handleMulipleSelect","arguments","undefined","newValue","lastValue","slice","pop","v","onSubmit","data","payload","FromDate","fromDate","ToDate","toDate","DataSource","samplingPlaces","SamplingPlace","examinationTypes","ExaminationType","dateType","DateType","results","Result","unitIds","Unit","method","url","injectedPatient","params","fileName","warn","createElement","__self","__source","_jsxFileName","lineNumber","columnNumber","Header","Content","loading","Group","widths","defaultValue","render","_ref","Select","deburr","search","multiple","label","options","onChange","_","_ref2","_ref3","_ref4","_ref5","_ref6","rule","required","_ref7","onBlur","_ref8","format","rules","_ref9","Field","fluid","isHavingTime","error","disabledDays","before","Date","after","_ref10","Actions","positive","labelPosition","icon","content","disabled","onClick","propTypes","bool","isRequired","func"],"sources":["H:/BAKCO/pj/cds/src/patient-management/components/infected-patient/ExportInfectedPatientModal.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport moment from 'moment';\n\nimport { Button, Form, Modal } from 'semantic-ui-react';\nimport { KeyboardDateTimePicker } from 'app/components/shared';\n\nimport { useForm, Controller } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useAuth } from 'app/hooks';\nimport { exportExcel } from 'app/actions/global';\nimport apiLinks from 'app/utils/api-links';\nimport { naturalCompare } from 'app/utils/helpers';\nimport {\n  getUnitInfo,\n  getPrefixes,\n  getExaminationTypes,\n  getSamplingPlaces,\n} from 'medical-test/actions/medical-test';\n\nconst defaultOption = {\n  key: -1,\n  value: -1,\n  text: 'Tất cả',\n};\n\nconst childUnitOption = {\n  key: -2,\n  value: -2,\n  text: 'Tất cả các cơ sở cấp dưới',\n};\n\nconst dateTypeOptions = [\n  { value: 1, text: 'Ngày xét nghiệm' },\n  { value: 3, text: 'Ngày hệ thống ghi nhận' },\n  { value: 4, text: 'Ngày xác minh' },\n];\n\nconst resultTypeOptions = [\n  'Dương tính',\n  'Âm tính',\n  'Nghi ngờ',\n  'Chưa xác định',\n].reduce((r, e) => ([...r, {\n  text: e.toUpperCase(),\n  value: e.toUpperCase(),\n}]), [defaultOption]);\n\nconst ExportInfectedPatientModal = (props) => {\n  const { open, onClose } = props;\n\n  const dispatch = useDispatch();\n  const { isAdmin } = useAuth();\n  const { watch, errors, control, setValue, handleSubmit } = useForm();\n  const {\n    unitInfo,\n    prefixList,\n    examinationTypeList,\n    samplingPlaceList,\n    getPrefixesLoading,\n    getExaminationTypesLoading,\n    getSamplingPlacesLoading,\n  } = useSelector((state) => state.medicalTest);\n  const { exportLoading } = useSelector((s) => s.global);\n\n  const isMultipleUnit = useMemo(() =>\n    isAdmin || (unitInfo?.name ?? '').includes('TRUNG TÂM Y TẾ'),\n    [isAdmin, unitInfo]);\n\n  const prefixOptions = useMemo(() => {\n    if (isAdmin) {\n      return prefixList.reduce((result, unit) => [...result, {\n        key: unit.id,\n        value: unit.name,\n        text: unit.name.toUpperCase(),\n      }], [defaultOption]);\n    }\n\n    if (unitInfo?.name && unitInfo.name.toUpperCase().includes('TRUNG TÂM Y TẾ')) {\n      const unitInfoName = unitInfo.name.substr(20).trim();\n\n      return prefixList\n        .filter((unit) => {\n          if (unitInfo.id === unit.id) {\n            return true;\n          }\n\n          const unitName = unit.name.toUpperCase().trim();\n          if (unitName.includes('HUYỆN')) {\n            const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n            if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n              return true;\n            }\n          }\n\n          if (unitName.includes('QUẬN')) {\n            const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n            if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n              return true;\n            }\n          }\n\n          if (unitName.includes('TP')) {\n            const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n            if (cutString.length === `- TP ${unitInfoName}`.length) {\n              return true;\n            }\n          }\n\n          return false;\n        })\n        .reduce(\n          (result, unit) => [...result, {\n            key: unit.id,\n            value: unit.id,\n            text: unit.name.toUpperCase(),\n          },\n          ], [defaultOption, childUnitOption]);\n    }\n\n    return defaultOption;\n  }, [isAdmin, unitInfo, prefixList]);\n\n  const samplingPlaceOptions = useMemo(() => {\n    const places = samplingPlaceList.reduce(\n      (array, place) => [\n        ...array,\n        {\n          key: place.id,\n          value: /(\\d+.\\s+)(.*)/i.exec(place.name.toLowerCase().trim())[2],\n          text: place.name.toUpperCase(),\n        },\n      ],\n      [defaultOption],\n    );\n    return places.sort((a, b) =>\n      naturalCompare((a?.value ?? '').toString(), (b?.value ?? '').toString()),\n    );\n  }, [samplingPlaceList]);\n\n  const examinationTypeOptions = useMemo(() =>\n    examinationTypeList.reduce((result, type) => [...result, {\n      key: type.id,\n      value: type.name.toUpperCase(),\n      text: type.name.toUpperCase(),\n    }], [defaultOption]),\n    [examinationTypeList]);\n\n  const handleMulipleSelect = (type = '', value) => {\n    if (type !== '') {\n      let newValue = value || [];\n      const lastValue = newValue.slice().pop();\n      if (\n        newValue.length === 0 ||\n        (newValue.length > 1 && (lastValue === -1 || lastValue === -2))\n      ) {\n        newValue = [lastValue];\n      }\n      if (newValue.length > 1 && (newValue.includes(-1) || newValue.includes(-2))) {\n        newValue = newValue.filter((v) => v !== -1 && v !== -2);\n      }\n\n      setValue(type, newValue);\n    }\n  };\n\n  const onSubmit = async (data) => {\n    const payload = {\n      FromDate: data.fromDate,\n      ToDate: data.toDate,\n      DataSource: 2,\n    };\n    // if (data?.unitIds) {\n    //   if (data.unitIds.includes(-1)) {\n    //     if ((unitInfo?.name ?? '').includes('TRUNG TÂM Y TẾ')) {\n    //       const unitInfoName = unitInfo.name.substr(20).trim();\n    //       payload.unitIds =\n    //         prefixList\n    //           .filter((unit) => {\n    //             if (unitInfo.id === unit.id) {\n    //               return true;\n    //             }\n\n    //             const unitName = unit.name.toUpperCase().trim();\n    //             if (unitName.includes('HUYỆN')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n    //               if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             if (unitName.includes('QUẬN')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n    //               if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             if (unitName.includes('TP')) {\n    //               const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n    //               if (cutString.length === `- TP ${unitInfoName}`.length) {\n    //                 return true;\n    //               }\n    //             }\n\n    //             return false;\n    //           })\n    //           .map((unit) => unit.id);\n    //     }\n    //   } else if (data.unitIds.includes(-2)) {\n    //     const unitInfoName = unitInfo.name.substr(20).trim();\n    //     payload.unitIds =\n    //       prefixList\n    //         .filter((unit) => {\n    //           if (unitInfo.id === unit.id) {\n    //             return false;\n    //           }\n\n    //           const unitName = unit.name.toUpperCase().trim();\n    //           if (unitName.includes('HUYỆN')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- HUYỆN ${unitInfoName}`));\n    //             if (cutString.length === `- HUYỆN ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           if (unitName.includes('QUẬN')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- QUẬN ${unitInfoName}`));\n    //             if (cutString.length === `- QUẬN ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           if (unitName.includes('TP')) {\n    //             const cutString = unitName.substr(unitName.indexOf(`- TP ${unitInfoName}`));\n    //             if (cutString.length === `- TP ${unitInfoName}`.length) {\n    //               return true;\n    //             }\n    //           }\n\n    //           return false;\n    //         })\n    //         .map((unit) => unit.id);\n    //   } else {\n    //     payload.unitIds = data.unitIds;\n    //   }\n    // }\n\n    if (data?.samplingPlaces && !data.samplingPlaces.includes(-1)) {\n      payload.SamplingPlace = data.samplingPlaces;\n    }\n\n    if (data?.examinationTypes && !data.examinationTypes.includes(-1)) {\n      payload.ExaminationType = data.examinationTypes;\n    }\n\n    if (data?.dateType) {\n      payload.DateType = data.dateType;\n    }\n\n    if (data?.results && !data.results.includes(-1)) {\n      payload.Result = data.results;\n    }\n    if (data?.unitIds && !data.unitIds.includes(-1)) {\n      payload.Unit = data.unitIds;\n    }\n    if (!isMultipleUnit) {\n      payload.Unit = [unitInfo?.id];\n    }\n\n    try {\n      await dispatch(\n        exportExcel({\n          method: 'GET',\n          url: apiLinks.injectedPatient.exportExcel,\n          params: payload,\n          fileName: 'Xuất dữ liệu khai báo f0',\n        }),\n      );\n      onClose();\n    } catch {\n      toast.warn('Không có mẫu');\n    }\n  };\n\n  useEffect(() => {\n    if (!unitInfo?.id) {\n      dispatch(getUnitInfo());\n    }\n    if (prefixList.length === 0) {\n      dispatch(getPrefixes());\n    }\n    if (examinationTypeList.length === 0) {\n      dispatch(getExaminationTypes());\n    }\n    if (samplingPlaceList.length === 0) {\n      dispatch(getSamplingPlaces());\n    }\n    // eslint-disable-next-line\n  }, [dispatch]);\n\n  return (\n    <Modal open={open} onClose={onClose}>\n      <Modal.Header>Xuất dữ liệu khai báo f0</Modal.Header>\n      <Modal.Content>\n        <Form loading={exportLoading}>\n          <Form.Group widths=\"equal\">\n            {isMultipleUnit && (\n              <Controller\n                control={control}\n                name=\"unitIds\"\n                defaultValue={[-1]}\n                render={({ value }) => (\n                  <Form.Select\n                    deburr\n                    search\n                    multiple\n                    loading={getPrefixesLoading}\n                    label=\"Đơn vị xác minh\"\n                    value={value}\n                    options={prefixOptions}\n                    onChange={(_, { value: v }) => handleMulipleSelect('unitIds', v)}\n                  />\n                )}\n              />\n            )}\n            <Controller\n              control={control}\n              name=\"samplingPlaces\"\n              defaultValue={[-1]}\n              render={({ value }) => (\n                <Form.Select\n                  deburr\n                  search\n                  multiple\n                  loading={getSamplingPlacesLoading}\n                  label=\"Nơi lấy mẫu\"\n                  value={value}\n                  options={samplingPlaceOptions}\n                  onChange={(_, { value: v }) => handleMulipleSelect('samplingPlaces', v)}\n                />\n              )}\n            />\n          </Form.Group>\n          <Form.Group widths=\"equal\">\n            <Controller\n              control={control}\n              name=\"examinationTypes\"\n              defaultValue={[-1]}\n              render={({ value }) => (\n                <Form.Select\n                  deburr\n                  search\n                  multiple\n                  loading={getExaminationTypesLoading}\n                  label=\"Lý do - đối tượng\"\n                  value={value}\n                  options={examinationTypeOptions}\n                  onChange={(e, { value: v }) => handleMulipleSelect('examinationTypes', v)}\n                />\n              )}\n            />\n            {/* <Controller\n              control={control}\n              name=\"results\"\n              defaultValue={[-1]}\n              render={({ value }) => (\n                <Form.Select\n                  multiple\n                  label=\"Kết quả\"\n                  value={value}\n                  options={resultTypeOptions}\n                  onChange={(_, { value: v }) => handleMulipleSelect('results', v)}\n                />\n              )}\n            /> */}\n          </Form.Group>\n          <Form.Group widths=\"equal\">\n            <Controller\n              control={control}\n              name=\"dateType\"\n              rule={{\n                required: 'Bắt buộc phải chọn thống kê ngày',\n              }}\n              defaultValue={4}\n              render={({ onChange, onBlur }) => (\n                <Form.Select\n                  required\n                  label=\"Thống kê theo\"\n                  defaultValue={4}\n                  options={dateTypeOptions}\n                  onBlur={onBlur}\n                  onChange={(e, { value }) => onChange(value)}\n                />\n              )}\n            />\n          </Form.Group>\n          <Form.Group widths=\"equal\">\n            <Controller\n              control={control}\n              name=\"fromDate\"\n              defaultValue={moment().format('YYYY-MM-DDT00:00')}\n              rules={{ required: true }}\n              render={({ onChange, onBlur, value }) => (\n                <Form.Field\n                  fluid\n                  required\n                  isHavingTime\n                  error={errors.fromDate && 'Bắt buộc phải chọn ngày bắt đầu'}\n                  label=\"Từ ngày\"\n                  control={KeyboardDateTimePicker}\n                  disabledDays={[{ before: new Date('2022-04-01'), after: new Date() }]}\n                  value={value}\n                  onChange={onChange}\n                  onBlur={onBlur}\n                />\n              )}\n            />\n            <Controller\n              control={control}\n              name=\"toDate\"\n              defaultValue={moment().format('YYYY-MM-DDT00:00')}\n              rules={{ required: true }}\n              render={({ onChange, onBlur, value }) => (\n                <Form.Field\n                  fluid\n                  required\n                  isHavingTime\n                  error={errors.fromDate && 'Bắt buộc phải chọn ngày kết thúc'}\n                  label=\"Đến ngày\"\n                  control={KeyboardDateTimePicker}\n                  disabledDays={[\n                    {\n                      after: new Date(),\n                      before: new Date(watch('fromDate')),\n                    },\n                  ]}\n                  value={value}\n                  onChange={onChange}\n                  onBlur={onBlur}\n                />\n              )}\n            />\n          </Form.Group>\n        </Form>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          positive\n          labelPosition=\"right\"\n          icon=\"checkmark\"\n          content=\"Xác nhận\"\n          disabled={exportLoading}\n          onClick={handleSubmit(onSubmit)}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nExportInfectedPatientModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default ExportInfectedPatientModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}