{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\quarantine-facilities\\\\components\\\\quarantine-in-facility\\\\TakeInModal.js\";\nimport React, { useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Modal } from 'semantic-ui-react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { takeIn } from 'quarantine-facilities/actions/quarantine';\nimport { getAvailableRooms } from 'quarantine-facilities/actions/quarantine-facility';\nconst ApproveModal = props => {\n  const {\n    open,\n    onClose,\n    onSubmit,\n    data\n  } = props;\n  const {\n    watch,\n    control,\n    getValues\n  } = useForm();\n  const {\n    takeInLoading\n  } = useSelector(s => s.quarantine);\n  const {\n    selectedFacility,\n    facilityInfo,\n    availableRoomData: {\n      data: availableRoomList\n    },\n    getAvailableRoomsLoading\n  } = useSelector(s => s.quarantineFacility);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    var _facilityInfo$;\n    if (open && (selectedFacility || ((_facilityInfo$ = facilityInfo[0]) === null || _facilityInfo$ === void 0 ? void 0 : _facilityInfo$.id))) {\n      var _selectedFacility$id;\n      dispatch(getAvailableRooms({\n        id: (_selectedFacility$id = selectedFacility === null || selectedFacility === void 0 ? void 0 : selectedFacility.id) !== null && _selectedFacility$id !== void 0 ? _selectedFacility$id : facilityInfo[0].id,\n        pageIndex: 0,\n        pageSize: 1000\n      }));\n    }\n  }, [open, dispatch, selectedFacility, facilityInfo]);\n  const disabled = useMemo(() => !watch('roomId'), [watch]);\n  const handleTakeIn = async () => {\n    const d = getValues();\n    await dispatch(takeIn({\n      ...d,\n      quarantineFormId: data.quarantineForm.id\n    }));\n    onClose();\n    onSubmit();\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, \"Duy\\u1EC7t \\u0111\\u1ED1i t\\u01B0\\u1EE3ng\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleTakeIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    defaultValue: \"\",\n    name: \"roomId\",\n    render: _ref => {\n      let {\n        onChange,\n        onBlur,\n        value\n      } = _ref;\n      return /*#__PURE__*/React.createElement(Form.Select, {\n        fluid: true,\n        search: true,\n        deburr: true,\n        required: true,\n        clearable: true,\n        loading: getAvailableRoomsLoading,\n        label: \"Ph\\xF2ng\",\n        value: value,\n        onChange: (e, _ref2) => {\n          let {\n            value: v\n          } = _ref2;\n          return onChange(v);\n        },\n        onBlur: onBlur,\n        options: (availableRoomList || []).map(d => ({\n          text: d.name,\n          value: d.id\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Button, {\n    primary: true,\n    loading: takeInLoading,\n    disabled: disabled || takeInLoading,\n    content: \"X\\xE1c nh\\u1EADn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }))));\n};\nApproveModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  data: PropTypes.shape({\n    quarantineForm: PropTypes.shape({\n      id: PropTypes.string\n    })\n  }).isRequired\n};\nexport default ApproveModal;","map":{"version":3,"names":["React","useEffect","useMemo","PropTypes","Form","Modal","useForm","Controller","useDispatch","useSelector","takeIn","getAvailableRooms","ApproveModal","props","open","onClose","onSubmit","data","watch","control","getValues","takeInLoading","s","quarantine","selectedFacility","facilityInfo","availableRoomData","availableRoomList","getAvailableRoomsLoading","quarantineFacility","dispatch","_facilityInfo$","id","_selectedFacility$id","pageIndex","pageSize","disabled","handleTakeIn","d","quarantineFormId","quarantineForm","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Header","Content","Group","widths","defaultValue","name","render","_ref","onChange","onBlur","value","Select","fluid","search","deburr","required","clearable","loading","label","e","_ref2","v","options","map","text","Button","primary","content","propTypes","bool","isRequired","func","shape","string"],"sources":["H:/BAKCO/pj/cds/src/quarantine-facilities/components/quarantine-in-facility/TakeInModal.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Modal } from 'semantic-ui-react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { takeIn } from 'quarantine-facilities/actions/quarantine';\nimport { getAvailableRooms } from 'quarantine-facilities/actions/quarantine-facility';\n\nconst ApproveModal = (props) => {\n  const { open, onClose, onSubmit, data } = props;\n  const { watch, control, getValues } = useForm();\n  const { takeInLoading } = useSelector((s) => s.quarantine);\n  const {\n    selectedFacility,\n    facilityInfo,\n    availableRoomData: { data: availableRoomList },\n    getAvailableRoomsLoading,\n  } = useSelector((s) => s.quarantineFacility);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (open && (selectedFacility || facilityInfo[0]?.id)) {\n      dispatch(\n        getAvailableRooms({\n          id: selectedFacility?.id ?? facilityInfo[0].id,\n          pageIndex: 0,\n          pageSize: 1000,\n        }),\n      );\n    }\n  }, [open, dispatch, selectedFacility, facilityInfo]);\n  const disabled = useMemo(() => !watch('roomId'), [watch]);\n  const handleTakeIn = async () => {\n    const d = getValues();\n    await dispatch(\n      takeIn({\n        ...d,\n        quarantineFormId: data.quarantineForm.id,\n      }),\n    );\n    onClose();\n    onSubmit();\n  };\n  return (\n    <Modal open={open} onClose={onClose}>\n      <Modal.Header>Duyệt đối tượng</Modal.Header>\n      <Modal.Content>\n        <Form onSubmit={handleTakeIn}>\n          <Form.Group widths=\"equal\">\n            <Controller\n              control={control}\n              defaultValue=\"\"\n              name=\"roomId\"\n              render={({ onChange, onBlur, value }) => (\n                <Form.Select\n                  fluid\n                  search\n                  deburr\n                  required\n                  clearable\n                  loading={getAvailableRoomsLoading}\n                  label=\"Phòng\"\n                  value={value}\n                  onChange={(e, { value: v }) => onChange(v)}\n                  onBlur={onBlur}\n                  options={(availableRoomList || []).map((d) => ({\n                    text: d.name,\n                    value: d.id,\n                  }))}\n                />\n              )}\n            />\n          </Form.Group>\n          <Form.Button\n            primary\n            loading={takeInLoading}\n            disabled={disabled || takeInLoading}\n            content=\"Xác nhận\"\n          />\n        </Form>\n      </Modal.Content>\n    </Modal>\n  );\n};\n\nApproveModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  data: PropTypes.shape({\n    quarantineForm: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default ApproveModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}