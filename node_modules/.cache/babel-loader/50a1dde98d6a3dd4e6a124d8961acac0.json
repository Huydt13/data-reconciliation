{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\medical-test\\\\components\\\\codes\\\\UsedCodeTable.js\";\n/* eslint-disable react/prop-types */\n/* eslint-disable no-nested-ternary */\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { useAuth } from 'app/hooks';\nimport { getUsedCode } from 'medical-test/actions/medical-test';\nimport { DataTable } from 'app/components/shared';\nimport UsedCodeFilter from './UsedCodeFilter';\nconst UsedCodeTable = () => {\n  const columns = [{\n    Header: '#',\n    accessor: 'index'\n  }, {\n    Header: 'Mã xét nghiệm',\n    formatter: _ref => {\n      let {\n        code\n      } = _ref;\n      return (code === null || code === void 0 ? void 0 : code.length) === 12 ? /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 55\n        }\n      }, code) : code;\n    }\n  }, {\n    Header: 'Ngày cấp',\n    formatter: row => row.publishedDate ? moment(row.publishedDate).format('DD-MM-YY HH:mm') : ''\n  }, {\n    Header: 'Số lần in',\n    accessor: 'printedCount'\n  }, {\n    Header: 'Lần in cuối cùng',\n    formatter: row => row.lastPrintedDate ? moment(row.lastPrintedDate).format('DD-MM-YY HH:mm') : ''\n  }];\n  const dispatch = useDispatch();\n  const [filter, setFilter] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const {\n    unitInfo,\n    usedCodeData,\n    getUsedCodesLoading,\n    getDiseasesLoading,\n    getPrefixesLoading\n  } = useSelector(state => state.medicalTest);\n  const loading = getUsedCodesLoading || getPrefixesLoading || getDiseasesLoading;\n  const {\n    isAdmin\n  } = useAuth();\n  const handleRefresh = useCallback(() => {\n    dispatch(getUsedCode({\n      ...filter,\n      unitPrefix: isAdmin ? filter.unitPrefix : unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.code,\n      pageSize,\n      pageIndex\n    }));\n  }, [filter, pageIndex, pageSize, dispatch, isAdmin, unitInfo]);\n  useEffect(handleRefresh, [handleRefresh]);\n  const {\n    data,\n    pageCount\n  } = usedCodeData;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UsedCodeFilter, {\n    onChange: setFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    title: \"M\\xE3 \\u0111\\xE3 s\\u1EED d\\u1EE5ng\",\n    columns: columns,\n    data: (data || []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: loading,\n    pageCount: pageCount,\n    onPaginationChange: p => {\n      setPageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n};\nexport default UsedCodeTable;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useSelector","useDispatch","moment","useAuth","getUsedCode","DataTable","UsedCodeFilter","UsedCodeTable","columns","Header","accessor","formatter","_ref","code","length","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","row","publishedDate","format","lastPrintedDate","dispatch","filter","setFilter","pageIndex","setPageIndex","pageSize","setPageSize","unitInfo","usedCodeData","getUsedCodesLoading","getDiseasesLoading","getPrefixesLoading","state","medicalTest","loading","isAdmin","handleRefresh","unitPrefix","data","pageCount","onChange","title","map","r","i","index","onPaginationChange","p","actions"],"sources":["H:/BAKCO/pj/cds/src/medical-test/components/codes/UsedCodeTable.js"],"sourcesContent":["/* eslint-disable react/prop-types */\n/* eslint-disable no-nested-ternary */\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport moment from 'moment';\n\nimport { useAuth } from 'app/hooks';\nimport { getUsedCode } from 'medical-test/actions/medical-test';\n\nimport { DataTable } from 'app/components/shared';\n\nimport UsedCodeFilter from './UsedCodeFilter';\n\nconst UsedCodeTable = () => {\n  const columns = [\n    { Header: '#', accessor: 'index' },\n    {\n      Header: 'Mã xét nghiệm',\n      formatter: ({ code }) => (code?.length === 12 ? <b>{code}</b> : code),\n    },\n    {\n      Header: 'Ngày cấp',\n      formatter: (row) =>\n        row.publishedDate\n          ? moment(row.publishedDate).format('DD-MM-YY HH:mm')\n          : '',\n    },\n    {\n      Header: 'Số lần in',\n      accessor: 'printedCount',\n    },\n    {\n      Header: 'Lần in cuối cùng',\n      formatter: (row) =>\n        row.lastPrintedDate\n          ? moment(row.lastPrintedDate).format('DD-MM-YY HH:mm')\n          : '',\n    },\n  ];\n  const dispatch = useDispatch();\n  const [filter, setFilter] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n\n  const {\n    unitInfo,\n    usedCodeData,\n    getUsedCodesLoading,\n    getDiseasesLoading,\n    getPrefixesLoading,\n  } = useSelector((state) => state.medicalTest);\n\n  const loading =\n    getUsedCodesLoading || getPrefixesLoading || getDiseasesLoading;\n\n  const { isAdmin } = useAuth();\n\n  const handleRefresh = useCallback(() => {\n    dispatch(\n      getUsedCode({\n        ...filter,\n        unitPrefix: isAdmin ? filter.unitPrefix : unitInfo?.code,\n        pageSize,\n        pageIndex,\n      }),\n    );\n  }, [filter, pageIndex, pageSize, dispatch, isAdmin, unitInfo]);\n\n  useEffect(handleRefresh, [handleRefresh]);\n\n  const { data, pageCount } = usedCodeData;\n\n  return (\n    <div>\n      <UsedCodeFilter onChange={setFilter} />\n      <DataTable\n        title=\"Mã đã sử dụng\"\n        columns={columns}\n        data={(data || []).map((r, i) => ({ ...r, index: i + 1 }))}\n        loading={loading}\n        pageCount={pageCount}\n        onPaginationChange={(p) => {\n          setPageIndex(p.pageIndex);\n          setPageSize(p.pageSize);\n        }}\n        actions={[]}\n      />\n    </div>\n  );\n};\n\nexport default UsedCodeTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}