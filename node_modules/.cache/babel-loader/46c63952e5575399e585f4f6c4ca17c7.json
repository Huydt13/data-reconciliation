{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\app\\\\components\\\\core\\\\App.js\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Provider } from 'react-redux';\nimport styled from 'styled-components';\n\n// import { HubConnectionBuilder, LogLevel } from '@aspnet/signalr';\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport AppRouter from 'app/routes/AppRouter';\nimport { ConfirmModal, ForwardModal, InfoModal, TreeFolderModal, ErrorModal } from 'app/components/shared';\nimport store from 'app/store';\nconst StyledToastContainer = styled(ToastContainer)`\n  > div {\n    border-radius: 0.25rem !important;\n  }\n  * {\n    font-family: Barlow !important;\n    font-size: 20px;\n  }\n`;\nconst initialSignalRConnection = () =>\n// token,\n// connectSignalR\n{\n  // console.log('ðŸ”—ðŸ”—ðŸ”— Initial hub connection...');\n  // const con = new HubConnectionBuilder()\n  //   .withUrl('http://202.78.227.176:32653/notificationHub', {\n  //     accessTokenFactory: () => token.access_token,\n  //   })\n  //   .configureLogging(LogLevel.Information)\n  //   .build();\n  // con.on('Notify', (message) => {\n  //   console.log(message);\n  // });\n  // con.on('Ping', (message) => {\n  //   console.log(message);\n  // });\n  // // reconnect\n  // con.onclose(async () => {\n  //   await connectSignalR();\n  // });\n  // return con;\n};\nconst App = () => {\n  const [connection, setConnection] = useState(null);\n  const connectSignalR = useCallback(async () => {\n    if (connection && connection.connectionState === 0) {\n      try {\n        console.log('ðŸš€ðŸš€ðŸš€ Connecting to hub...');\n        await connection.start();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [connection]);\n  const disconnectSignalR = useCallback(async () => {\n    if (connection && connection.connectionState === 1) {\n      try {\n        await connection.stop();\n        console.log('ðŸ›‘ðŸ›‘ðŸ›‘ Stoped hub connection!');\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [connection]);\n\n  // const { token } = useSelector((state) => state.auth);\n  const token = {\n    access_token: process.env.REACT_APP_SIGNAL_R_TOKEN\n  };\n  useEffect(() => {\n    if (token && !connection) {\n      const con = initialSignalRConnection(token, connectSignalR);\n      setConnection(con);\n    }\n    if (token && connection) {\n      connectSignalR();\n    }\n    return disconnectSignalR;\n  }, [token, connection, connectSignalR, disconnectSignalR]);\n  return /*#__PURE__*/React.createElement(Provider, {\n    store: store,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ConfirmModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TreeFolderModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InfoModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ErrorModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ForwardModal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(StyledToastContainer, {\n    autoClose: 3000,\n    position: \"bottom-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }));\n};\nexport default App;","map":{"version":3,"names":["React","useState","useCallback","useEffect","Provider","styled","ToastContainer","AppRouter","ConfirmModal","ForwardModal","InfoModal","TreeFolderModal","ErrorModal","store","StyledToastContainer","initialSignalRConnection","App","connection","setConnection","connectSignalR","connectionState","console","log","start","error","disconnectSignalR","stop","token","access_token","process","env","REACT_APP_SIGNAL_R_TOKEN","con","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","autoClose","position"],"sources":["H:/BAKCO/pj/cds/src/app/components/core/App.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport { Provider } from 'react-redux';\nimport styled from 'styled-components';\n\n// import { HubConnectionBuilder, LogLevel } from '@aspnet/signalr';\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport AppRouter from 'app/routes/AppRouter';\nimport {\n  ConfirmModal,\n  ForwardModal,\n  InfoModal,\n  TreeFolderModal,\n  ErrorModal,\n} from 'app/components/shared';\n\nimport store from 'app/store';\n\nconst StyledToastContainer = styled(ToastContainer)`\n  > div {\n    border-radius: 0.25rem !important;\n  }\n  * {\n    font-family: Barlow !important;\n    font-size: 20px;\n  }\n`;\n\nconst initialSignalRConnection = () =>\n  // token,\n  // connectSignalR\n  {\n    // console.log('ðŸ”—ðŸ”—ðŸ”— Initial hub connection...');\n    // const con = new HubConnectionBuilder()\n    //   .withUrl('http://202.78.227.176:32653/notificationHub', {\n    //     accessTokenFactory: () => token.access_token,\n    //   })\n    //   .configureLogging(LogLevel.Information)\n    //   .build();\n    // con.on('Notify', (message) => {\n    //   console.log(message);\n    // });\n    // con.on('Ping', (message) => {\n    //   console.log(message);\n    // });\n    // // reconnect\n    // con.onclose(async () => {\n    //   await connectSignalR();\n    // });\n    // return con;\n  };\n\nconst App = () => {\n  const [connection, setConnection] = useState(null);\n\n  const connectSignalR = useCallback(async () => {\n    if (connection && connection.connectionState === 0) {\n      try {\n        console.log('ðŸš€ðŸš€ðŸš€ Connecting to hub...');\n        await connection.start();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [connection]);\n\n  const disconnectSignalR = useCallback(async () => {\n    if (connection && connection.connectionState === 1) {\n      try {\n        await connection.stop();\n        console.log('ðŸ›‘ðŸ›‘ðŸ›‘ Stoped hub connection!');\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [connection]);\n\n  // const { token } = useSelector((state) => state.auth);\n  const token = { access_token: process.env.REACT_APP_SIGNAL_R_TOKEN };\n  useEffect(() => {\n    if (token && !connection) {\n      const con = initialSignalRConnection(token, connectSignalR);\n      setConnection(con);\n    }\n    if (token && connection) {\n      connectSignalR();\n    }\n    return disconnectSignalR;\n  }, [token, connection, connectSignalR, disconnectSignalR]);\n\n  return (\n    <Provider store={store}>\n      <AppRouter />\n      <ConfirmModal />\n      <TreeFolderModal />\n      <InfoModal />\n      <ErrorModal />\n      <ForwardModal />\n      <StyledToastContainer autoClose={3000} position=\"bottom-center\" />\n    </Provider>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}