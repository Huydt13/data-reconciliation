{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\medical-test\\\\components\\\\assigns\\\\AnonymousAssignFilter.js\";\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Form, Select } from 'semantic-ui-react';\nimport { useSelector } from 'react-redux';\nimport { useAuth } from 'app/hooks';\nimport { InstantSearchBar } from 'app/components/shared';\nconst Wrapper = styled.div`\n  padding: 8px;\n`;\nconst AnonymousAssignFilter = props => {\n  const {\n    onChange\n  } = props;\n  const [searchValue, setSearchValue] = useState('');\n  const [unitId, setUnitId] = useState('');\n  const [options, setOptions] = useState([]);\n  const {\n    unitInfo,\n    prefixList\n  } = useSelector(state => state.medicalTest);\n  const {\n    isAdmin\n  } = useAuth();\n  useEffect(() => {\n    if (isAdmin) {\n      setOptions(prefixList.map(pr => ({\n        key: pr.id,\n        text: pr.name,\n        value: pr.id\n      })));\n    } else {\n      setUnitId(unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id);\n      setOptions(prefixList.filter(pr => pr.id === (unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id)).map(pr => ({\n        key: pr.id,\n        text: pr.name,\n        value: pr.id\n      })));\n    }\n  }, [prefixList, unitInfo, isAdmin]);\n  useEffect(() => {\n    onChange({\n      searchValue,\n      unitId\n    });\n  }, [onChange, searchValue, unitId]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(InstantSearchBar, {\n    onChange: setSearchValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, !isAdmin && /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    search: true,\n    deburr: true,\n    label: \"C\\u01A1 s\\u1EDF x\\xE9t nghi\\u1EC7m\",\n    control: Select,\n    options: options,\n    value: unitId,\n    onChange: (e, _ref) => {\n      let {\n        value\n      } = _ref;\n      return setUnitId(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }))))));\n};\nAnonymousAssignFilter.propTypes = {\n  onChange: PropTypes.func\n};\nAnonymousAssignFilter.defaultProps = {\n  onChange: () => {}\n};\nexport default AnonymousAssignFilter;","map":{"version":3,"names":["React","useState","useEffect","PropTypes","styled","Form","Select","useSelector","useAuth","InstantSearchBar","Wrapper","div","AnonymousAssignFilter","props","onChange","searchValue","setSearchValue","unitId","setUnitId","options","setOptions","unitInfo","prefixList","state","medicalTest","isAdmin","map","pr","key","id","text","name","value","filter","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","Group","widths","Field","search","deburr","label","control","e","_ref","propTypes","func","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/medical-test/components/assigns/AnonymousAssignFilter.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { Form, Select } from 'semantic-ui-react';\nimport { useSelector } from 'react-redux';\nimport { useAuth } from 'app/hooks';\n\nimport { InstantSearchBar } from 'app/components/shared';\n\nconst Wrapper = styled.div`\n  padding: 8px;\n`;\nconst AnonymousAssignFilter = (props) => {\n  const { onChange } = props;\n  const [searchValue, setSearchValue] = useState('');\n  const [unitId, setUnitId] = useState('');\n\n  const [options, setOptions] = useState([]);\n  const { unitInfo, prefixList } = useSelector((state) => state.medicalTest);\n\n  const { isAdmin } = useAuth();\n  useEffect(() => {\n    if (isAdmin) {\n      setOptions(\n        prefixList.map((pr) => ({\n          key: pr.id,\n          text: pr.name,\n          value: pr.id,\n        })),\n      );\n    } else {\n      setUnitId(unitInfo?.id);\n      setOptions(\n        prefixList\n          .filter((pr) => pr.id === unitInfo?.id)\n          .map((pr) => ({\n            key: pr.id,\n            text: pr.name,\n            value: pr.id,\n          })),\n      );\n    }\n  }, [prefixList, unitInfo, isAdmin]);\n\n  useEffect(() => {\n    onChange({\n      searchValue,\n      unitId,\n    });\n  }, [onChange, searchValue, unitId]);\n\n  return (\n    <>\n      <InstantSearchBar onChange={setSearchValue}>\n        {!isAdmin && (\n          <Wrapper>\n            <div className=\"ui form\">\n              <Form.Group widths=\"equal\">\n                <Form.Field\n                  search\n                  deburr\n                  label=\"Cơ sở xét nghiệm\"\n                  control={Select}\n                  options={options}\n                  value={unitId}\n                  onChange={(e, { value }) => setUnitId(value)}\n                />\n              </Form.Group>\n            </div>\n          </Wrapper>\n        )}\n      </InstantSearchBar>\n    </>\n  );\n};\n\nAnonymousAssignFilter.propTypes = {\n  onChange: PropTypes.func,\n};\n\nAnonymousAssignFilter.defaultProps = {\n  onChange: () => {},\n};\n\nexport default AnonymousAssignFilter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}