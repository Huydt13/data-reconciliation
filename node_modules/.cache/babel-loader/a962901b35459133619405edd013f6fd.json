{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\app\\\\components\\\\shared\\\\KeyboardDateTimePicker.js\";\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport MomentLocaleUtils, { formatDate, parseDate } from 'react-day-picker/moment';\nimport 'moment/locale/vi';\nimport moment from 'moment';\nimport { Input, Form } from 'semantic-ui-react';\nconst locale = 'vi';\nconst dateFormat = 'DD-MM-YYYY';\nconst months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'];\nconst KeyboardDateTimePicker = props => {\n  const {\n    value,\n    onChange,\n    onError,\n    readOnly,\n    disabledDays,\n    isHavingTime\n  } = props;\n  const [date, setDate] = useState(null);\n  const [time, setTime] = useState('');\n  const [input, setInput] = useState(null);\n  useEffect(() => {\n    if (value) {\n      setDate(new Date(value));\n      if (isHavingTime) {\n        setTime(moment(value).format('HH:mm'));\n      } else {\n        setTime('');\n      }\n    } else {\n      setDate(null);\n      setInput(null);\n      setTime('');\n    }\n\n    // eslint-disable-next-line\n  }, [value]);\n  useEffect(() => {\n    if (date) {\n      onChange(moment(`${moment(date).format('DD-MM-YYYY')} ${time}`, 'DD-MM-YYYY HH:mm').format(), !time);\n    }\n\n    // eslint-disable-next-line\n  }, [date, time]);\n  const handleKeyUp = e => {\n    const inputValue = e.target.value;\n    if (inputValue === '') {\n      setDate(null);\n    }\n    const d = inputValue.replace(/\\D/g, '').slice(0, 10);\n    if (d.length >= 5) {\n      const stringResult = `${d.slice(0, 2)}-${d.slice(2, 4)}-${d.slice(4)}`;\n      setInput(stringResult);\n    } else if (d.length >= 3) {\n      setInput(`${d.slice(0, 2)}-${d.slice(2)}`);\n    } else {\n      setInput(d);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    style: {\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    control: DayPickerInput,\n    value: input || date,\n    format: dateFormat,\n    parseDate: parseDate,\n    formatDate: formatDate,\n    placeholder: dateFormat,\n    onDayChange: d => {\n      if (d === undefined) {\n        onError('InvalidDate');\n      } else {\n        setDate(d || null);\n      }\n    },\n    inputProps: {\n      readOnly,\n      maxLength: 10,\n      onKeyUp: handleKeyUp\n    },\n    dayPickerProps: {\n      months,\n      locale,\n      localeUtils: MomentLocaleUtils,\n      className: readOnly ? 'd-none' : '',\n      modifiers: {\n        disabled: disabledDays\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    control: Input,\n    type: \"time\",\n    value: time,\n    onChange: e => setTime(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  })));\n};\nKeyboardDateTimePicker.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.objectOf(Date)]),\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n  readOnly: PropTypes.bool,\n  isHavingTime: PropTypes.bool,\n  disabledDays: PropTypes.arrayOf(PropTypes.shape({}))\n};\nKeyboardDateTimePicker.defaultProps = {\n  value: moment(),\n  onChange: () => {},\n  onError: () => {},\n  readOnly: false,\n  isHavingTime: false,\n  disabledDays: []\n};\nexport default KeyboardDateTimePicker;","map":{"version":3,"names":["React","useState","useEffect","PropTypes","DayPickerInput","MomentLocaleUtils","formatDate","parseDate","moment","Input","Form","locale","dateFormat","months","KeyboardDateTimePicker","props","value","onChange","onError","readOnly","disabledDays","isHavingTime","date","setDate","time","setTime","input","setInput","Date","format","handleKeyUp","e","inputValue","target","d","replace","slice","length","stringResult","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Group","widths","style","marginBottom","Field","control","placeholder","onDayChange","undefined","inputProps","maxLength","onKeyUp","dayPickerProps","localeUtils","modifiers","disabled","type","propTypes","oneOfType","string","objectOf","func","bool","arrayOf","shape","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/app/components/shared/KeyboardDateTimePicker.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\r\n\r\nimport MomentLocaleUtils, {\r\n  formatDate,\r\n  parseDate,\r\n} from 'react-day-picker/moment';\r\n\r\nimport 'moment/locale/vi';\r\n\r\nimport moment from 'moment';\r\n\r\nimport { Input, Form } from 'semantic-ui-react';\r\n\r\nconst locale = 'vi';\r\n\r\nconst dateFormat = 'DD-MM-YYYY';\r\n\r\nconst months = [\r\n  'Tháng 1',\r\n\r\n  'Tháng 2',\r\n\r\n  'Tháng 3',\r\n\r\n  'Tháng 4',\r\n\r\n  'Tháng 5',\r\n\r\n  'Tháng 6',\r\n\r\n  'Tháng 7',\r\n\r\n  'Tháng 8',\r\n\r\n  'Tháng 9',\r\n\r\n  'Tháng 10',\r\n\r\n  'Tháng 11',\r\n\r\n  'Tháng 12',\r\n];\r\n\r\nconst KeyboardDateTimePicker = (props) => {\r\n  const { value, onChange, onError, readOnly, disabledDays, isHavingTime } =\r\n    props;\r\n\r\n  const [date, setDate] = useState(null);\r\n\r\n  const [time, setTime] = useState('');\r\n\r\n  const [input, setInput] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (value) {\r\n      setDate(new Date(value));\r\n\r\n      if (isHavingTime) {\r\n        setTime(moment(value).format('HH:mm'));\r\n      } else {\r\n        setTime('');\r\n      }\r\n    } else {\r\n      setDate(null);\r\n\r\n      setInput(null);\r\n\r\n      setTime('');\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [value]);\r\n  useEffect(() => {\r\n    if (date) {\r\n      onChange(\r\n        moment(\r\n          `${moment(date).format('DD-MM-YYYY')} ${time}`,\r\n\r\n          'DD-MM-YYYY HH:mm'\r\n        ).format(),\r\n\r\n        !time\r\n      );\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [date, time]);\r\n\r\n  const handleKeyUp = (e) => {\r\n    const inputValue = e.target.value;\r\n\r\n    if (inputValue === '') {\r\n      setDate(null);\r\n    }\r\n\r\n    const d = inputValue.replace(/\\D/g, '').slice(0, 10);\r\n\r\n    if (d.length >= 5) {\r\n      const stringResult = `${d.slice(0, 2)}-${d.slice(2, 4)}-${d.slice(4)}`;\r\n\r\n      setInput(stringResult);\r\n    } else if (d.length >= 3) {\r\n      setInput(`${d.slice(0, 2)}-${d.slice(2)}`);\r\n    } else {\r\n      setInput(d);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='ui form'>\r\n      <Form.Group widths='equal' style={{ marginBottom: 0 }}>\r\n        <Form.Field\r\n          control={DayPickerInput}\r\n          value={input || date}\r\n          format={dateFormat}\r\n          parseDate={parseDate}\r\n          formatDate={formatDate}\r\n          placeholder={dateFormat}\r\n          onDayChange={(d) => {\r\n            if (d === undefined) {\r\n              onError('InvalidDate');\r\n            } else {\r\n              setDate(d || null);\r\n            }\r\n          }}\r\n          inputProps={{\r\n            readOnly,\r\n\r\n            maxLength: 10,\r\n\r\n            onKeyUp: handleKeyUp,\r\n          }}\r\n          dayPickerProps={{\r\n            months,\r\n\r\n            locale,\r\n\r\n            localeUtils: MomentLocaleUtils,\r\n\r\n            className: readOnly ? 'd-none' : '',\r\n\r\n            modifiers: {\r\n              disabled: disabledDays,\r\n            },\r\n          }}\r\n        />\r\n\r\n        <Form.Field\r\n          control={Input}\r\n          type='time'\r\n          value={time}\r\n          onChange={(e) => setTime(e.target.value)}\r\n        />\r\n      </Form.Group>\r\n    </div>\r\n  );\r\n};\r\n\r\nKeyboardDateTimePicker.propTypes = {\r\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.objectOf(Date)]),\r\n\r\n  onChange: PropTypes.func,\r\n\r\n  onError: PropTypes.func,\r\n\r\n  readOnly: PropTypes.bool,\r\n\r\n  isHavingTime: PropTypes.bool,\r\n\r\n  disabledDays: PropTypes.arrayOf(PropTypes.shape({})),\r\n};\r\n\r\nKeyboardDateTimePicker.defaultProps = {\r\n  value: moment(),\r\n\r\n  onChange: () => {},\r\n\r\n  onError: () => {},\r\n\r\n  readOnly: false,\r\n\r\n  isHavingTime: false,\r\n\r\n  disabledDays: [],\r\n};\r\n\r\nexport default KeyboardDateTimePicker;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAElD,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAOC,cAAc,MAAM,iCAAiC;AAE5D,OAAOC,iBAAiB,IACtBC,UAAU,EACVC,SAAS,QACJ,yBAAyB;AAEhC,OAAO,kBAAkB;AAEzB,OAAOC,MAAM,MAAM,QAAQ;AAE3B,SAASC,KAAK,EAAEC,IAAI,QAAQ,mBAAmB;AAE/C,MAAMC,MAAM,GAAG,IAAI;AAEnB,MAAMC,UAAU,GAAG,YAAY;AAE/B,MAAMC,MAAM,GAAG,CACb,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,SAAS,EAET,UAAU,EAEV,UAAU,EAEV,UAAU,CACX;AAED,MAAMC,sBAAsB,GAAIC,KAAK,IAAK;EACxC,MAAM;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,OAAO;IAAEC,QAAQ;IAAEC,YAAY;IAAEC;EAAa,CAAC,GACtEN,KAAK;EAEP,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAEtC,MAAM,CAACuB,IAAI,EAAEC,OAAO,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAEpC,MAAM,CAACyB,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,IAAIc,KAAK,EAAE;MACTO,OAAO,CAAC,IAAIK,IAAI,CAACZ,KAAK,CAAC,CAAC;MAExB,IAAIK,YAAY,EAAE;QAChBI,OAAO,CAACjB,MAAM,CAACQ,KAAK,CAAC,CAACa,MAAM,CAAC,OAAO,CAAC,CAAC;MACxC,CAAC,MAAM;QACLJ,OAAO,CAAC,EAAE,CAAC;MACb;IACF,CAAC,MAAM;MACLF,OAAO,CAAC,IAAI,CAAC;MAEbI,QAAQ,CAAC,IAAI,CAAC;MAEdF,OAAO,CAAC,EAAE,CAAC;IACb;;IAEA;EACF,CAAC,EAAE,CAACT,KAAK,CAAC,CAAC;EACXd,SAAS,CAAC,MAAM;IACd,IAAIoB,IAAI,EAAE;MACRL,QAAQ,CACNT,MAAM,CACH,GAAEA,MAAM,CAACc,IAAI,CAAC,CAACO,MAAM,CAAC,YAAY,CAAE,IAAGL,IAAK,EAAC,EAE9C,kBAAkB,CACnB,CAACK,MAAM,EAAE,EAEV,CAACL,IAAI,CACN;IACH;;IAEA;EACF,CAAC,EAAE,CAACF,IAAI,EAAEE,IAAI,CAAC,CAAC;EAEhB,MAAMM,WAAW,GAAIC,CAAC,IAAK;IACzB,MAAMC,UAAU,GAAGD,CAAC,CAACE,MAAM,CAACjB,KAAK;IAEjC,IAAIgB,UAAU,KAAK,EAAE,EAAE;MACrBT,OAAO,CAAC,IAAI,CAAC;IACf;IAEA,MAAMW,CAAC,GAAGF,UAAU,CAACG,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IAEpD,IAAIF,CAAC,CAACG,MAAM,IAAI,CAAC,EAAE;MACjB,MAAMC,YAAY,GAAI,GAAEJ,CAAC,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAE,IAAGF,CAAC,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAE,IAAGF,CAAC,CAACE,KAAK,CAAC,CAAC,CAAE,EAAC;MAEtET,QAAQ,CAACW,YAAY,CAAC;IACxB,CAAC,MAAM,IAAIJ,CAAC,CAACG,MAAM,IAAI,CAAC,EAAE;MACxBV,QAAQ,CAAE,GAAEO,CAAC,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAE,IAAGF,CAAC,CAACE,KAAK,CAAC,CAAC,CAAE,EAAC,CAAC;IAC5C,CAAC,MAAM;MACLT,QAAQ,CAACO,CAAC,CAAC;IACb;EACF,CAAC;EAED,oBACElC,KAAA,CAAAuC,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACtB9C,KAAA,CAAAuC,aAAA,CAAC7B,IAAI,CAACqC,KAAK;IAACC,MAAM,EAAC,OAAO;IAACC,KAAK,EAAE;MAAEC,YAAY,EAAE;IAAE,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpD9C,KAAA,CAAAuC,aAAA,CAAC7B,IAAI,CAACyC,KAAK;IACTC,OAAO,EAAEhD,cAAe;IACxBY,KAAK,EAAEU,KAAK,IAAIJ,IAAK;IACrBO,MAAM,EAAEjB,UAAW;IACnBL,SAAS,EAAEA,SAAU;IACrBD,UAAU,EAAEA,UAAW;IACvB+C,WAAW,EAAEzC,UAAW;IACxB0C,WAAW,EAAGpB,CAAC,IAAK;MAClB,IAAIA,CAAC,KAAKqB,SAAS,EAAE;QACnBrC,OAAO,CAAC,aAAa,CAAC;MACxB,CAAC,MAAM;QACLK,OAAO,CAACW,CAAC,IAAI,IAAI,CAAC;MACpB;IACF,CAAE;IACFsB,UAAU,EAAE;MACVrC,QAAQ;MAERsC,SAAS,EAAE,EAAE;MAEbC,OAAO,EAAE5B;IACX,CAAE;IACF6B,cAAc,EAAE;MACd9C,MAAM;MAENF,MAAM;MAENiD,WAAW,EAAEvD,iBAAiB;MAE9BmC,SAAS,EAAErB,QAAQ,GAAG,QAAQ,GAAG,EAAE;MAEnC0C,SAAS,EAAE;QACTC,QAAQ,EAAE1C;MACZ;IACF,CAAE;IAAAqB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACF,eAEF9C,KAAA,CAAAuC,aAAA,CAAC7B,IAAI,CAACyC,KAAK;IACTC,OAAO,EAAE3C,KAAM;IACfsD,IAAI,EAAC,MAAM;IACX/C,KAAK,EAAEQ,IAAK;IACZP,QAAQ,EAAGc,CAAC,IAAKN,OAAO,CAACM,CAAC,CAACE,MAAM,CAACjB,KAAK,CAAE;IAAAyB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACzC,CACS,CACT;AAEV,CAAC;AAEDhC,sBAAsB,CAACkD,SAAS,GAAG;EACjChD,KAAK,EAAEb,SAAS,CAAC8D,SAAS,CAAC,CAAC9D,SAAS,CAAC+D,MAAM,EAAE/D,SAAS,CAACgE,QAAQ,CAACvC,IAAI,CAAC,CAAC,CAAC;EAExEX,QAAQ,EAAEd,SAAS,CAACiE,IAAI;EAExBlD,OAAO,EAAEf,SAAS,CAACiE,IAAI;EAEvBjD,QAAQ,EAAEhB,SAAS,CAACkE,IAAI;EAExBhD,YAAY,EAAElB,SAAS,CAACkE,IAAI;EAE5BjD,YAAY,EAAEjB,SAAS,CAACmE,OAAO,CAACnE,SAAS,CAACoE,KAAK,CAAC,CAAC,CAAC,CAAC;AACrD,CAAC;AAEDzD,sBAAsB,CAAC0D,YAAY,GAAG;EACpCxD,KAAK,EAAER,MAAM,EAAE;EAEfS,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAC;EAElBC,OAAO,EAAEA,CAAA,KAAM,CAAC,CAAC;EAEjBC,QAAQ,EAAE,KAAK;EAEfE,YAAY,EAAE,KAAK;EAEnBD,YAAY,EAAE;AAChB,CAAC;AAED,eAAeN,sBAAsB"},"metadata":{},"sourceType":"module"}