{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\treatment\\\\components\\\\transfer\\\\TransferTable.js\";\n/* eslint-disable react/prop-types */\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { DataTable } from 'app/components/shared';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getFacilities, getFacilityInfo, getTransfer } from 'treatment/actions/facility';\nimport { useAuth } from 'app/hooks';\nimport { checkFilter, formatAddressToString, formatToTime, formatToYear, renderGender } from 'app/utils/helpers';\nimport TransferFilter from './TransferFilter';\nconst columns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: _ref => {\n    let {\n      profile\n    } = _ref;\n    return profile.fullName;\n  },\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref2 => {\n    let {\n      profile\n    } = _ref2;\n    return formatToYear(profile.dateOfBirth);\n  }\n}, {\n  Header: 'Giới tính',\n  formatter: _ref3 => {\n    let {\n      profile\n    } = _ref3;\n    return renderGender(profile);\n  }\n}, {\n  Header: 'Số điện thoại',\n  formatter: _ref4 => {\n    let {\n      profile\n    } = _ref4;\n    return profile.phoneNumber;\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: _ref5 => {\n    let {\n      profile\n    } = _ref5;\n    return formatAddressToString(profile.addressesInVietnam[0] || {});\n  }\n}, {\n  Header: 'Thời gian điều trị',\n  formatter: _ref6 => {\n    let {\n      approveDate,\n      expectedEndDate\n    } = _ref6;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, `Thời gian bắt đầu: ${formatToTime(approveDate)}`), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, \"Th\\u1EDDi gian d\\u1EF1 ki\\u1EBFn ho\\xE0n th\\xE0nh:\", `${formatToTime(expectedEndDate)}`));\n  }\n}, {\n  Header: 'Thông tin chuyển khu',\n  formatter: _ref7 => {\n    let {\n      actualEndDate,\n      completeNote\n    } = _ref7;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, `Ghi chú: ${completeNote}`), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, `Thời gian chuyển khu: ${formatToTime(actualEndDate)}`));\n  }\n}];\nconst TransferTable = () => {\n  const dispatch = useDispatch();\n  const [filter, setFilter] = useState({});\n  const [pageSize, setPageSize] = useState(10);\n  const [pageIndex, setPageIndex] = useState(0);\n  const facilityInfo = useSelector(s => s.treatment.facility.facilityInfo);\n  const getFacilityInfoLoading = useSelector(s => s.treatment.facility.getFacilityInfoLoading);\n  const {\n    data,\n    pageCount\n  } = useSelector(s => s.treatment.facility.transferData);\n  const getDataLoading = useSelector(s => s.treatment.facility.getTransferLoading);\n  const {\n    isHcdcDtr\n  } = useAuth();\n  useEffect(() => {\n    if (isHcdcDtr) {\n      dispatch(getFacilities({\n        pageSize: 1000,\n        pageIndex: 0\n      }));\n    } else if (!facilityInfo) {\n      dispatch(getFacilityInfo());\n    }\n  }, [dispatch, isHcdcDtr, facilityInfo]);\n  const getData = useCallback(() => {\n    dispatch(getTransfer({\n      ...filter,\n      pageSize,\n      pageIndex\n    }));\n  }, [dispatch, filter, pageIndex, pageSize]);\n  useEffect(getData, [getData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TransferFilter, {\n    onChange: d => checkFilter(filter, d) && setFilter(d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    title: \"Danh s\\xE1ch chuy\\u1EC3n khu\",\n    columns: columns,\n    data: data.map((d, i) => ({\n      ...d,\n      index: i + 1\n    })),\n    actions: [],\n    loading: getFacilityInfoLoading || getDataLoading,\n    pageCount: pageCount,\n    onPaginationChange: _ref8 => {\n      let {\n        pageSize: ps,\n        pageIndex: pi\n      } = _ref8;\n      setPageSize(ps);\n      setPageIndex(pi);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }));\n};\nexport default TransferTable;","map":{"version":3,"names":["React","useCallback","useEffect","useState","DataTable","useDispatch","useSelector","getFacilities","getFacilityInfo","getTransfer","useAuth","checkFilter","formatAddressToString","formatToTime","formatToYear","renderGender","TransferFilter","columns","Header","accessor","formatter","_ref","profile","fullName","cutlength","_ref2","dateOfBirth","_ref3","_ref4","phoneNumber","_ref5","addressesInVietnam","_ref6","approveDate","expectedEndDate","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_ref7","actualEndDate","completeNote","TransferTable","dispatch","filter","setFilter","pageSize","setPageSize","pageIndex","setPageIndex","facilityInfo","s","treatment","facility","getFacilityInfoLoading","data","pageCount","transferData","getDataLoading","getTransferLoading","isHcdcDtr","getData","onChange","d","title","map","i","index","actions","loading","onPaginationChange","_ref8","ps","pi"],"sources":["H:/BAKCO/pj/data reconciliation/src/treatment/components/transfer/TransferTable.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { DataTable } from 'app/components/shared';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getFacilities,\n  getFacilityInfo,\n  getTransfer,\n} from 'treatment/actions/facility';\n\nimport { useAuth } from 'app/hooks';\nimport {\n  checkFilter,\n  formatAddressToString,\n  formatToTime,\n  formatToYear,\n  renderGender,\n} from 'app/utils/helpers';\n\nimport TransferFilter from './TransferFilter';\n\nconst columns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  {\n    Header: 'Họ và tên',\n    formatter: ({ profile }) => profile.fullName,\n    cutlength: 50,\n  },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ profile }) => formatToYear(profile.dateOfBirth),\n  },\n  {\n    Header: 'Giới tính',\n    formatter: ({ profile }) => renderGender(profile),\n  },\n  {\n    Header: 'Số điện thoại',\n    formatter: ({ profile }) => profile.phoneNumber,\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: ({ profile }) =>\n      formatAddressToString(profile.addressesInVietnam[0] || {}),\n  },\n  {\n    Header: 'Thời gian điều trị',\n    formatter: ({ approveDate, expectedEndDate }) => (\n      <div>\n        <span>{`Thời gian bắt đầu: ${formatToTime(approveDate)}`}</span>\n        <br />\n        <span>\n          Thời gian dự kiến hoàn thành:\n          {`${formatToTime(expectedEndDate)}`}\n        </span>\n      </div>\n    ),\n  },\n  {\n    Header: 'Thông tin chuyển khu',\n    formatter: ({ actualEndDate, completeNote }) => (\n      <div>\n        <span>{`Ghi chú: ${completeNote}`}</span>\n        <br />\n        <span>{`Thời gian chuyển khu: ${formatToTime(actualEndDate)}`}</span>\n      </div>\n    ),\n  },\n];\n\nconst TransferTable = () => {\n  const dispatch = useDispatch();\n\n  const [filter, setFilter] = useState({});\n  const [pageSize, setPageSize] = useState(10);\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const facilityInfo = useSelector((s) => s.treatment.facility.facilityInfo);\n  const getFacilityInfoLoading = useSelector(\n    (s) => s.treatment.facility.getFacilityInfoLoading,\n  );\n\n  const { data, pageCount } = useSelector(\n    (s) => s.treatment.facility.transferData,\n  );\n  const getDataLoading = useSelector(\n    (s) => s.treatment.facility.getTransferLoading,\n  );\n\n  const { isHcdcDtr } = useAuth();\n  useEffect(() => {\n    if (isHcdcDtr) {\n      dispatch(getFacilities({ pageSize: 1000, pageIndex: 0 }));\n    } else if (!facilityInfo) {\n      dispatch(getFacilityInfo());\n    }\n  }, [dispatch, isHcdcDtr, facilityInfo]);\n\n  const getData = useCallback(() => {\n    dispatch(\n      getTransfer({\n        ...filter,\n        pageSize,\n        pageIndex,\n      }),\n    );\n  }, [dispatch, filter, pageIndex, pageSize]);\n\n  useEffect(getData, [getData]);\n\n  return (\n    <div>\n      <TransferFilter\n        onChange={(d) => checkFilter(filter, d) && setFilter(d)}\n      />\n      <DataTable\n        title=\"Danh sách chuyển khu\"\n        columns={columns}\n        data={data.map((d, i) => ({ ...d, index: i + 1 }))}\n        actions={[]}\n        loading={getFacilityInfoLoading || getDataLoading}\n        pageCount={pageCount}\n        onPaginationChange={({ pageSize: ps, pageIndex: pi }) => {\n          setPageSize(ps);\n          setPageIndex(pi);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default TransferTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}