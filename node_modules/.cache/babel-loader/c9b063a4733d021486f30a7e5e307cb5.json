{"ast":null,"code":"import types, { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, SET_TOKEN, SET_PERMISSIONS, GET_PERMISSION_REQUEST, GET_PERMISSION_SUCCESS, GET_PERMISSION_FAILURE, GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAILURE, LOG_OUT } from 'app/actions/types';\nconst INITIAL_STATE = {\n  token: null,\n  tokenExpiredTime: null,\n  loginLoading: false,\n  userInfo: null,\n  getUserInfoLoading: false,\n  getPermissionLoading: false,\n  permissionList: [],\n  changePasswordLoading: false\n};\nexport default function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case LOG_IN_REQUEST:\n      return {\n        ...state,\n        loginLoading: true\n      };\n    case LOG_IN_SUCCESS:\n      {\n        const token = action.payload;\n        return {\n          ...state,\n          token,\n          tokenExpiredTime: new Date(new Date().getTime() + token.expires_in * 1000),\n          loginLoading: false\n        };\n      }\n    case LOG_IN_FAILURE:\n      return {\n        ...state,\n        loginLoading: false\n      };\n    case SET_TOKEN:\n      return {\n        ...state,\n        token: action.payload.token,\n        tokenExpiredTime: action.payload.tokenExpiredTime,\n        userInfo: action.payload.userInfo\n      };\n    case SET_PERMISSIONS:\n      return {\n        ...state,\n        permissionList: action.payload\n      };\n    case types.AUTH_CHANGE_PASSWORD_REQUEST:\n      return {\n        ...state,\n        changePasswordLoading: true\n      };\n    case types.AUTH_CHANGE_PASSWORD_SUCCESS:\n    case types.AUTH_CHANGE_PASSWORD_FAILURE:\n      return {\n        ...state,\n        changePasswordLoading: false\n      };\n    case GET_USER_INFO_REQUEST:\n      return {\n        ...state,\n        getUserInfoLoading: true\n      };\n    case GET_USER_INFO_SUCCESS:\n      return {\n        ...state,\n        userInfo: action.payload,\n        getUserInfoLoading: false\n      };\n    case GET_USER_INFO_FAILURE:\n      return {\n        ...state,\n        getUserInfoLoading: false\n      };\n    case GET_PERMISSION_REQUEST:\n      return {\n        ...state,\n        getPermissionLoading: true\n      };\n    case GET_PERMISSION_SUCCESS:\n      return {\n        ...state,\n        permissionList: action.payload,\n        getPermissionLoading: false\n      };\n    case GET_PERMISSION_FAILURE:\n      return {\n        ...state,\n        getPermissionLoading: false\n      };\n    case LOG_OUT:\n      return {\n        ...state,\n        token: null,\n        tokenExpiredTime: null,\n        userInfo: null\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["types","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILURE","SET_TOKEN","SET_PERMISSIONS","GET_PERMISSION_REQUEST","GET_PERMISSION_SUCCESS","GET_PERMISSION_FAILURE","GET_USER_INFO_REQUEST","GET_USER_INFO_SUCCESS","GET_USER_INFO_FAILURE","LOG_OUT","INITIAL_STATE","token","tokenExpiredTime","loginLoading","userInfo","getUserInfoLoading","getPermissionLoading","permissionList","changePasswordLoading","state","arguments","length","undefined","action","type","payload","Date","getTime","expires_in","AUTH_CHANGE_PASSWORD_REQUEST","AUTH_CHANGE_PASSWORD_SUCCESS","AUTH_CHANGE_PASSWORD_FAILURE"],"sources":["H:/BAKCO/pj/cds/src/app/reducers/auth.js"],"sourcesContent":["import types, {\n  LOG_IN_REQUEST,\n  LOG_IN_SUCCESS,\n  LOG_IN_FAILURE,\n  SET_TOKEN,\n  SET_PERMISSIONS,\n  GET_PERMISSION_REQUEST,\n  GET_PERMISSION_SUCCESS,\n  GET_PERMISSION_FAILURE,\n  GET_USER_INFO_REQUEST,\n  GET_USER_INFO_SUCCESS,\n  GET_USER_INFO_FAILURE,\n  LOG_OUT,\n} from 'app/actions/types';\n\nconst INITIAL_STATE = {\n  token: null,\n  tokenExpiredTime: null,\n  loginLoading: false,\n  userInfo: null,\n  getUserInfoLoading: false,\n  getPermissionLoading: false,\n  permissionList: [],\n  changePasswordLoading: false,\n};\n\nexport default function (state = INITIAL_STATE, action) {\n  switch (action.type) {\n    case LOG_IN_REQUEST:\n      return {\n        ...state,\n        loginLoading: true,\n      };\n    case LOG_IN_SUCCESS: {\n      const token = action.payload;\n      return {\n        ...state,\n        token,\n        tokenExpiredTime: new Date(\n          new Date().getTime() + token.expires_in * 1000,\n        ),\n        loginLoading: false,\n      };\n    }\n    case LOG_IN_FAILURE:\n      return {\n        ...state,\n        loginLoading: false,\n      };\n    case SET_TOKEN:\n      return {\n        ...state,\n        token: action.payload.token,\n        tokenExpiredTime: action.payload.tokenExpiredTime,\n        userInfo: action.payload.userInfo,\n      };\n    case SET_PERMISSIONS:\n      return {\n        ...state,\n        permissionList: action.payload,\n      };\n    case types.AUTH_CHANGE_PASSWORD_REQUEST:\n      return {\n        ...state,\n        changePasswordLoading: true,\n      };\n    case types.AUTH_CHANGE_PASSWORD_SUCCESS:\n    case types.AUTH_CHANGE_PASSWORD_FAILURE:\n      return {\n        ...state,\n        changePasswordLoading: false,\n      };\n    case GET_USER_INFO_REQUEST:\n      return {\n        ...state,\n        getUserInfoLoading: true,\n      };\n    case GET_USER_INFO_SUCCESS:\n      return {\n        ...state,\n        userInfo: action.payload,\n        getUserInfoLoading: false,\n      };\n    case GET_USER_INFO_FAILURE:\n      return {\n        ...state,\n        getUserInfoLoading: false,\n      };\n    case GET_PERMISSION_REQUEST:\n      return {\n        ...state,\n        getPermissionLoading: true,\n      };\n    case GET_PERMISSION_SUCCESS:\n      return {\n        ...state,\n        permissionList: action.payload,\n        getPermissionLoading: false,\n      };\n    case GET_PERMISSION_FAILURE:\n      return {\n        ...state,\n        getPermissionLoading: false,\n      };\n    case LOG_OUT:\n      return {\n        ...state,\n        token: null,\n        tokenExpiredTime: null,\n        userInfo: null,\n      };\n    default:\n      return state;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}