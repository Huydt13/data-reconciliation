{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\quarantine\\\\components\\\\room\\\\QuarantineRoomTable.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FiTrash2, FiPlus, FiArrowLeft, FiUsers } from 'react-icons/fi';\nimport { Breadcrumb, Header } from 'semantic-ui-react';\nimport { InstantSearchBar, DataTable } from 'app/components/shared';\nimport { filterArray } from 'app/utils/helpers';\nimport { showConfirmModal } from 'app/actions/global';\nimport { getRooms, deleteRoom, createRoom, openZoneDetail, openRoomDetail, selectRoom } from '../../actions/quarantine';\nimport CreateRoomModal from './CreateQuarantineRoomModal';\nconst columns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Tên phòng',\n  accessor: 'name'\n}, {\n  Header: 'Số giường trong phòng',\n  accessor: 'numberOfBed'\n}, {\n  Header: 'Số người hiện hành',\n  accessor: 'numberOfSubject'\n}];\nconst IconWrapper = styled.div`\n  position: relative;\n  width: 26px;\n  height: 26px;\n`;\nconst AbsoulateIcon = styled(FiArrowLeft)`\n  position: absolute;\n  top: 75%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 24px;\n  height: 24px;\n`;\nconst RoomTable = () => {\n  const dispatch = useDispatch();\n  const [searchRoomValue, setSearchRoomValue] = useState('');\n  const [openCreateModal, setOpenCreateModal] = useState(false);\n  const {\n    roomList,\n    selectedZone,\n    getRoomsLoading,\n    createRoomLoading,\n    updateRoomLoading,\n    deleteRoomLoading\n  } = useSelector(state => state.quarantine);\n  const handleRefresh = useCallback(() => {\n    dispatch(getRooms(selectedZone.id));\n  }, [dispatch, selectedZone]);\n  useEffect(() => {\n    handleRefresh();\n  }, [handleRefresh]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InstantSearchBar, {\n    onChange: value => setSearchRoomValue(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    title: /*#__PURE__*/React.createElement(Breadcrumb, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Breadcrumb.Section, {\n      link: true,\n      onClick: () => dispatch(openZoneDetail(false)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IconWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AbsoulateIcon, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(Breadcrumb.Section, {\n      active: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, `Danh sách phòng tại ${selectedZone.name}`))),\n    columns: columns,\n    data: filterArray(roomList, searchRoomValue).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: getRoomsLoading || updateRoomLoading || deleteRoomLoading,\n    actions: [{\n      icon: /*#__PURE__*/React.createElement(FiPlus, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 19\n        }\n      }),\n      title: 'Thêm',\n      color: 'green',\n      onClick: () => setOpenCreateModal(true),\n      globalAction: true\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiUsers, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }\n      }),\n      title: 'Danh sách đối tượng',\n      color: 'blue',\n      onClick: row => {\n        dispatch(selectRoom(row));\n        dispatch(openZoneDetail(false));\n        dispatch(openRoomDetail(true));\n      }\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiTrash2, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 19\n        }\n      }),\n      title: 'Xóa',\n      color: 'red',\n      onClick: row => dispatch(showConfirmModal('Xác nhận xóa phòng của khu vực này?', async () => {\n        await dispatch(deleteRoom(selectedZone.id, row.id));\n        handleRefresh();\n      }))\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CreateRoomModal, {\n    key: openCreateModal ? 'CreateRoomModalOpen' : 'CreateRoomModalClose',\n    open: openCreateModal,\n    loading: createRoomLoading,\n    onCreate: data => {\n      setOpenCreateModal(false);\n      dispatch(createRoom(selectedZone.id, data)).then(() => handleRefresh());\n    },\n    onClose: () => setOpenCreateModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }));\n};\nexport default RoomTable;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","useSelector","useDispatch","FiTrash2","FiPlus","FiArrowLeft","FiUsers","Breadcrumb","Header","InstantSearchBar","DataTable","filterArray","showConfirmModal","getRooms","deleteRoom","createRoom","openZoneDetail","openRoomDetail","selectRoom","CreateRoomModal","columns","accessor","IconWrapper","div","AbsoulateIcon","RoomTable","dispatch","searchRoomValue","setSearchRoomValue","openCreateModal","setOpenCreateModal","roomList","selectedZone","getRoomsLoading","createRoomLoading","updateRoomLoading","deleteRoomLoading","state","quarantine","handleRefresh","id","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onChange","value","title","Section","link","onClick","size","active","as","name","data","map","r","i","index","loading","actions","icon","color","globalAction","row","key","open","onCreate","then","onClose"],"sources":["H:/BAKCO/pj/data reconciliation/src/quarantine/components/room/QuarantineRoomTable.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FiTrash2, FiPlus, FiArrowLeft, FiUsers } from 'react-icons/fi';\nimport { Breadcrumb, Header } from 'semantic-ui-react';\n\nimport { InstantSearchBar, DataTable } from 'app/components/shared';\nimport { filterArray } from 'app/utils/helpers';\nimport { showConfirmModal } from 'app/actions/global';\n\nimport {\n  getRooms,\n  deleteRoom,\n  createRoom,\n  openZoneDetail,\n  openRoomDetail,\n  selectRoom,\n} from '../../actions/quarantine';\nimport CreateRoomModal from './CreateQuarantineRoomModal';\n\nconst columns = [\n  { Header: '#', accessor: 'index' },\n  { Header: 'Tên phòng', accessor: 'name' },\n  { Header: 'Số giường trong phòng', accessor: 'numberOfBed' },\n  { Header: 'Số người hiện hành', accessor: 'numberOfSubject' },\n];\n\nconst IconWrapper = styled.div`\n  position: relative;\n  width: 26px;\n  height: 26px;\n`;\n\nconst AbsoulateIcon = styled(FiArrowLeft)`\n  position: absolute;\n  top: 75%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 24px;\n  height: 24px;\n`;\n\nconst RoomTable = () => {\n  const dispatch = useDispatch();\n  const [searchRoomValue, setSearchRoomValue] = useState('');\n  const [openCreateModal, setOpenCreateModal] = useState(false);\n  const {\n    roomList,\n    selectedZone,\n    getRoomsLoading,\n    createRoomLoading,\n    updateRoomLoading,\n    deleteRoomLoading,\n  } = useSelector((state) => state.quarantine);\n\n  const handleRefresh = useCallback(() => {\n    dispatch(getRooms(selectedZone.id));\n  }, [dispatch, selectedZone]);\n\n  useEffect(() => {\n    handleRefresh();\n  }, [handleRefresh]);\n\n  return (\n    <div>\n      <InstantSearchBar onChange={(value) => setSearchRoomValue(value)} />\n      <DataTable\n        title={\n          <Breadcrumb>\n            <Breadcrumb.Section\n              link\n              onClick={() => dispatch(openZoneDetail(false))}\n            >\n              <IconWrapper>\n                <AbsoulateIcon size={24} />\n              </IconWrapper>\n            </Breadcrumb.Section>\n            <Breadcrumb.Section active>\n              <Header as=\"h3\">{`Danh sách phòng tại ${selectedZone.name}`}</Header>\n            </Breadcrumb.Section>\n          </Breadcrumb>\n        }\n        columns={columns}\n        data={filterArray(roomList, searchRoomValue).map((r, i) => ({\n          ...r,\n          index: i + 1,\n        }))}\n        loading={getRoomsLoading || updateRoomLoading || deleteRoomLoading}\n        actions={[\n          {\n            icon: <FiPlus />,\n            title: 'Thêm',\n            color: 'green',\n            onClick: () => setOpenCreateModal(true),\n            globalAction: true,\n          },\n          {\n            icon: <FiUsers />,\n            title: 'Danh sách đối tượng',\n            color: 'blue',\n            onClick: (row) => {\n              dispatch(selectRoom(row));\n              dispatch(openZoneDetail(false));\n              dispatch(openRoomDetail(true));\n            },\n          },\n          {\n            icon: <FiTrash2 />,\n            title: 'Xóa',\n            color: 'red',\n            onClick: (row) =>\n              dispatch(\n                showConfirmModal(\n                  'Xác nhận xóa phòng của khu vực này?',\n                  async () => {\n                    await dispatch(deleteRoom(selectedZone.id, row.id));\n                    handleRefresh();\n                  },\n                ),\n              ),\n          },\n        ]}\n      />\n      <CreateRoomModal\n        key={openCreateModal ? 'CreateRoomModalOpen' : 'CreateRoomModalClose'}\n        open={openCreateModal}\n        loading={createRoomLoading}\n        onCreate={(data) => {\n          setOpenCreateModal(false);\n          dispatch(createRoom(selectedZone.id, data)).then(() =>\n            handleRefresh(),\n          );\n        }}\n        onClose={() => setOpenCreateModal(false)}\n      />\n    </div>\n  );\n};\n\nexport default RoomTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}