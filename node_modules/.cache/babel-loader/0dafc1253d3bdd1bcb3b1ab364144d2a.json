{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\treatment\\\\components\\\\shared\\\\ReadyForTreatmentTable.js\";\n/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\nimport { getProfilesWithouDispatch } from 'profile/actions/profile';\nimport { DataTable } from 'app/components/shared';\nimport { formatToYear, renderGender, renderProfileKey } from 'app/utils/helpers';\nimport ReadyForTreatmentFilter from './ReadyForTreatmentFilter';\nconst shrinkColumn = [{\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 20\n}];\nconst expandColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref => {\n    let {\n      dateOfBirth\n    } = _ref;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Giới tính',\n  formatter: renderGender\n}, {\n  Header: 'Số điện thoại',\n  formatter: _ref2 => {\n    let {\n      phoneNumber\n    } = _ref2;\n    return phoneNumber;\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey\n}];\nconst normalColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref3 => {\n    let {\n      dateOfBirth\n    } = _ref3;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey,\n  cutlength: 20\n}];\nconst ProfileTableSearchSection = _ref4 => {\n  let {\n    isShrink,\n    isNormal,\n    isCloseFilter,\n    selectingList,\n    onChange\n  } = _ref4;\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n  const rowActions = useMemo(() => [{\n    icon: /*#__PURE__*/React.createElement(FiArrowRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }),\n    title: 'Chọn',\n    color: 'green',\n    onClick: onChange,\n    hidden: r => selectingList.map(s => s.id).includes(r.id)\n  }], [selectingList, onChange]);\n  useEffect(() => {\n    setFetching(true);\n    getProfilesWithouDispatch({\n      ...filter,\n      hasGroupProfile: false,\n      pageSize,\n      pageIndex\n    }).then(_ref5 => {\n      let {\n        data: dataRes,\n        totalPages\n      } = _ref5;\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageSize, pageIndex]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    as: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \"Danh s\\xE1ch h\\u1ED3 s\\u01A1 s\\u1EB5n s\\xE0ng \\u0111i\\u1EC1u tr\\u1ECB\"), /*#__PURE__*/React.createElement(ReadyForTreatmentFilter, {\n    isCloseFilter: isCloseFilter,\n    onChange: setFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    noPaging: isShrink || isNormal,\n    columns: isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns,\n    data: (data || []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: fetching,\n    pageCount: pageCount,\n    onPaginationChange: p => {\n      setPageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: isShrink ? [] : rowActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }));\n};\nProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool\n};\nProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false\n};\nexport default ProfileTableSearchSection;","map":{"version":3,"names":["React","useEffect","useMemo","useState","PropTypes","FiArrowRight","Header","getProfilesWithouDispatch","DataTable","formatToYear","renderGender","renderProfileKey","ReadyForTreatmentFilter","shrinkColumn","formatter","r","fullName","cutlength","expandColumns","accessor","_ref","dateOfBirth","_ref2","phoneNumber","normalColumns","_ref3","ProfileTableSearchSection","_ref4","isShrink","isNormal","isCloseFilter","selectingList","onChange","data","setData","pageCount","setPageCount","fetching","setFetching","pageIndex","setPageIndex","pageSize","setPageSize","filter","setFilter","rowActions","icon","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","color","onClick","hidden","map","s","id","includes","hasGroupProfile","then","_ref5","dataRes","totalPages","Fragment","as","noPaging","columns","i","index","loading","onPaginationChange","p","actions","propTypes","arrayOf","shape","func","isRequired","bool","defaultProps"],"sources":["H:/BAKCO/pj/data reconciliation/src/treatment/components/shared/ReadyForTreatmentTable.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\n\nimport { getProfilesWithouDispatch } from 'profile/actions/profile';\n\nimport { DataTable } from 'app/components/shared';\nimport {\n  formatToYear,\n  renderGender,\n  renderProfileKey,\n} from 'app/utils/helpers';\nimport ReadyForTreatmentFilter from './ReadyForTreatmentFilter';\n\nconst shrinkColumn = [\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 20 },\n];\nconst expandColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 50 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Giới tính',\n    formatter: renderGender,\n  },\n  {\n    Header: 'Số điện thoại',\n    formatter: ({ phoneNumber }) => phoneNumber,\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n  },\n];\nconst normalColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 50 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n    cutlength: 20,\n  },\n];\n\nconst ProfileTableSearchSection = ({\n  isShrink,\n  isNormal,\n  isCloseFilter,\n  selectingList,\n  onChange,\n}) => {\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n\n  const rowActions = useMemo(\n    () => [\n      {\n        icon: <FiArrowRight />,\n        title: 'Chọn',\n        color: 'green',\n        onClick: onChange,\n        hidden: (r) => selectingList.map((s) => s.id).includes(r.id),\n      },\n    ],\n    [selectingList, onChange],\n  );\n  useEffect(() => {\n    setFetching(true);\n    getProfilesWithouDispatch({\n      ...filter,\n      hasGroupProfile: false,\n      pageSize,\n      pageIndex,\n    }).then(({ data: dataRes, totalPages }) => {\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageSize, pageIndex]);\n  return (\n    <>\n      <Header as=\"h3\">Danh sách hồ sơ sẵn sàng điều trị</Header>\n      <ReadyForTreatmentFilter\n        isCloseFilter={isCloseFilter}\n        onChange={setFilter}\n      />\n      <DataTable\n        noPaging={isShrink || isNormal}\n        columns={\n          isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns\n        }\n        data={(data || []).map((r, i) => ({ ...r, index: i + 1 }))}\n        loading={fetching}\n        pageCount={pageCount}\n        onPaginationChange={(p) => {\n          setPageIndex(p.pageIndex);\n          setPageSize(p.pageSize);\n        }}\n        actions={isShrink ? [] : rowActions}\n      />\n    </>\n  );\n};\n\nProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool,\n};\n\nProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false,\n};\n\nexport default ProfileTableSearchSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}