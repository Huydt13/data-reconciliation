{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\app\\\\pages\\\\ChangePasswordPage.js\";\nimport React, { useState } from 'react';\nimport { Form, Input, Button, Message } from 'semantic-ui-react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changePassword, logout } from 'app/actions/auth';\nconst ChangePasswordPage = () => {\n  const {\n    watch,\n    errors,\n    register,\n    setValue,\n    setError,\n    trigger,\n    clearErrors\n  } = useForm();\n  const oldPassword = watch('oldPassword');\n  const newPassword = watch('newPassword');\n  const confirmPassword = watch('confirmPassword');\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [changePasswordFailed, setChangePasswordFailed] = useState(false);\n  const onSubmit = () => {\n    dispatch(changePassword({\n      oldPassword,\n      newPassword\n    })).then(() => {\n      logout();\n      history.push('/login');\n    }).catch(() => {\n      setChangePasswordFailed(true);\n    });\n  };\n  const loading = useSelector(state => state.auth.changePasswordLoading);\n  return /*#__PURE__*/React.createElement(Form, {\n    loading: loading,\n    error: confirmPassword !== newPassword || changePasswordFailed,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u t\\xE0i kho\\u1EA3n\"), /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    name: \"oldPassword\",\n    input: {\n      ref: register\n    },\n    label: \"M\\u1EADt kh\\u1EA9u c\\u0169\",\n    required: true,\n    disabled: loading,\n    control: Input,\n    type: \"password\",\n    onError: e => setError('oldPassword', e),\n    error: Boolean(errors.oldPassword),\n    onChange: (e, _ref) => {\n      let {\n        value\n      } = _ref;\n      trigger('oldPassword');\n      setValue('oldPassword', value);\n      clearErrors('oldPassword');\n      setChangePasswordFailed(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    name: \"newPassword\",\n    input: {\n      ref: register\n    },\n    label: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\",\n    required: true,\n    disabled: loading,\n    control: Input,\n    type: \"password\",\n    onError: e => setError('newPassword', e),\n    error: Boolean(errors.newPassword),\n    onChange: (e, _ref2) => {\n      let {\n        value\n      } = _ref2;\n      trigger('newPassword');\n      setValue('newPassword', value);\n      clearErrors('newPassword');\n      setChangePasswordFailed(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    name: \"confirmPassword\",\n    input: {\n      ref: register\n    },\n    label: \"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u m\\u1EDBi\",\n    required: true,\n    disabled: loading,\n    control: Input,\n    type: \"password\",\n    onError: e => setError('confirmPassword', e),\n    error: Boolean(errors.confirmPassword),\n    onChange: (e, _ref3) => {\n      let {\n        value\n      } = _ref3;\n      trigger('confirmPassword');\n      setValue('confirmPassword', value);\n      clearErrors('confirmPassword');\n      setChangePasswordFailed(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  })), newPassword && confirmPassword && newPassword !== confirmPassword && /*#__PURE__*/React.createElement(Message, {\n    error: true,\n    content: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi ch\\u01B0a kh\\u1EDBp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }), changePasswordFailed && /*#__PURE__*/React.createElement(Message, {\n    error: true,\n    content: \"M\\u1EADt kh\\u1EA9u c\\u0169 kh\\xF4ng \\u0111\\xFAng\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    primary: true,\n    disabled: !oldPassword || newPassword !== confirmPassword || loading,\n    control: Button,\n    content: \"X\\xE1c nh\\u1EADn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  })));\n};\nexport default ChangePasswordPage;","map":{"version":3,"names":["React","useState","Form","Input","Button","Message","useForm","useHistory","useDispatch","useSelector","changePassword","logout","ChangePasswordPage","watch","errors","register","setValue","setError","trigger","clearErrors","oldPassword","newPassword","confirmPassword","history","dispatch","changePasswordFailed","setChangePasswordFailed","onSubmit","then","push","catch","loading","state","auth","changePasswordLoading","createElement","error","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Group","widths","Field","name","input","ref","label","required","disabled","control","type","onError","e","Boolean","onChange","_ref","value","_ref2","_ref3","content","primary"],"sources":["H:/BAKCO/pj/cds/src/app/pages/ChangePasswordPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Form, Input, Button, Message } from 'semantic-ui-react';\n\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changePassword, logout } from 'app/actions/auth';\n\nconst ChangePasswordPage = () => {\n  const { watch, errors, register, setValue, setError, trigger, clearErrors } =\n    useForm();\n\n  const oldPassword = watch('oldPassword');\n  const newPassword = watch('newPassword');\n  const confirmPassword = watch('confirmPassword');\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [changePasswordFailed, setChangePasswordFailed] = useState(false);\n  const onSubmit = () => {\n    dispatch(changePassword({ oldPassword, newPassword }))\n      .then(() => {\n        logout();\n        history.push('/login');\n      })\n      .catch(() => {\n        setChangePasswordFailed(true);\n      });\n  };\n\n  const loading = useSelector((state) => state.auth.changePasswordLoading);\n\n  return (\n    <Form\n      loading={loading}\n      error={confirmPassword !== newPassword || changePasswordFailed}\n      onSubmit={onSubmit}\n    >\n      <h4>Đổi mật khẩu tài khoản</h4>\n      <Form.Group widths=\"equal\">\n        <Form.Field\n          name=\"oldPassword\"\n          input={{ ref: register }}\n          label=\"Mật khẩu cũ\"\n          required\n          disabled={loading}\n          control={Input}\n          type=\"password\"\n          onError={(e) => setError('oldPassword', e)}\n          error={Boolean(errors.oldPassword)}\n          onChange={(e, { value }) => {\n            trigger('oldPassword');\n            setValue('oldPassword', value);\n            clearErrors('oldPassword');\n            setChangePasswordFailed(false);\n          }}\n        />\n        <Form.Field\n          name=\"newPassword\"\n          input={{ ref: register }}\n          label=\"Mật khẩu mới\"\n          required\n          disabled={loading}\n          control={Input}\n          type=\"password\"\n          onError={(e) => setError('newPassword', e)}\n          error={Boolean(errors.newPassword)}\n          onChange={(e, { value }) => {\n            trigger('newPassword');\n            setValue('newPassword', value);\n            clearErrors('newPassword');\n            setChangePasswordFailed(false);\n          }}\n        />\n        <Form.Field\n          name=\"confirmPassword\"\n          input={{ ref: register }}\n          label=\"Xác nhận mật khẩu mới\"\n          required\n          disabled={loading}\n          control={Input}\n          type=\"password\"\n          onError={(e) => setError('confirmPassword', e)}\n          error={Boolean(errors.confirmPassword)}\n          onChange={(e, { value }) => {\n            trigger('confirmPassword');\n            setValue('confirmPassword', value);\n            clearErrors('confirmPassword');\n            setChangePasswordFailed(false);\n          }}\n        />\n      </Form.Group>\n\n      {newPassword && confirmPassword && newPassword !== confirmPassword && (\n        <Message error content=\"Mật khẩu mới chưa khớp\" />\n      )}\n      {changePasswordFailed && (\n        <Message error content=\"Mật khẩu cũ không đúng\" />\n      )}\n      <Form.Group widths=\"equal\">\n        <Form.Field\n          primary\n          disabled={!oldPassword || newPassword !== confirmPassword || loading}\n          control={Button}\n          content=\"Xác nhận\"\n        />\n      </Form.Group>\n    </Form>\n  );\n};\n\nexport default ChangePasswordPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}