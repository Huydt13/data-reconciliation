{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\medical-test\\\\components\\\\units\\\\UnitConfigTable.js\";\n/* eslint-disable no-nested-ternary */\nimport React, { useState, useEffect, useCallback\n// useCallback,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport { FiCheck, FiEdit3, FiKey, FiPlus, FiTrash } from 'react-icons/fi';\nimport { DataTable } from 'app/components/shared';\nimport { getUnitConfigs, updateCode, deleteUnitConfig } from 'medical-test/actions/medical-test';\nimport { showConfirmModal } from 'app/actions/global';\nimport UnitConfigModal from './UnitConfigModal';\nconst columns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Mã',\n  accessor: 'code'\n}, {\n  Header: 'Đã tạo',\n  formatter: r => r.createdCount\n}, {\n  Header: 'Sử dụng',\n  formatter: r => r.isUsing ? /*#__PURE__*/React.createElement(FiCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 55\n    }\n  }) : null\n}];\nconst UnitConfigTable = _ref => {\n  let {\n    unitId,\n    unitName\n  } = _ref;\n  const dispatch = useDispatch();\n  const [unitConfigList, setUnitConfigList] = useState([]);\n  const [unitConfigModal, setUnitConfigModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [selectingRow, setSelectingRow] = useState({});\n  // const {\n  //   createUnitConfigLoading,\n  //   updateUnitConfigLoading,\n  //   deleteUnitConfigLoading,\n  // } = useSelector((s) => s.medicalTest);\n\n  const getData = useCallback(() => {\n    setLoading(true);\n    getUnitConfigs(unitId).then(response => {\n      setUnitConfigList(response);\n      setLoading(false);\n    });\n  }, [unitId]);\n  useEffect(getData, [getData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    title: `Quản lý mã phụ của ${unitName}`,\n    columns: columns,\n    loading: loading,\n    data: (unitConfigList !== null && unitConfigList !== void 0 ? unitConfigList : []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    actions: [{\n      icon: /*#__PURE__*/React.createElement(FiPlus, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }\n      }),\n      title: 'Thêm',\n      color: 'green',\n      globalAction: true,\n      onClick: () => {\n        setUnitConfigModal(true);\n        setSelectingRow({});\n      }\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiKey, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 19\n        }\n      }),\n      title: 'Sử dụng mã',\n      color: 'blue',\n      onClick: r => updateCode({\n        unitId: r.unitId,\n        code: r.code\n      }).then(getData),\n      disabled: r => r.isUsing\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiEdit3, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 19\n        }\n      }),\n      title: 'Sửa mã',\n      color: 'violet',\n      onClick: r => {\n        setUnitConfigModal(true);\n        setSelectingRow(r);\n      }\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiTrash, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }\n      }),\n      title: 'Xóa',\n      color: 'red',\n      onClick: r => dispatch(showConfirmModal('Bạn có chắc chắn?', () => {\n        dispatch(deleteUnitConfig(r.id)).then(getData);\n      }))\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(UnitConfigModal, {\n    key: unitConfigModal ? 'OpenUnitConfigModal' : 'CloseUnitConfigModal',\n    unitId: unitId,\n    loading: loading,\n    data: selectingRow,\n    open: unitConfigModal,\n    onClose: () => setUnitConfigModal(false),\n    onRefresh: getData,\n    onLoad: setLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }));\n};\nUnitConfigTable.propTypes = {\n  unitId: PropTypes.string,\n  unitName: PropTypes.string\n};\nUnitConfigTable.defaultProps = {\n  unitId: '',\n  unitName: ''\n};\nexport default UnitConfigTable;","map":{"version":3,"names":["React","useState","useEffect","useCallback","PropTypes","useDispatch","FiCheck","FiEdit3","FiKey","FiPlus","FiTrash","DataTable","getUnitConfigs","updateCode","deleteUnitConfig","showConfirmModal","UnitConfigModal","columns","Header","accessor","formatter","r","createdCount","isUsing","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","UnitConfigTable","_ref","unitId","unitName","dispatch","unitConfigList","setUnitConfigList","unitConfigModal","setUnitConfigModal","loading","setLoading","selectingRow","setSelectingRow","getData","then","response","title","data","map","i","index","actions","icon","color","globalAction","onClick","code","disabled","id","key","open","onClose","onRefresh","onLoad","propTypes","string","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/medical-test/components/units/UnitConfigTable.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport React, {\n  useState,\n  useEffect,\n  useCallback,\n  // useCallback,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport {\n  FiCheck, FiEdit3, FiKey, FiPlus, FiTrash,\n} from 'react-icons/fi';\n\nimport { DataTable } from 'app/components/shared';\n\nimport {\n  getUnitConfigs,\n  updateCode,\n  deleteUnitConfig,\n} from 'medical-test/actions/medical-test';\nimport { showConfirmModal } from 'app/actions/global';\nimport UnitConfigModal from './UnitConfigModal';\n\nconst columns = [\n  { Header: '#', accessor: 'index' },\n  { Header: 'Mã', accessor: 'code' },\n  { Header: 'Đã tạo', formatter: (r) => r.createdCount },\n  { Header: 'Sử dụng', formatter: (r) => (r.isUsing ? <FiCheck /> : null) },\n];\n\nconst UnitConfigTable = ({ unitId, unitName }) => {\n  const dispatch = useDispatch();\n  const [unitConfigList, setUnitConfigList] = useState([]);\n  const [unitConfigModal, setUnitConfigModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [selectingRow, setSelectingRow] = useState({});\n  // const {\n  //   createUnitConfigLoading,\n  //   updateUnitConfigLoading,\n  //   deleteUnitConfigLoading,\n  // } = useSelector((s) => s.medicalTest);\n\n  const getData = useCallback(() => {\n    setLoading(true);\n    getUnitConfigs(unitId).then((response) => {\n      setUnitConfigList(response);\n      setLoading(false);\n    });\n  }, [unitId]);\n  useEffect(getData, [getData]);\n\n  return (\n    <div>\n      <DataTable\n        title={`Quản lý mã phụ của ${unitName}`}\n        columns={columns}\n        loading={loading}\n        data={(unitConfigList ?? []).map((r, i) => ({ ...r, index: i + 1 }))}\n        actions={[\n          {\n            icon: <FiPlus />,\n            title: 'Thêm',\n            color: 'green',\n            globalAction: true,\n            onClick: () => {\n              setUnitConfigModal(true);\n              setSelectingRow({});\n            },\n          },\n          {\n            icon: <FiKey />,\n            title: 'Sử dụng mã',\n            color: 'blue',\n            onClick: (r) => updateCode({ unitId: r.unitId, code: r.code }).then(getData),\n            disabled: (r) => r.isUsing,\n          },\n          {\n            icon: <FiEdit3 />,\n            title: 'Sửa mã',\n            color: 'violet',\n            onClick: (r) => {\n              setUnitConfigModal(true);\n              setSelectingRow(r);\n            },\n          },\n          {\n            icon: <FiTrash />,\n            title: 'Xóa',\n            color: 'red',\n            onClick: (r) => dispatch(\n              showConfirmModal('Bạn có chắc chắn?', () => {\n                dispatch(deleteUnitConfig(r.id)).then(getData);\n              }),\n            ),\n          },\n        ]}\n      />\n      <UnitConfigModal\n        key={unitConfigModal ? 'OpenUnitConfigModal' : 'CloseUnitConfigModal'}\n        unitId={unitId}\n        loading={loading}\n        data={selectingRow}\n        open={unitConfigModal}\n        onClose={() => setUnitConfigModal(false)}\n        onRefresh={getData}\n        onLoad={setLoading}\n      />\n    </div>\n  );\n};\n\nUnitConfigTable.propTypes = {\n  unitId: PropTypes.string,\n  unitName: PropTypes.string,\n};\n\nUnitConfigTable.defaultProps = {\n  unitId: '',\n  unitName: '',\n};\n\nexport default UnitConfigTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}