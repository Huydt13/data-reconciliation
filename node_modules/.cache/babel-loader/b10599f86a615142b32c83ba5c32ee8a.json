{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\profile\\\\components\\\\DuplicateProfileTableSearchSection.js\";\n/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\nimport { DataTable } from 'app/components/shared';\nimport DuplicateProfileFilter from 'profile/components/DuplicateProfileFilter';\nimport { getDuplicateProfilesWithouDispatch } from 'profile/actions/profile';\nimport { formatToYear, renderGender, renderProfileKey } from 'app/utils/helpers';\nconst shrinkColumn = [{\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 20\n}];\nconst expandColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref => {\n    let {\n      dateOfBirth\n    } = _ref;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Giới tính',\n  formatter: renderGender\n}, {\n  Header: 'Số điện thoại',\n  formatter: _ref2 => {\n    let {\n      phoneNumber\n    } = _ref2;\n    return phoneNumber;\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey\n}];\nconst normalColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref3 => {\n    let {\n      dateOfBirth\n    } = _ref3;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey,\n  cutlength: 20\n}];\nconst DuplicateProfileTableSearchSection = _ref4 => {\n  let {\n    isShrink,\n    isNormal,\n    isCloseFilter,\n    selectingList,\n    onChange\n  } = _ref4;\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n  const rowActions = useMemo(() => [{\n    icon: /*#__PURE__*/React.createElement(FiArrowRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }),\n    title: 'Chọn',\n    color: 'green',\n    onClick: onChange,\n    hidden: r => selectingList.map(s => s.id).includes(r.id)\n  }], [selectingList, onChange]);\n  useEffect(() => {\n    setFetching(true);\n    getDuplicateProfilesWithouDispatch({\n      ...filter,\n      pageSize,\n      pageIndex\n    }).then(_ref5 => {\n      let {\n        data: dataRes,\n        totalPages\n      } = _ref5;\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageSize, pageIndex]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    as: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \"Danh s\\xE1ch h\\u1ED3 s\\u01A1 tr\\xF9ng trong h\\u1EC7 th\\u1ED1ng\"), /*#__PURE__*/React.createElement(DuplicateProfileFilter, {\n    isCloseFilter: isCloseFilter,\n    onChange: setFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    noPaging: isShrink || isNormal,\n    columns: isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns,\n    data: (data || []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: fetching,\n    pageCount: pageCount,\n    onPaginationChange: p => {\n      setPageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: isShrink ? [] : rowActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }));\n};\nDuplicateProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool\n};\nDuplicateProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false\n};\nexport default DuplicateProfileTableSearchSection;","map":{"version":3,"names":["React","useEffect","useMemo","useState","PropTypes","FiArrowRight","Header","DataTable","DuplicateProfileFilter","getDuplicateProfilesWithouDispatch","formatToYear","renderGender","renderProfileKey","shrinkColumn","formatter","r","fullName","cutlength","expandColumns","accessor","_ref","dateOfBirth","_ref2","phoneNumber","normalColumns","_ref3","DuplicateProfileTableSearchSection","_ref4","isShrink","isNormal","isCloseFilter","selectingList","onChange","data","setData","pageCount","setPageCount","fetching","setFetching","pageIndex","setPageIndex","pageSize","setPageSize","filter","setFilter","rowActions","icon","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","color","onClick","hidden","map","s","id","includes","then","_ref5","dataRes","totalPages","Fragment","as","noPaging","columns","i","index","loading","onPaginationChange","p","actions","propTypes","arrayOf","shape","func","isRequired","bool","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/profile/components/DuplicateProfileTableSearchSection.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\nimport { DataTable } from 'app/components/shared';\nimport DuplicateProfileFilter from 'profile/components/DuplicateProfileFilter';\n\nimport { getDuplicateProfilesWithouDispatch } from 'profile/actions/profile';\nimport {\n  formatToYear,\n  renderGender,\n  renderProfileKey,\n} from 'app/utils/helpers';\n\nconst shrinkColumn = [\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 20 },\n];\nconst expandColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 50 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Giới tính',\n    formatter: renderGender,\n  },\n  {\n    Header: 'Số điện thoại',\n    formatter: ({ phoneNumber }) => phoneNumber,\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n  },\n];\nconst normalColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 50 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n    cutlength: 20,\n  },\n];\n\nconst DuplicateProfileTableSearchSection = ({\n  isShrink,\n  isNormal,\n  isCloseFilter,\n  selectingList,\n  onChange,\n}) => {\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n\n  const rowActions = useMemo(\n    () => [\n      {\n        icon: <FiArrowRight />,\n        title: 'Chọn',\n        color: 'green',\n        onClick: onChange,\n        hidden: (r) => selectingList.map((s) => s.id).includes(r.id),\n      },\n    ],\n    [selectingList, onChange],\n  );\n\n  useEffect(() => {\n    setFetching(true);\n    getDuplicateProfilesWithouDispatch({\n      ...filter,\n      pageSize,\n      pageIndex,\n    }).then(({ data: dataRes, totalPages }) => {\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageSize, pageIndex]);\n\n  return (\n    <>\n      <Header as=\"h3\">Danh sách hồ sơ trùng trong hệ thống</Header>\n      <DuplicateProfileFilter\n        isCloseFilter={isCloseFilter}\n        onChange={setFilter}\n      />\n      <DataTable\n        noPaging={isShrink || isNormal}\n        columns={\n          isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns\n        }\n        data={(data || []).map((r, i) => ({ ...r, index: i + 1 }))}\n        loading={fetching}\n        pageCount={pageCount}\n        onPaginationChange={(p) => {\n          setPageIndex(p.pageIndex);\n          setPageSize(p.pageSize);\n        }}\n        actions={isShrink ? [] : rowActions}\n      />\n    </>\n  );\n};\n\nDuplicateProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool,\n};\n\nDuplicateProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false,\n};\n\nexport default DuplicateProfileTableSearchSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}