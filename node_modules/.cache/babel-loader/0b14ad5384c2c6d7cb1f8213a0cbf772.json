{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\profile-train\\\\components\\\\ProfileTable.js\";\nimport { DataTable } from \"app/components/shared\";\nimport moment from \"moment/moment\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { getProfiles } from \"profile/actions/profile\";\nimport PropTypes from \"prop-types\";\nimport { formatAddressToString, renderProfileKey } from \"app/utils/helpers\";\nimport { FiFileText, FiUpload } from \"react-icons/fi\";\nimport { useHistory } from \"react-router-dom\";\nimport ProfileFilter from \"./ProfileFilter\";\nimport ImportModal from \"./ImportModal\";\nconst columns = [{\n  Header: \"STT\",\n  accessor: \"id\"\n}, {\n  Header: \"Tên file\",\n  formatter: _ref => {\n    let {\n      file\n    } = _ref;\n    return file || \"\";\n  },\n  cutlength: 50\n}, {\n  Header: \"Ngày tạo\",\n  formatter: row => row.dateStart ? !row.hasYearStart ? moment(row.dateStart).format(\"DD-MM-YYYY\") : moment(row.dateStart).format(\"YYYY\") : \"Chưa xác định\"\n}, {\n  Header: \"Ngày xóa file\",\n  formatter: row => row.dateDeleteFile ? !row.hasYearDeleteFile ? moment(row.dateDeleteFile).format(\"DD-MM-YYYY\") : moment(row.dateDeleteFile).format(\"YYYY\") : \"Chưa xác định\"\n},\n// {\n//   Header: \"Địa chỉ nhà\",\n//   formatter: ({ addressesInVietnam }) =>\n//     formatAddressToString(addressesInVietnam[0]),\n// },\n// {\n//   Header: \"Thông tin xác thực\",\n//   formatter: (r) => renderProfileKey({ ...r, keyWithAddress: false }),\n// },\n{\n  Header: \"Tiến trình\",\n  accessor: \"process\"\n}, {\n  Header: \"Trạng thái\",\n  accessor: \"status\"\n}, {\n  Header: \"Lỗi\",\n  accessor: \"error\"\n}, {\n  Header: \"Dữ liệu\",\n  accessor: \"data\",\n  icon: /*#__PURE__*/React.createElement(FiUpload, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 48\n    }\n  })\n}];\nconst ProfileTable = _ref2 => {\n  let {\n    hasGroupProfiles\n  } = _ref2;\n  const [filter, setFilter] = useState({});\n  const [pageIndex, setpageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [groupProfile, setGroupProfile] = useState(undefined);\n  const [importGroupRisk, setImportGroupRisk] = useState(false);\n  const history = useHistory();\n  const {\n    profileList,\n    getProfilesLoading,\n    createProfileLoading,\n    updateProfileLoading,\n    deleteProfileLoading\n  } = useSelector(state => state.profile);\n  const loading = getProfilesLoading || createProfileLoading || updateProfileLoading || deleteProfileLoading;\n  const dispatch = useDispatch();\n  const getData = useCallback(() => {\n    dispatch(getProfiles({\n      ...filter,\n      pageIndex,\n      pageSize\n    }));\n  }, [dispatch, filter, pageIndex, pageSize]);\n  useEffect(getData, [getData]);\n  const {\n    data,\n    totalRows,\n    totalPages\n  } = profileList;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ProfileFilter, {\n    onChange: setFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    columns: columns,\n    data: (data || []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: loading,\n    pageCount: totalPages,\n    totalCount: totalRows,\n    onPaginationChange: p => {\n      setpageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: [{\n      icon: /*#__PURE__*/React.createElement(FiFileText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }),\n      disabled: false,\n      title: \"Hồ sơ\",\n      color: \"blue\",\n      onClick: e => {\n        console.log(e);\n        window.open(`/train/${e.id}`, \"_blank\");\n      },\n      // eslint-disable-next-line no-dupe-keys\n      disabled: false\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiUpload, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 19\n        }\n      }),\n      title: \"Import\",\n      color: \"green\",\n      onClick: () => setImportGroupRisk(true),\n      globalAction: true\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ImportModal, {\n    open: importGroupRisk,\n    onClose: () => setImportGroupRisk(false),\n    onRefresh: getData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }));\n};\nProfileTable.defaultProps = {\n  hasOnUsingProfiles: undefined,\n  hasGroupProfiles: undefined\n};\nProfileTable.propTypes = {\n  hasOnUsingProfiles: PropTypes.bool,\n  hasGroupProfiles: PropTypes.bool\n};\nexport default ProfileTable;","map":{"version":3,"names":["DataTable","moment","React","useCallback","useEffect","useState","useDispatch","useSelector","getProfiles","PropTypes","formatAddressToString","renderProfileKey","FiFileText","FiUpload","useHistory","ProfileFilter","ImportModal","columns","Header","accessor","formatter","_ref","file","cutlength","row","dateStart","hasYearStart","format","dateDeleteFile","hasYearDeleteFile","icon","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ProfileTable","_ref2","hasGroupProfiles","filter","setFilter","pageIndex","setpageIndex","pageSize","setPageSize","groupProfile","setGroupProfile","undefined","importGroupRisk","setImportGroupRisk","history","profileList","getProfilesLoading","createProfileLoading","updateProfileLoading","deleteProfileLoading","state","profile","loading","dispatch","getData","data","totalRows","totalPages","onChange","map","r","i","index","pageCount","totalCount","onPaginationChange","p","actions","disabled","title","color","onClick","e","console","log","window","open","id","globalAction","onClose","onRefresh","defaultProps","hasOnUsingProfiles","propTypes","bool"],"sources":["H:/BAKCO/pj/data reconciliation/src/profile-train/components/ProfileTable.js"],"sourcesContent":["import { DataTable } from \"app/components/shared\";\r\nimport moment from \"moment/moment\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProfiles } from \"profile/actions/profile\";\r\nimport PropTypes from \"prop-types\";\r\nimport { formatAddressToString, renderProfileKey } from \"app/utils/helpers\";\r\nimport { FiFileText, FiUpload } from \"react-icons/fi\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ProfileFilter from \"./ProfileFilter\";\r\nimport ImportModal from \"./ImportModal\";\r\n\r\nconst columns = [\r\n  {\r\n    Header: \"STT\",\r\n    accessor: \"id\",\r\n  },\r\n  {\r\n    Header: \"Tên file\",\r\n    formatter: ({ file }) => file || \"\",\r\n    cutlength: 50,\r\n  },\r\n  {\r\n    Header: \"Ngày tạo\",\r\n    formatter: (row) =>\r\n      row.dateStart\r\n        ? !row.hasYearStart\r\n          ? moment(row.dateStart).format(\"DD-MM-YYYY\")\r\n          : moment(row.dateStart).format(\"YYYY\")\r\n        : \"Chưa xác định\",\r\n  },\r\n  {\r\n    Header: \"Ngày xóa file\",\r\n    formatter: (row) =>\r\n      row.dateDeleteFile\r\n        ? !row.hasYearDeleteFile\r\n          ? moment(row.dateDeleteFile).format(\"DD-MM-YYYY\")\r\n          : moment(row.dateDeleteFile).format(\"YYYY\")\r\n        : \"Chưa xác định\",\r\n  },\r\n  // {\r\n  //   Header: \"Địa chỉ nhà\",\r\n  //   formatter: ({ addressesInVietnam }) =>\r\n  //     formatAddressToString(addressesInVietnam[0]),\r\n  // },\r\n  // {\r\n  //   Header: \"Thông tin xác thực\",\r\n  //   formatter: (r) => renderProfileKey({ ...r, keyWithAddress: false }),\r\n  // },\r\n  { Header: \"Tiến trình\", accessor: \"process\" },\r\n  { Header: \"Trạng thái\", accessor: \"status\" },\r\n  { Header: \"Lỗi\", accessor: \"error\" },\r\n  { Header: \"Dữ liệu\", accessor: \"data\", icon: <FiUpload/> },\r\n];\r\nconst ProfileTable = ({ hasGroupProfiles }) => {\r\n  const [filter, setFilter] = useState({});\r\n  const [pageIndex, setpageIndex] = useState(0);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [groupProfile, setGroupProfile] = useState(undefined);\r\n  const [importGroupRisk, setImportGroupRisk] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const {\r\n    profileList,\r\n    getProfilesLoading,\r\n    createProfileLoading,\r\n    updateProfileLoading,\r\n    deleteProfileLoading,\r\n  } = useSelector((state) => state.profile);\r\n\r\n  const loading =\r\n    getProfilesLoading ||\r\n    createProfileLoading ||\r\n    updateProfileLoading ||\r\n    deleteProfileLoading;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const getData = useCallback(() => {\r\n    dispatch(\r\n      getProfiles({\r\n        ...filter,\r\n        pageIndex,\r\n        pageSize,\r\n      })\r\n    );\r\n  }, [dispatch, filter, pageIndex, pageSize]);\r\n  useEffect(getData, [getData]);\r\n  const { data, totalRows, totalPages } = profileList;\r\n  return (\r\n    <div>\r\n      <ProfileFilter onChange={setFilter} />\r\n      <DataTable\r\n        columns={columns}\r\n        data={(data || []).map((r, i) => ({ ...r, index: i + 1 }))}\r\n        loading={loading}\r\n        pageCount={totalPages}\r\n        totalCount={totalRows}\r\n        onPaginationChange={(p) => {\r\n          setpageIndex(p.pageIndex);\r\n          setPageSize(p.pageSize);\r\n        }}\r\n        actions={[\r\n          {\r\n            icon: <FiFileText />,\r\n            disabled: false,\r\n            title: \"Hồ sơ\",\r\n            color: \"blue\",\r\n            onClick: (e) => {\r\n              console.log(e);\r\n              window.open(`/train/${e.id}`, \"_blank\");\r\n            },\r\n            // eslint-disable-next-line no-dupe-keys\r\n            disabled: false,\r\n          },\r\n          {\r\n            icon: <FiUpload />,\r\n            title: \"Import\",\r\n            color: \"green\",\r\n            onClick: () => setImportGroupRisk(true),\r\n            globalAction: true,\r\n          },\r\n        ]}\r\n      />\r\n      <ImportModal\r\n        open={importGroupRisk}\r\n        onClose={() => setImportGroupRisk(false)}\r\n        onRefresh={getData}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nProfileTable.defaultProps = {\r\n  hasOnUsingProfiles: undefined,\r\n  hasGroupProfiles: undefined,\r\n};\r\nProfileTable.propTypes = {\r\n  hasOnUsingProfiles: PropTypes.bool,\r\n  hasGroupProfiles: PropTypes.bool,\r\n};\r\nexport default ProfileTable;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}