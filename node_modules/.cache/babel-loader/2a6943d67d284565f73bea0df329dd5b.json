{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\medical-test\\\\components\\\\quick-test\\\\CreateAssignExamModal.js\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, Form, Select, Button } from 'semantic-ui-react';\nimport { KeyboardDatePicker } from 'app/components/shared';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'app/hooks';\nimport { getUnitInfo, getPrefixes, createAssignWithDate } from 'medical-test/actions/medical-test';\nconst CreateAssignExamModal = props => {\n  var _getAuthInfo$Username, _getAuthInfo;\n  const {\n    data,\n    onClose,\n    onRefresh\n  } = props;\n  const dispatch = useDispatch();\n  const {\n    isAdmin,\n    getAuthInfo\n  } = useAuth();\n  const {\n    watch,\n    register,\n    handleSubmit,\n    setValue\n  } = useForm();\n  const {\n    unitInfo,\n    prefixList,\n    getPrefixesLoading,\n    createAssignLoading\n  } = useSelector(state => state.medicalTest);\n  const onSubmit = async d => {\n    try {\n      var _data$person$profileI, _data$person;\n      await dispatch(createAssignWithDate({\n        ...d,\n        profileId: (_data$person$profileI = data === null || data === void 0 ? void 0 : (_data$person = data.person) === null || _data$person === void 0 ? void 0 : _data$person.profileId) !== null && _data$person$profileI !== void 0 ? _data$person$profileI : 0\n      }));\n      onClose();\n      onRefresh();\n      // eslint-disable-next-line\n    } catch (error) {}\n  };\n  useEffect(() => {\n    if (!(unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id)) {\n      dispatch(getUnitInfo());\n    }\n    if (prefixList.length === 0) {\n      dispatch(getPrefixes());\n    }\n    // eslint-disable-next-line\n  }, [dispatch]);\n  useEffect(() => {\n    register({\n      name: 'unitId'\n    });\n    register({\n      name: 'dateAssigned'\n    });\n    if (!isAdmin) {\n      setValue('unitId', unitInfo === null || unitInfo === void 0 ? void 0 : unitInfo.id);\n    }\n  }, [register, unitInfo, isAdmin, setValue]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: Boolean(data === null || data === void 0 ? void 0 : data.id),\n    onClose: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"Ch\\u1EC9 \\u0111\\u1ECBnh l\\u1EA5y m\\u1EABu PCR\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, (isAdmin || ((_getAuthInfo$Username = (_getAuthInfo = getAuthInfo()) === null || _getAuthInfo === void 0 ? void 0 : _getAuthInfo.Username) !== null && _getAuthInfo$Username !== void 0 ? _getAuthInfo$Username : '').includes('.kcl')) && /*#__PURE__*/React.createElement(Form.Field, {\n    search: true,\n    deburr: true,\n    required: true,\n    label: \"C\\u01A1 s\\u1EDF l\\u1EA5y m\\u1EABu\",\n    control: Select,\n    loading: getPrefixesLoading,\n    options: prefixList.map(z => ({\n      key: z.id,\n      text: z.name,\n      value: z.id\n    })),\n    onChange: (e, _ref) => {\n      let {\n        value\n      } = _ref;\n      setValue('unitId', value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    required: true,\n    label: \"Ng\\xE0y ch\\u1EC9 \\u0111\\u1ECBnh l\\u1EA5y m\\u1EABu\",\n    control: KeyboardDatePicker,\n    onChange: d => setValue('dateAssigned', d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    content: \"X\\xE1c nh\\u1EADn\",\n    loading: createAssignLoading,\n    disabled: !watch('unitId') || !watch('dateAssigned') || createAssignLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }))));\n};\nCreateAssignExamModal.propTypes = {\n  data: PropTypes.shape({}),\n  onClose: PropTypes.func,\n  onRefresh: PropTypes.func\n};\nCreateAssignExamModal.defaultProps = {\n  data: {},\n  onClose: () => {},\n  onRefresh: () => {}\n};\nexport default CreateAssignExamModal;","map":{"version":3,"names":["React","useEffect","PropTypes","Modal","Form","Select","Button","KeyboardDatePicker","useForm","useDispatch","useSelector","useAuth","getUnitInfo","getPrefixes","createAssignWithDate","CreateAssignExamModal","props","_getAuthInfo$Username","_getAuthInfo","data","onClose","onRefresh","dispatch","isAdmin","getAuthInfo","watch","register","handleSubmit","setValue","unitInfo","prefixList","getPrefixesLoading","createAssignLoading","state","medicalTest","onSubmit","d","_data$person$profileI","_data$person","profileId","person","error","id","length","name","createElement","open","Boolean","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Header","Content","Group","widths","Username","includes","Field","search","deburr","required","label","control","loading","options","map","z","key","text","value","onChange","e","_ref","primary","content","disabled","propTypes","shape","func","defaultProps"],"sources":["H:/BAKCO/pj/data reconciliation/src/medical-test/components/quick-test/CreateAssignExamModal.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, Form, Select, Button } from 'semantic-ui-react';\nimport { KeyboardDatePicker } from 'app/components/shared';\n\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useAuth } from 'app/hooks';\nimport {\n  getUnitInfo,\n  getPrefixes,\n  createAssignWithDate,\n} from 'medical-test/actions/medical-test';\n\nconst CreateAssignExamModal = (props) => {\n  const { data, onClose, onRefresh } = props;\n\n  const dispatch = useDispatch();\n  const { isAdmin, getAuthInfo } = useAuth();\n  const { watch, register, handleSubmit, setValue } = useForm();\n  const { unitInfo, prefixList, getPrefixesLoading, createAssignLoading } =\n    useSelector((state) => state.medicalTest);\n\n  const onSubmit = async (d) => {\n    try {\n       await dispatch(createAssignWithDate({\n         ...d,\n         profileId: data?.person?.profileId ?? 0,\n       }));\n       onClose();\n       onRefresh();\n    // eslint-disable-next-line\n    } catch (error) {}\n  };\n\n  useEffect(() => {\n    if (!unitInfo?.id) {\n      dispatch(getUnitInfo());\n    }\n    if (prefixList.length === 0) {\n      dispatch(getPrefixes());\n    }\n    // eslint-disable-next-line\n  }, [dispatch]);\n\n  useEffect(() => {\n    register({ name: 'unitId' });\n    register({ name: 'dateAssigned' });\n    if (!isAdmin) {\n      setValue('unitId', unitInfo?.id);\n    }\n  }, [register, unitInfo, isAdmin, setValue]);\n\n  return (\n    <Modal open={Boolean(data?.id)} onClose={onClose}>\n      <Modal.Header>Chỉ định lấy mẫu PCR</Modal.Header>\n      <Modal.Content>\n        <Form onSubmit={handleSubmit(onSubmit)}>\n          <Form.Group widths=\"equal\">\n            {(isAdmin || (getAuthInfo()?.Username ?? '').includes('.kcl')) && (\n              <Form.Field\n                search\n                deburr\n                required\n                label=\"Cơ sở lấy mẫu\"\n                control={Select}\n                loading={getPrefixesLoading}\n                options={prefixList.map((z) => ({\n                  key: z.id,\n                  text: z.name,\n                  value: z.id,\n                }))}\n                onChange={(e, { value }) => {\n                  setValue('unitId', value);\n                }}\n              />\n            )}\n            <Form.Field\n              required\n              label=\"Ngày chỉ định lấy mẫu\"\n              control={KeyboardDatePicker}\n              onChange={(d) => setValue('dateAssigned', d)}\n            />\n          </Form.Group>\n          <Button\n            primary\n            content=\"Xác nhận\"\n            loading={createAssignLoading}\n            disabled={\n              !watch('unitId') || !watch('dateAssigned') || createAssignLoading\n            }\n          />\n        </Form>\n      </Modal.Content>\n    </Modal>\n  );\n};\n\nCreateAssignExamModal.propTypes = {\n  data: PropTypes.shape({}),\n  onClose: PropTypes.func,\n  onRefresh: PropTypes.func,\n};\n\nCreateAssignExamModal.defaultProps = {\n  data: {},\n  onClose: () => {},\n  onRefresh: () => {},\n};\n\nexport default CreateAssignExamModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}