{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\medical-test\\\\components\\\\sessions\\\\SampleImportSessionModal.js\";\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Button, Modal, Progress } from 'semantic-ui-react';\nimport { DataTable } from 'app/components/shared';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { uploadPlateResult } from 'medical-test/actions/session';\nimport { showInfoModal } from 'app/actions/global';\nimport { renderExaminationResult } from 'app/utils/helpers';\nconst MarginTopButton = styled(Button)`\n  margin-top: 1em !important;\n`;\nconst StyledProgress = styled(Progress)`\n  margin: 1em 0 !important;\n`;\nconst SampleImportSessionModal = props => {\n  const {\n    open,\n    onClose,\n    onRefresh\n  } = props;\n  const {\n    uploadPlateResultLoading,\n    uploadPlateResultProgress\n  } = useSelector(state => state.medicalTest);\n  const fileInputRef = useRef();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const columns = useMemo(() => [{\n    Header: 'Code',\n    accessor: 'code'\n  }, {\n    Header: 'Kết quả',\n    formatter: _ref => {\n      let {\n        result\n      } = _ref;\n      return renderExaminationResult(result);\n    }\n  }, {\n    Header: 'Ngày có kết quả',\n    accessor: 'resultDate'\n  }], []);\n  const data = useMemo(() => [{\n    code: 'U07T01200001',\n    result: 'Dương tính',\n    resultDate: '20-09-2020 13:45'\n  }, {\n    code: 'U07T01200002',\n    result: 'Âm tính',\n    resultDate: '10-09-2020 10:15'\n  }, {\n    code: 'U07T01200003',\n    result: 'Dương tính',\n    resultDate: '15-10-2020 22:30'\n  }], []);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (selectedFile) {\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      const uploadResult = async () => {\n        try {\n          await dispatch(uploadPlateResult(formData));\n        } catch (e) {\n          dispatch(showInfoModal('Đã có lỗi xảy ra', e));\n        }\n      };\n      onClose();\n      onRefresh();\n      uploadResult();\n    }\n    // eslint-disable-next-line\n  }, [dispatch, selectedFile]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: onClose,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, \"C\\u1EADp nh\\u1EADt k\\u1EBFt qu\\u1EA3 phi\\xEAn x\\xE9t nghi\\u1EC7m b\\u1EB1ng file Excel\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    title: \"M\\u1EABu Excel\",\n    celled: true,\n    noPaging: true,\n    columns: columns,\n    data: data,\n    actions: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), uploadPlateResultLoading && /*#__PURE__*/React.createElement(StyledProgress, {\n    active: true,\n    color: \"green\",\n    percent: uploadPlateResultProgress,\n    size: \"tiny\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MarginTopButton, {\n    primary: true,\n    onClick: () => fileInputRef.current.click(),\n    content: \"Ch\\u1ECDn File Excel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    ref: fileInputRef,\n    type: \"file\",\n    hidden: true,\n    onChange: e => setSelectedFile(e.target.files[0]),\n    accept: \".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  })));\n};\nSampleImportSessionModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onRefresh: PropTypes.func.isRequired\n};\nexport default SampleImportSessionModal;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","PropTypes","styled","Button","Modal","Progress","DataTable","useDispatch","useSelector","uploadPlateResult","showInfoModal","renderExaminationResult","MarginTopButton","StyledProgress","SampleImportSessionModal","props","open","onClose","onRefresh","uploadPlateResultLoading","uploadPlateResultProgress","state","medicalTest","fileInputRef","selectedFile","setSelectedFile","columns","Header","accessor","formatter","_ref","result","data","code","resultDate","dispatch","formData","FormData","append","uploadResult","e","createElement","size","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Content","title","celled","noPaging","actions","active","color","percent","primary","onClick","current","click","content","ref","type","hidden","onChange","target","files","accept","propTypes","bool","isRequired","func"],"sources":["H:/BAKCO/pj/data reconciliation/src/medical-test/components/sessions/SampleImportSessionModal.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { Button, Modal, Progress } from 'semantic-ui-react';\n\nimport { DataTable } from 'app/components/shared';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { uploadPlateResult } from 'medical-test/actions/session';\nimport { showInfoModal } from 'app/actions/global';\nimport { renderExaminationResult } from 'app/utils/helpers';\n\nconst MarginTopButton = styled(Button)`\n  margin-top: 1em !important;\n`;\nconst StyledProgress = styled(Progress)`\n  margin: 1em 0 !important;\n`;\n\nconst SampleImportSessionModal = (props) => {\n  const { open, onClose, onRefresh } = props;\n  const { uploadPlateResultLoading, uploadPlateResultProgress } = useSelector(\n    (state) => state.medicalTest,\n  );\n  const fileInputRef = useRef();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const columns = useMemo(\n    () => [\n      { Header: 'Code', accessor: 'code' },\n      {\n        Header: 'Kết quả',\n        formatter: ({ result }) => renderExaminationResult(result),\n      },\n\n      { Header: 'Ngày có kết quả', accessor: 'resultDate' },\n    ],\n    [],\n  );\n  const data = useMemo(\n    () => [\n      {\n        code: 'U07T01200001',\n        result: 'Dương tính',\n        resultDate: '20-09-2020 13:45',\n      },\n      {\n        code: 'U07T01200002',\n        result: 'Âm tính',\n        resultDate: '10-09-2020 10:15',\n      },\n      {\n        code: 'U07T01200003',\n        result: 'Dương tính',\n        resultDate: '15-10-2020 22:30',\n      },\n    ],\n    [],\n  );\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (selectedFile) {\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      const uploadResult = async () => {\n        try {\n          await dispatch(uploadPlateResult(formData));\n        } catch (e) {\n          dispatch(showInfoModal('Đã có lỗi xảy ra', e));\n        }\n      };\n      onClose();\n      onRefresh();\n      uploadResult();\n    }\n    // eslint-disable-next-line\n  }, [dispatch, selectedFile]);\n  return (\n    <Modal open={open} onClose={onClose} size=\"small\">\n      <Modal.Header>\n        Cập nhật kết quả phiên xét nghiệm bằng file Excel\n      </Modal.Header>\n      <Modal.Content>\n        <DataTable\n          title=\"Mẫu Excel\"\n          celled\n          noPaging\n          columns={columns}\n          data={data}\n          actions={[]}\n        />\n        {uploadPlateResultLoading && (\n          <StyledProgress\n            active\n            color=\"green\"\n            percent={uploadPlateResultProgress}\n            size=\"tiny\"\n          />\n        )}\n        <MarginTopButton\n          primary\n          onClick={() => fileInputRef.current.click()}\n          content=\"Chọn File Excel\"\n        />\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          hidden\n          onChange={(e) => setSelectedFile(e.target.files[0])}\n          accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\n        />\n      </Modal.Content>\n    </Modal>\n  );\n};\n\nSampleImportSessionModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onRefresh: PropTypes.func.isRequired,\n};\nexport default SampleImportSessionModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}