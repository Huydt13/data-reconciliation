{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\app\\\\components\\\\shared\\\\SearchProfileField.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Header, Select\n// Header,\n} from 'semantic-ui-react';\n\n// import httpClient from 'app/utils/http-client';\n// import apiLinks from 'app/utils/api-links';\nimport moment from 'moment';\nimport { deburr } from 'app/utils/helpers';\nconst SearchProfileField = _ref => {\n  let {\n    initialProfileId,\n    initialProfileName,\n    initialProfileDob,\n    onChange\n  } = _ref;\n  // const [searchLoading, setSearchLoading] = useState(false);\n  const [profileSuggestions, setProfileSuggestions] = useState([]);\n  useEffect(() => {\n    if (initialProfileId) {\n      onChange(initialProfileId);\n      setProfileSuggestions([{\n        fullName: initialProfileName,\n        profileId: initialProfileId,\n        dateOfBirth: initialProfileDob\n      }]);\n    }\n  }, [onChange, initialProfileId, initialProfileName, initialProfileDob]);\n\n  // useEffect(() => {\n  //   setSearchLoading(true);\n  //   httpClient\n  //     .callApi({\n  //       url: apiLinks.profiles.get,\n  //       params: {\n  //         pageSize: 2147483646,\n  //         pageIndex: 0,\n  //       },\n  //     })\n  //     .then(({ data: { data } }) => {\n  //       setProfileSuggestions(data || []);\n  //     })\n  //     .finally(() => {\n  //       setSearchLoading(false);\n  //     });\n  // }, []);\n\n  const options = profileSuggestions.map(s => ({\n    text: s.fullName,\n    value: s.profileId,\n    content: /*#__PURE__*/React.createElement(Header, {\n      content: s.fullName,\n      subheader: `Năm sinh: ${s.dateOfBirth ? moment(s === null || s === void 0 ? void 0 : s.dateOfBirth).format('YYYY') : ''}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }),\n    mapped: `${s.fullName} ${s.dateOfBirth ? moment(s === null || s === void 0 ? void 0 : s.dateOfBirth).format('YYYY') : ''}`\n  }));\n  return /*#__PURE__*/React.createElement(Select, {\n    search: (searchOptions, value) => searchOptions.filter(_ref2 => {\n      let {\n        mapped\n      } = _ref2;\n      return deburr(mapped).includes(deburr(value));\n    }),\n    deburr: true,\n    fluid: true,\n    clearable: true,\n    options: options\n    // loading={searchLoading}\n    ,\n    defaultValue: initialProfileId,\n    placeholder: \"T\\xECm ki\\u1EBFm\",\n    onChange: (_, _ref3) => {\n      let {\n        value\n      } = _ref3;\n      return onChange(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  });\n};\nSearchProfileField.propTypes = {\n  initialProfileId: PropTypes.number,\n  initialProfileName: PropTypes.string,\n  initialProfileDob: PropTypes.string,\n  onChange: PropTypes.func\n};\nSearchProfileField.defaultProps = {\n  initialProfileId: 0,\n  initialProfileName: '',\n  initialProfileDob: '',\n  onChange: () => {}\n};\nexport default SearchProfileField;","map":{"version":3,"names":["React","useEffect","useState","PropTypes","Header","Select","moment","deburr","SearchProfileField","_ref","initialProfileId","initialProfileName","initialProfileDob","onChange","profileSuggestions","setProfileSuggestions","fullName","profileId","dateOfBirth","options","map","s","text","value","content","createElement","subheader","format","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","mapped","search","searchOptions","filter","_ref2","includes","fluid","clearable","defaultValue","placeholder","_","_ref3","propTypes","number","string","func","defaultProps"],"sources":["H:/BAKCO/pj/data reconciliation/src/app/components/shared/SearchProfileField.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Header,\n  Select,\n  // Header,\n} from 'semantic-ui-react';\n\n// import httpClient from 'app/utils/http-client';\n// import apiLinks from 'app/utils/api-links';\nimport moment from 'moment';\n\nimport { deburr } from 'app/utils/helpers';\n\nconst SearchProfileField = ({\n  initialProfileId,\n  initialProfileName,\n  initialProfileDob,\n  onChange,\n}) => {\n  // const [searchLoading, setSearchLoading] = useState(false);\n  const [profileSuggestions, setProfileSuggestions] = useState([]);\n\n  useEffect(() => {\n    if (initialProfileId) {\n      onChange(initialProfileId);\n      setProfileSuggestions([\n        {\n          fullName: initialProfileName,\n          profileId: initialProfileId,\n          dateOfBirth: initialProfileDob,\n        },\n      ]);\n    }\n  }, [onChange, initialProfileId, initialProfileName, initialProfileDob]);\n\n  // useEffect(() => {\n  //   setSearchLoading(true);\n  //   httpClient\n  //     .callApi({\n  //       url: apiLinks.profiles.get,\n  //       params: {\n  //         pageSize: 2147483646,\n  //         pageIndex: 0,\n  //       },\n  //     })\n  //     .then(({ data: { data } }) => {\n  //       setProfileSuggestions(data || []);\n  //     })\n  //     .finally(() => {\n  //       setSearchLoading(false);\n  //     });\n  // }, []);\n\n  const options = profileSuggestions.map((s) => ({\n    text: s.fullName,\n    value: s.profileId,\n    content: (\n      <Header\n        content={s.fullName}\n        subheader={`Năm sinh: ${\n          s.dateOfBirth ? moment(s?.dateOfBirth).format('YYYY') : ''\n        }`}\n      />\n    ),\n    mapped: `${s.fullName} ${\n      s.dateOfBirth ? moment(s?.dateOfBirth).format('YYYY') : ''\n    }`,\n  }));\n\n  return (\n    <Select\n      search={(searchOptions, value) =>\n        searchOptions.filter(({ mapped }) =>\n          deburr(mapped).includes(deburr(value)),\n        )\n      }\n      deburr\n      fluid\n      clearable\n      options={options}\n      // loading={searchLoading}\n      defaultValue={initialProfileId}\n      placeholder=\"Tìm kiếm\"\n      onChange={(_, { value }) => onChange(value)}\n    />\n  );\n};\n\nSearchProfileField.propTypes = {\n  initialProfileId: PropTypes.number,\n  initialProfileName: PropTypes.string,\n  initialProfileDob: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nSearchProfileField.defaultProps = {\n  initialProfileId: 0,\n  initialProfileName: '',\n  initialProfileDob: '',\n  onChange: () => {},\n};\n\nexport default SearchProfileField;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}