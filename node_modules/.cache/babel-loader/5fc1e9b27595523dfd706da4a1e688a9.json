{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\treatment\\\\components\\\\hospital\\\\HospitalTable.js\";\n/* eslint-disable react/prop-types */\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { DataTable } from 'app/components/shared';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteHospital, getHospitals } from 'treatment/actions/hospital';\nimport { checkFilter, formatAddressToString } from 'app/utils/helpers';\nimport { FiEdit2, FiPlus, FiTrash2 } from 'react-icons/fi';\nimport { showConfirmModal } from 'app/actions/global';\nimport HospitalModal from './HospitalModal';\nimport HospitalFilter from './HospitalFilter';\nconst columns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Tên bệnh viện',\n  formatter: _ref => {\n    let {\n      description\n    } = _ref;\n    return description;\n  }\n}, {\n  Header: 'Địa chỉ',\n  formatter: _ref2 => {\n    let {\n      address\n    } = _ref2;\n    return formatAddressToString(address);\n  }\n}];\nconst HospitalTable = () => {\n  const dispatch = useDispatch();\n  const [filter, setFilter] = useState({});\n  const [pageSize, setPageSize] = useState(10);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [hospitalModal, setHospitalModal] = useState(false);\n  const [selectingRow, setSelectingRow] = useState({});\n  const {\n    data,\n    pageCount\n  } = useSelector(s => s.treatment.hospital.hospitalData);\n  const getDataLoading = useSelector(s => s.treatment.hospital.getHospitalsLoading);\n  const getData = useCallback(() => {\n    dispatch(getHospitals({\n      ...filter,\n      pageSize,\n      pageIndex\n    }));\n  }, [dispatch, filter, pageIndex, pageSize]);\n  useEffect(getData, [getData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(HospitalFilter, {\n    onChange: d => checkFilter(filter, d) && setFilter(d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    title: \"Danh s\\xE1ch b\\u1EC7nh vi\\u1EC7n\",\n    columns: columns,\n    data: data.map((d, i) => ({\n      ...d,\n      index: i + 1\n    })),\n    actions: [{\n      title: 'Tạo',\n      color: 'green',\n      icon: /*#__PURE__*/React.createElement(FiPlus, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 19\n        }\n      }),\n      onClick: () => {\n        setHospitalModal(true);\n        setSelectingRow({});\n      },\n      globalAction: true\n    }, {\n      title: 'Cập nhật',\n      color: 'violet',\n      icon: /*#__PURE__*/React.createElement(FiEdit2, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 19\n        }\n      }),\n      onClick: r => {\n        setHospitalModal(true);\n        setSelectingRow(r);\n      }\n    }, {\n      title: 'Xoá',\n      color: 'red',\n      icon: /*#__PURE__*/React.createElement(FiTrash2, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 19\n        }\n      }),\n      onClick: _ref3 => {\n        let {\n          id\n        } = _ref3;\n        dispatch(showConfirmModal('Xóa bệnh viện?', async () => {\n          await dispatch(deleteHospital(id));\n          getData();\n        }));\n      }\n    }],\n    loading: getDataLoading,\n    pageCount: pageCount,\n    onPaginationChange: _ref4 => {\n      let {\n        pageSize: ps,\n        pageIndex: pi\n      } = _ref4;\n      setPageSize(ps);\n      setPageIndex(pi);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(HospitalModal, {\n    key: hospitalModal ? 'OpenHospitalModal' : 'CloseHospitalModal',\n    open: hospitalModal,\n    onClose: () => setHospitalModal(false),\n    data: selectingRow,\n    getData: getData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }));\n};\nexport default HospitalTable;","map":{"version":3,"names":["React","useCallback","useEffect","useState","DataTable","useDispatch","useSelector","deleteHospital","getHospitals","checkFilter","formatAddressToString","FiEdit2","FiPlus","FiTrash2","showConfirmModal","HospitalModal","HospitalFilter","columns","Header","accessor","formatter","_ref","description","_ref2","address","HospitalTable","dispatch","filter","setFilter","pageSize","setPageSize","pageIndex","setPageIndex","hospitalModal","setHospitalModal","selectingRow","setSelectingRow","data","pageCount","s","treatment","hospital","hospitalData","getDataLoading","getHospitalsLoading","getData","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onChange","d","title","map","i","index","actions","color","icon","onClick","globalAction","r","_ref3","id","loading","onPaginationChange","_ref4","ps","pi","key","open","onClose"],"sources":["H:/BAKCO/pj/cds/src/treatment/components/hospital/HospitalTable.js"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { DataTable } from 'app/components/shared';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteHospital, getHospitals } from 'treatment/actions/hospital';\n\nimport { checkFilter, formatAddressToString } from 'app/utils/helpers';\n\nimport { FiEdit2, FiPlus, FiTrash2 } from 'react-icons/fi';\nimport { showConfirmModal } from 'app/actions/global';\n\nimport HospitalModal from './HospitalModal';\nimport HospitalFilter from './HospitalFilter';\n\nconst columns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  {\n    Header: 'Tên bệnh viện',\n    formatter: ({ description }) => description,\n  },\n  {\n    Header: 'Địa chỉ',\n    formatter: ({ address }) => formatAddressToString(address),\n  },\n];\n\nconst HospitalTable = () => {\n  const dispatch = useDispatch();\n\n  const [filter, setFilter] = useState({});\n  const [pageSize, setPageSize] = useState(10);\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const [hospitalModal, setHospitalModal] = useState(false);\n  const [selectingRow, setSelectingRow] = useState({});\n\n  const { data, pageCount } = useSelector(\n    (s) => s.treatment.hospital.hospitalData,\n  );\n  const getDataLoading = useSelector(\n    (s) => s.treatment.hospital.getHospitalsLoading,\n  );\n\n  const getData = useCallback(() => {\n    dispatch(\n      getHospitals({\n        ...filter,\n        pageSize,\n        pageIndex,\n      }),\n    );\n  }, [dispatch, filter, pageIndex, pageSize]);\n\n  useEffect(getData, [getData]);\n\n  return (\n    <div>\n      <HospitalFilter\n        onChange={(d) => checkFilter(filter, d) && setFilter(d)}\n      />\n      <DataTable\n        title=\"Danh sách bệnh viện\"\n        columns={columns}\n        data={data.map((d, i) => ({ ...d, index: i + 1 }))}\n        actions={[\n          {\n            title: 'Tạo',\n            color: 'green',\n            icon: <FiPlus />,\n            onClick: () => {\n              setHospitalModal(true);\n              setSelectingRow({});\n            },\n            globalAction: true,\n          },\n          {\n            title: 'Cập nhật',\n            color: 'violet',\n            icon: <FiEdit2 />,\n            onClick: (r) => {\n              setHospitalModal(true);\n              setSelectingRow(r);\n            },\n          },\n          {\n            title: 'Xoá',\n            color: 'red',\n            icon: <FiTrash2 />,\n            onClick: ({ id }) => {\n              dispatch(\n                showConfirmModal('Xóa bệnh viện?', async () => {\n                  await dispatch(deleteHospital(id));\n                  getData();\n                }),\n              );\n            },\n          },\n        ]}\n        loading={getDataLoading}\n        pageCount={pageCount}\n        onPaginationChange={({ pageSize: ps, pageIndex: pi }) => {\n          setPageSize(ps);\n          setPageIndex(pi);\n        }}\n      />\n\n      <HospitalModal\n        key={hospitalModal ? 'OpenHospitalModal' : 'CloseHospitalModal'}\n        open={hospitalModal}\n        onClose={() => setHospitalModal(false)}\n        data={selectingRow}\n        getData={getData}\n      />\n    </div>\n  );\n};\n\nexport default HospitalTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}