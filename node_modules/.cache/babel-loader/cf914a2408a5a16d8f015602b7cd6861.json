{"ast":null,"code":"var InfoBox = /*#__PURE__*/\nfunction () {\n  function InfoBox(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.extend(InfoBox, google.maps.OverlayView); // Standard options (in common with google.maps.InfoWindow):\n\n    this.content = options.content || '';\n    this.disableAutoPan = options.disableAutoPan || false;\n    this.maxWidth = options.maxWidth || 0;\n    this.pixelOffset = options.pixelOffset || new google.maps.Size(0, 0);\n    this.position = options.position || new google.maps.LatLng(0, 0);\n    this.zIndex = options.zIndex || null; // Additional options (unique to InfoBox):\n\n    this.boxClass = options.boxClass || 'infoBox';\n    this.boxStyle = options.boxStyle || {};\n    this.closeBoxMargin = options.closeBoxMargin || '2px';\n    this.closeBoxURL = options.closeBoxURL || 'http://www.google.com/intl/en_us/mapfiles/close.gif';\n    if (options.closeBoxURL === '') {\n      this.closeBoxURL = '';\n    }\n    this.infoBoxClearance = options.infoBoxClearance || new google.maps.Size(1, 1);\n    if (typeof options.visible === 'undefined') {\n      if (typeof options.isHidden === 'undefined') {\n        options.visible = true;\n      } else {\n        options.visible = !options.isHidden;\n      }\n    }\n    this.isHidden = !options.visible;\n    this.alignBottom = options.alignBottom || false;\n    this.pane = options.pane || 'floatPane';\n    this.enableEventPropagation = options.enableEventPropagation || false;\n    this.div = null;\n    this.closeListener = null;\n    this.moveListener = null;\n    this.mapListener = null;\n    this.contextListener = null;\n    this.eventListeners = null;\n    this.fixedWidthSet = null;\n  }\n  var _proto = InfoBox.prototype;\n  _proto.createInfoBoxDiv = function createInfoBoxDiv() {\n    var _this = this;\n\n    // This handler prevents an event in the InfoBox from being passed on to the map.\n    function cancelHandler(event) {\n      event.cancelBubble = true;\n      if (event.stopPropagation) {\n        event.stopPropagation();\n      }\n    } // This handler ignores the current event in the InfoBox and conditionally prevents\n    // the event from being passed on to the map. It is used for the contextmenu event.\n    // eslint-disable-next-line  @getify/proper-arrows/this\n\n    var ignoreHandler = function ignoreHandler(event) {\n      event.returnValue = false;\n      if (event.preventDefault) {\n        event.preventDefault();\n      }\n      if (!_this.enableEventPropagation) {\n        cancelHandler(event);\n      }\n    };\n    if (!this.div) {\n      this.div = document.createElement('div');\n      this.setBoxStyle();\n      if (typeof this.content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + this.content;\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg();\n        this.div.appendChild(this.content);\n      } // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n\n      var panes = this.getPanes();\n      panes[this.pane].appendChild(this.div); // Add the InfoBox div to the DOM\n\n      this.addClickHandler();\n      if (this.div.style.width) {\n        this.fixedWidthSet = true;\n      } else {\n        if (this.maxWidth !== 0 && this.div.offsetWidth > this.maxWidth) {\n          this.div.style.width = this.maxWidth + 'px';\n          this.fixedWidthSet = true;\n        } else {\n          // The following code is needed to overcome problems with MSIE\n          var bw = this.getBoxWidths();\n          this.div.style.width = this.div.offsetWidth - bw.left - bw.right + 'px';\n          this.fixedWidthSet = false;\n        }\n      }\n      this.panBox(this.disableAutoPan);\n      if (!this.enableEventPropagation) {\n        this.eventListeners = []; // Cancel event propagation.\n        // Note: mousemove not included (to resolve Issue 152)\n\n        var events = ['mousedown', 'mouseover', 'mouseout', 'mouseup', 'click', 'dblclick', 'touchstart', 'touchend', 'touchmove'];\n        for (var i = 0; i < events.length; i++) {\n          this.eventListeners.push(google.maps.event.addDomListener(this.div, events[i], cancelHandler));\n        } // Workaround for Google bug that causes the cursor to change to a pointer\n        // when the mouse moves over a marker underneath InfoBox.\n\n        this.eventListeners.push(google.maps.event.addDomListener(this.div, 'mouseover',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        function () {\n          if (_this.div) {\n            _this.div.style.cursor = 'default';\n          }\n        }));\n      }\n      this.contextListener = google.maps.event.addDomListener(this.div, 'contextmenu', ignoreHandler);\n      /**\r\n       * This event is fired when the DIV containing the InfoBox's content is attached to the DOM.\r\n       * @name InfoBox#domready\r\n       * @event\r\n       */\n\n      google.maps.event.trigger(this, 'domready');\n    }\n  };\n  _proto.getCloseBoxImg = function getCloseBoxImg() {\n    var img = '';\n    if (this.closeBoxURL !== '') {\n      img = '<img alt=\"\"';\n      img += ' aria-hidden=\"true\"';\n      img += \" src='\" + this.closeBoxURL + \"'\";\n      img += ' align=right'; // Do this because Opera chokes on style='float: right;'\n\n      img += \" style='\";\n      img += ' position: relative;'; // Required by MSIE\n\n      img += ' cursor: pointer;';\n      img += ' margin: ' + this.closeBoxMargin + ';';\n      img += \"'>\";\n    }\n    return img;\n  };\n  _proto.addClickHandler = function addClickHandler() {\n    if (this.div && this.div.firstChild && this.closeBoxURL !== '') {\n      var closeBox = this.div.firstChild;\n      this.closeListener = google.maps.event.addDomListener(closeBox, 'click', this.getCloseClickHandler());\n    } else {\n      this.closeListener = null;\n    }\n  };\n  _proto.getCloseClickHandler = function getCloseClickHandler() {\n    var _this2 = this;\n\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    return function (event) {\n      // 1.0.3 fix: Always prevent propagation of a close box click to the map:\n      event.cancelBubble = true;\n      if (event.stopPropagation) {\n        event.stopPropagation();\n      }\n      /**\r\n       * This event is fired when the InfoBox's close box is clicked.\r\n       * @name InfoBox#closeclick\r\n       * @event\r\n       */\n\n      google.maps.event.trigger(_this2, 'closeclick');\n      _this2.close();\n    };\n  };\n  _proto.panBox = function panBox(disablePan) {\n    if (this.div && !disablePan) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      var map = this.getMap(); // Only pan if attached to map, not panorama\n\n      if (map instanceof google.maps.Map) {\n        var xOffset = 0;\n        var yOffset = 0;\n        var bounds = map.getBounds();\n        if (bounds && !bounds.contains(this.position)) {\n          // Marker not in visible area of map, so set center\n          // of map to the marker position first.\n          map.setCenter(this.position);\n        }\n        var mapDiv = map.getDiv(); // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n\n        var mapWidth = mapDiv.offsetWidth; // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n\n        var mapHeight = mapDiv.offsetHeight;\n        var iwOffsetX = this.pixelOffset.width;\n        var iwOffsetY = this.pixelOffset.height;\n        var iwWidth = this.div.offsetWidth;\n        var iwHeight = this.div.offsetHeight;\n        var padX = this.infoBoxClearance.width;\n        var padY = this.infoBoxClearance.height; // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n\n        var projection = this.getProjection();\n        var pixPosition = projection.fromLatLngToContainerPixel(this.position);\n        if (pixPosition.x < -iwOffsetX + padX) {\n          xOffset = pixPosition.x + iwOffsetX - padX;\n        } else if (pixPosition.x + iwWidth + iwOffsetX + padX > mapWidth) {\n          xOffset = pixPosition.x + iwWidth + iwOffsetX + padX - mapWidth;\n        }\n        if (this.alignBottom) {\n          if (pixPosition.y < -iwOffsetY + padY + iwHeight) {\n            yOffset = pixPosition.y + iwOffsetY - padY - iwHeight;\n          } else if (pixPosition.y + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwOffsetY + padY - mapHeight;\n          }\n        } else {\n          if (pixPosition.y < -iwOffsetY + padY) {\n            yOffset = pixPosition.y + iwOffsetY - padY;\n          } else if (pixPosition.y + iwHeight + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwHeight + iwOffsetY + padY - mapHeight;\n          }\n        }\n        if (!(xOffset === 0 && yOffset === 0)) {\n          // Move the map to the shifted center.\n          map.panBy(xOffset, yOffset);\n        }\n      }\n    }\n  };\n  _proto.setBoxStyle = function setBoxStyle() {\n    if (this.div) {\n      // Apply style values from the style sheet defined in the boxClass parameter:\n      this.div.className = this.boxClass; // Clear existing inline style values:\n\n      this.div.style.cssText = ''; // Apply style values defined in the boxStyle parameter:\n\n      var boxStyle = this.boxStyle;\n      for (var i in boxStyle) {\n        if (boxStyle.hasOwnProperty(i)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.div.style[i] = boxStyle[i];\n        }\n      } // Fix for iOS disappearing InfoBox problem\n      // See http://stackoverflow.com/questions/9229535/google-maps-markers-disappear-at-certain-zoom-level-only-on-iphone-ipad\n\n      this.div.style.webkitTransform = 'translateZ(0)'; // Fix up opacity style for benefit of MSIE\n\n      if (typeof this.div.style.opacity !== 'undefined' && this.div.style.opacity !== '') {\n        // See http://www.quirksmode.org/css/opacity.html\n        var opacity = parseFloat(this.div.style.opacity || ''); // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n\n        this.div.style.msFilter = '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity * 100 + ')\"';\n        this.div.style.filter = 'alpha(opacity=' + opacity * 100 + ')';\n      } // Apply required styles\n\n      this.div.style.position = 'absolute';\n      this.div.style.visibility = 'hidden';\n      if (this.zIndex !== null) {\n        this.div.style.zIndex = this.zIndex + '';\n      }\n      if (!this.div.style.overflow) {\n        this.div.style.overflow = 'auto';\n      }\n    }\n  };\n  _proto.getBoxWidths = function getBoxWidths() {\n    var bw = {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n    if (!this.div) {\n      return bw;\n    }\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var ownerDocument = this.div.ownerDocument;\n      var computedStyle = ownerDocument && ownerDocument.defaultView ? ownerDocument.defaultView.getComputedStyle(this.div, '') : null;\n      if (computedStyle) {\n        // The computed styles are always in pixel units (good!)\n        bw.top = parseInt(computedStyle.borderTopWidth || '', 10) || 0;\n        bw.bottom = parseInt(computedStyle.borderBottomWidth || '', 10) || 0;\n        bw.left = parseInt(computedStyle.borderLeftWidth || '', 10) || 0;\n        bw.right = parseInt(computedStyle.borderRightWidth || '', 10) || 0;\n      }\n    } else if (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    document.documentElement.currentStyle // MSIE\n    ) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      var currentStyle = this.div.currentStyle;\n      if (currentStyle) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // The current styles may not be in pixel units, but assume they are (bad!)\n        bw.top = parseInt(currentStyle.borderTopWidth || '', 10) || 0;\n        bw.bottom = parseInt(currentStyle.borderBottomWidth || '', 10) || 0;\n        bw.left = parseInt(currentStyle.borderLeftWidth || '', 10) || 0;\n        bw.right = parseInt(currentStyle.borderRightWidth || '', 10) || 0;\n      }\n    }\n    return bw;\n  };\n  _proto.onRemove = function onRemove() {\n    if (this.div && this.div.parentNode) {\n      this.div.parentNode.removeChild(this.div);\n      this.div = null;\n    }\n  };\n  _proto.draw = function draw() {\n    this.createInfoBoxDiv();\n    if (this.div) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      var projection = this.getProjection();\n      var pixPosition = projection.fromLatLngToDivPixel(this.position);\n      this.div.style.left = pixPosition.x + this.pixelOffset.width + 'px';\n      if (this.alignBottom) {\n        this.div.style.bottom = -(pixPosition.y + this.pixelOffset.height) + 'px';\n      } else {\n        this.div.style.top = pixPosition.y + this.pixelOffset.height + 'px';\n      }\n      if (this.isHidden) {\n        this.div.style.visibility = 'hidden';\n      } else {\n        this.div.style.visibility = 'visible';\n      }\n    }\n  };\n  _proto.setOptions = function setOptions(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (typeof options.boxClass !== 'undefined') {\n      // Must be first\n      this.boxClass = options.boxClass;\n      this.setBoxStyle();\n    }\n    if (typeof options.boxStyle !== 'undefined') {\n      // Must be second\n      this.boxStyle = options.boxStyle;\n      this.setBoxStyle();\n    }\n    if (typeof options.content !== 'undefined') {\n      this.setContent(options.content);\n    }\n    if (typeof options.disableAutoPan !== 'undefined') {\n      this.disableAutoPan = options.disableAutoPan;\n    }\n    if (typeof options.maxWidth !== 'undefined') {\n      this.maxWidth = options.maxWidth;\n    }\n    if (typeof options.pixelOffset !== 'undefined') {\n      this.pixelOffset = options.pixelOffset;\n    }\n    if (typeof options.alignBottom !== 'undefined') {\n      this.alignBottom = options.alignBottom;\n    }\n    if (typeof options.position !== 'undefined') {\n      this.setPosition(options.position);\n    }\n    if (typeof options.zIndex !== 'undefined') {\n      this.setZIndex(options.zIndex);\n    }\n    if (typeof options.closeBoxMargin !== 'undefined') {\n      this.closeBoxMargin = options.closeBoxMargin;\n    }\n    if (typeof options.closeBoxURL !== 'undefined') {\n      this.closeBoxURL = options.closeBoxURL;\n    }\n    if (typeof options.infoBoxClearance !== 'undefined') {\n      this.infoBoxClearance = options.infoBoxClearance;\n    }\n    if (typeof options.isHidden !== 'undefined') {\n      this.isHidden = options.isHidden;\n    }\n    if (typeof options.visible !== 'undefined') {\n      this.isHidden = !options.visible;\n    }\n    if (typeof options.enableEventPropagation !== 'undefined') {\n      this.enableEventPropagation = options.enableEventPropagation;\n    }\n    if (this.div) {\n      this.draw();\n    }\n  };\n  _proto.setContent = function setContent(content) {\n    this.content = content;\n    if (this.div) {\n      if (this.closeListener) {\n        google.maps.event.removeListener(this.closeListener);\n        this.closeListener = null;\n      } // Odd code required to make things work with MSIE.\n\n      if (!this.fixedWidthSet) {\n        this.div.style.width = '';\n      }\n      if (typeof content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + content;\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg();\n        this.div.appendChild(content);\n      } // Perverse code required to make things work with MSIE.\n      // (Ensures the close box does, in fact, float to the right.)\n\n      if (!this.fixedWidthSet) {\n        this.div.style.width = this.div.offsetWidth + 'px';\n        if (typeof content === 'string') {\n          this.div.innerHTML = this.getCloseBoxImg() + content;\n        } else {\n          this.div.innerHTML = this.getCloseBoxImg();\n          this.div.appendChild(content);\n        }\n      }\n      this.addClickHandler();\n    }\n    /**\r\n     * This event is fired when the content of the InfoBox changes.\r\n     * @name InfoBox#content_changed\r\n     * @event\r\n     */\n\n    google.maps.event.trigger(this, 'content_changed');\n  };\n  _proto.setPosition = function setPosition(latLng) {\n    this.position = latLng;\n    if (this.div) {\n      this.draw();\n    }\n    /**\r\n     * This event is fired when the position of the InfoBox changes.\r\n     * @name InfoBox#position_changed\r\n     * @event\r\n     */\n\n    google.maps.event.trigger(this, 'position_changed');\n  };\n  _proto.setVisible = function setVisible(isVisible) {\n    this.isHidden = !isVisible;\n    if (this.div) {\n      this.div.style.visibility = this.isHidden ? 'hidden' : 'visible';\n    }\n  };\n  _proto.setZIndex = function setZIndex(index) {\n    this.zIndex = index;\n    if (this.div) {\n      this.div.style.zIndex = index + '';\n    }\n    /**\r\n     * This event is fired when the zIndex of the InfoBox changes.\r\n     * @name InfoBox#zindex_changed\r\n     * @event\r\n     */\n\n    google.maps.event.trigger(this, 'zindex_changed');\n  };\n  _proto.getContent = function getContent() {\n    return this.content;\n  };\n  _proto.getPosition = function getPosition() {\n    return this.position;\n  };\n  _proto.getZIndex = function getZIndex() {\n    return this.zIndex;\n  };\n  _proto.getVisible = function getVisible() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    var map = this.getMap();\n    var isVisible;\n    if (typeof map === 'undefined' || map === null) {\n      isVisible = false;\n    } else {\n      isVisible = !this.isHidden;\n    }\n    return isVisible;\n  };\n  _proto.show = function show() {\n    this.isHidden = false;\n    if (this.div) {\n      this.div.style.visibility = 'visible';\n    }\n  };\n  _proto.hide = function hide() {\n    this.isHidden = true;\n    if (this.div) {\n      this.div.style.visibility = 'hidden';\n    }\n  };\n  _proto.open = function open(map, anchor) {\n    var _this3 = this;\n    if (anchor) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.position = anchor.getPosition();\n      this.moveListener = google.maps.event.addListener(anchor, 'position_changed',\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      function () {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        var position = anchor.getPosition();\n        _this3.setPosition(position);\n      });\n      this.mapListener = google.maps.event.addListener(anchor, 'map_changed',\n      // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n      function () {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        _this3.setMap(anchor.map);\n      });\n    } // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n\n    this.setMap(map);\n    if (this.div) {\n      this.panBox();\n    }\n  };\n  _proto.close = function close() {\n    if (this.closeListener) {\n      google.maps.event.removeListener(this.closeListener);\n      this.closeListener = null;\n    }\n    if (this.eventListeners) {\n      for (var i = 0; i < this.eventListeners.length; i++) {\n        google.maps.event.removeListener(this.eventListeners[i]);\n      }\n      this.eventListeners = null;\n    }\n    if (this.moveListener) {\n      google.maps.event.removeListener(this.moveListener);\n      this.moveListener = null;\n    }\n    if (this.mapListener) {\n      google.maps.event.removeListener(this.mapListener);\n      this.mapListener = null;\n    }\n    if (this.contextListener) {\n      google.maps.event.removeListener(this.contextListener);\n      this.contextListener = null;\n    } // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n\n    this.setMap(null);\n  };\n  _proto.extend = function extend(obj1, obj2) {\n    return function applyExtend(object) {\n      // eslint-disable-next-line guard-for-in\n      for (var property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        if (!this.prototype.hasOwnProperty(property)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.prototype[property] = object.prototype[property];\n        }\n      } // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n\n      return this;\n    }.apply(obj1, [obj2]);\n  };\n  return InfoBox;\n}();\nexport { InfoBox };","map":{"version":3,"sources":["../src/InfoBox.tsx"],"names":["InfoBox","options","extend","google","maps","OverlayView","content","disableAutoPan","maxWidth","pixelOffset","Size","position","LatLng","zIndex","boxClass","boxStyle","closeBoxMargin","closeBoxURL","infoBoxClearance","visible","isHidden","alignBottom","pane","enableEventPropagation","div","closeListener","moveListener","mapListener","contextListener","eventListeners","fixedWidthSet","createInfoBoxDiv","cancelHandler","event","cancelBubble","stopPropagation","ignoreHandler","returnValue","preventDefault","document","createElement","setBoxStyle","innerHTML","getCloseBoxImg","appendChild","panes","getPanes","addClickHandler","style","width","offsetWidth","bw","getBoxWidths","left","right","panBox","events","i","length","push","addDomListener","cursor","trigger","img","firstChild","closeBox","getCloseClickHandler","close","disablePan","map","getMap","Map","xOffset","yOffset","bounds","getBounds","contains","setCenter","mapDiv","getDiv","mapWidth","mapHeight","offsetHeight","iwOffsetX","iwOffsetY","height","iwWidth","iwHeight","padX","padY","projection","getProjection","pixPosition","fromLatLngToContainerPixel","x","y","panBy","className","cssText","hasOwnProperty","webkitTransform","opacity","parseFloat","msFilter","filter","visibility","overflow","top","bottom","defaultView","getComputedStyle","ownerDocument","computedStyle","parseInt","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","documentElement","currentStyle","onRemove","parentNode","removeChild","draw","fromLatLngToDivPixel","setOptions","setContent","setPosition","setZIndex","removeListener","latLng","setVisible","isVisible","index","getContent","getPosition","getZIndex","getVisible","show","hide","open","anchor","addListener","setMap","obj1","obj2","applyExtend","object","property","prototype","apply"],"mappings":"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","sourcesContent":["/* global google */\n/* eslint-disable filenames/match-regex */\nimport { InfoBoxOptions } from './types'\n\nexport class InfoBox {\n  content: string | Node\n  disableAutoPan: boolean\n  maxWidth: number\n  pixelOffset: google.maps.Size\n  position: google.maps.LatLng\n  zIndex: number | undefined | null\n  boxClass: string\n  boxStyle: {\n    [key: string]: any\n  }\n  closeBoxMargin: string\n  closeBoxURL: string\n  infoBoxClearance: google.maps.Size\n  isHidden: boolean\n  alignBottom: boolean\n  pane: string\n  enableEventPropagation: boolean\n  div: HTMLDivElement | null\n  closeListener: google.maps.MapsEventListener | null\n  moveListener: google.maps.MapsEventListener | null\n  mapListener: google.maps.MapsEventListener | null\n  contextListener: google.maps.MapsEventListener | null\n  eventListeners: google.maps.MapsEventListener[] | null\n  fixedWidthSet: boolean | null\n\n  constructor(options: InfoBoxOptions = {}) {\n    this.extend(InfoBox, google.maps.OverlayView)\n\n    // Standard options (in common with google.maps.InfoWindow):\n    this.content = options.content || ''\n    this.disableAutoPan = options.disableAutoPan || false\n    this.maxWidth = options.maxWidth || 0\n    this.pixelOffset = options.pixelOffset || new google.maps.Size(0, 0)\n    this.position = options.position || new google.maps.LatLng(0, 0)\n    this.zIndex = options.zIndex || null\n\n    // Additional options (unique to InfoBox):\n    this.boxClass = options.boxClass || 'infoBox'\n    this.boxStyle = options.boxStyle || {}\n    this.closeBoxMargin = options.closeBoxMargin || '2px'\n    this.closeBoxURL = options.closeBoxURL || 'http://www.google.com/intl/en_us/mapfiles/close.gif'\n    if (options.closeBoxURL === '') {\n      this.closeBoxURL = ''\n    }\n    this.infoBoxClearance = options.infoBoxClearance || new google.maps.Size(1, 1)\n\n    if (typeof options.visible === 'undefined') {\n      if (typeof options.isHidden === 'undefined') {\n        options.visible = true\n      } else {\n        options.visible = !options.isHidden\n      }\n    }\n    this.isHidden = !options.visible\n\n    this.alignBottom = options.alignBottom || false\n    this.pane = options.pane || 'floatPane'\n    this.enableEventPropagation = options.enableEventPropagation || false\n\n    this.div = null\n    this.closeListener = null\n    this.moveListener = null\n    this.mapListener = null\n    this.contextListener = null\n    this.eventListeners = null\n    this.fixedWidthSet = null\n  }\n\n  createInfoBoxDiv(): void {\n    // This handler prevents an event in the InfoBox from being passed on to the map.\n    function cancelHandler(event: Event) {\n      event.cancelBubble = true\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n    }\n\n    // This handler ignores the current event in the InfoBox and conditionally prevents\n    // the event from being passed on to the map. It is used for the contextmenu event.\n    // eslint-disable-next-line  @getify/proper-arrows/this\n    const ignoreHandler = (event: Event) => {\n      event.returnValue = false\n\n      if (event.preventDefault) {\n        event.preventDefault()\n      }\n\n      if (!this.enableEventPropagation) {\n        cancelHandler(event)\n      }\n    }\n\n    if (!this.div) {\n      this.div = document.createElement('div')\n      this.setBoxStyle()\n\n      if (typeof this.content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + this.content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(this.content)\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const panes = this.getPanes()\n      panes[this.pane].appendChild(this.div) // Add the InfoBox div to the DOM\n\n      this.addClickHandler()\n\n      if (this.div.style.width) {\n        this.fixedWidthSet = true\n      } else {\n        if (this.maxWidth !== 0 && this.div.offsetWidth > this.maxWidth) {\n          this.div.style.width = this.maxWidth + 'px'\n          this.fixedWidthSet = true\n        } else {\n          // The following code is needed to overcome problems with MSIE\n          const bw = this.getBoxWidths()\n          this.div.style.width = this.div.offsetWidth - bw.left - bw.right + 'px'\n          this.fixedWidthSet = false\n        }\n      }\n\n      this.panBox(this.disableAutoPan)\n\n      if (!this.enableEventPropagation) {\n        this.eventListeners = []\n\n        // Cancel event propagation.\n        // Note: mousemove not included (to resolve Issue 152)\n        const events = [\n          'mousedown',\n          'mouseover',\n          'mouseout',\n          'mouseup',\n          'click',\n          'dblclick',\n          'touchstart',\n          'touchend',\n          'touchmove',\n        ]\n\n        for (let i = 0; i < events.length; i++) {\n          this.eventListeners.push(\n            google.maps.event.addDomListener(this.div, events[i], cancelHandler)\n          )\n        }\n\n        // Workaround for Google bug that causes the cursor to change to a pointer\n        // when the mouse moves over a marker underneath InfoBox.\n        this.eventListeners.push(\n          google.maps.event.addDomListener(\n            this.div,\n            'mouseover',\n            // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n            () => {\n              if (this.div) {\n                this.div.style.cursor = 'default'\n              }\n            }\n          )\n        )\n      }\n\n      this.contextListener = google.maps.event.addDomListener(\n        this.div,\n        'contextmenu',\n        ignoreHandler\n      )\n\n      /**\n       * This event is fired when the DIV containing the InfoBox's content is attached to the DOM.\n       * @name InfoBox#domready\n       * @event\n       */\n      google.maps.event.trigger(this, 'domready')\n    }\n  }\n\n  getCloseBoxImg(): string {\n    let img = ''\n\n    if (this.closeBoxURL !== '') {\n      img = '<img alt=\"\"'\n      img += ' aria-hidden=\"true\"'\n      img += \" src='\" + this.closeBoxURL + \"'\"\n      img += ' align=right' // Do this because Opera chokes on style='float: right;'\n      img += \" style='\"\n      img += ' position: relative;' // Required by MSIE\n      img += ' cursor: pointer;'\n      img += ' margin: ' + this.closeBoxMargin + ';'\n      img += \"'>\"\n    }\n\n    return img\n  }\n\n  addClickHandler(): void {\n    if (this.div && this.div.firstChild && this.closeBoxURL !== '') {\n      const closeBox = this.div.firstChild\n      this.closeListener = google.maps.event.addDomListener(\n        closeBox,\n        'click',\n        this.getCloseClickHandler()\n      )\n    } else {\n      this.closeListener = null\n    }\n  }\n\n  getCloseClickHandler() {\n    // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n    return (event: Event) => {\n      // 1.0.3 fix: Always prevent propagation of a close box click to the map:\n      event.cancelBubble = true\n\n      if (event.stopPropagation) {\n        event.stopPropagation()\n      }\n\n      /**\n       * This event is fired when the InfoBox's close box is clicked.\n       * @name InfoBox#closeclick\n       * @event\n       */\n      google.maps.event.trigger(this, 'closeclick')\n\n      this.close()\n    }\n  }\n\n  panBox(disablePan?: boolean): void {\n    if (this.div && !disablePan) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n\n      // Only pan if attached to map, not panorama\n      if (map instanceof google.maps.Map) {\n        let xOffset = 0\n        let yOffset = 0\n\n        const bounds = map.getBounds()\n        if (bounds && !bounds.contains(this.position)) {\n          // Marker not in visible area of map, so set center\n          // of map to the marker position first.\n          map.setCenter(this.position)\n        }\n\n        const mapDiv = map.getDiv()\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapWidth = mapDiv.offsetWidth\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const mapHeight = mapDiv.offsetHeight\n        const iwOffsetX = this.pixelOffset.width\n        const iwOffsetY = this.pixelOffset.height\n        const iwWidth = this.div.offsetWidth\n        const iwHeight = this.div.offsetHeight\n        const padX = this.infoBoxClearance.width\n        const padY = this.infoBoxClearance.height\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        const projection: google.maps.MapCanvasProjection = this.getProjection()\n        const pixPosition = projection.fromLatLngToContainerPixel(this.position)\n\n        if (pixPosition.x < -iwOffsetX + padX) {\n          xOffset = pixPosition.x + iwOffsetX - padX\n        } else if (pixPosition.x + iwWidth + iwOffsetX + padX > mapWidth) {\n          xOffset = pixPosition.x + iwWidth + iwOffsetX + padX - mapWidth\n        }\n        if (this.alignBottom) {\n          if (pixPosition.y < -iwOffsetY + padY + iwHeight) {\n            yOffset = pixPosition.y + iwOffsetY - padY - iwHeight\n          } else if (pixPosition.y + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwOffsetY + padY - mapHeight\n          }\n        } else {\n          if (pixPosition.y < -iwOffsetY + padY) {\n            yOffset = pixPosition.y + iwOffsetY - padY\n          } else if (pixPosition.y + iwHeight + iwOffsetY + padY > mapHeight) {\n            yOffset = pixPosition.y + iwHeight + iwOffsetY + padY - mapHeight\n          }\n        }\n\n        if (!(xOffset === 0 && yOffset === 0)) {\n          // Move the map to the shifted center.\n          map.panBy(xOffset, yOffset)\n        }\n      }\n    }\n  }\n\n  setBoxStyle(): void {\n    if (this.div) {\n      // Apply style values from the style sheet defined in the boxClass parameter:\n      this.div.className = this.boxClass\n\n      // Clear existing inline style values:\n      this.div.style.cssText = ''\n\n      // Apply style values defined in the boxStyle parameter:\n      const boxStyle = this.boxStyle\n      for (const i in boxStyle) {\n        if (boxStyle.hasOwnProperty(i)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.div.style[i] = boxStyle[i]\n        }\n      }\n\n      // Fix for iOS disappearing InfoBox problem\n      // See http://stackoverflow.com/questions/9229535/google-maps-markers-disappear-at-certain-zoom-level-only-on-iphone-ipad\n      this.div.style.webkitTransform = 'translateZ(0)'\n\n      // Fix up opacity style for benefit of MSIE\n      if (typeof this.div.style.opacity !== 'undefined' && this.div.style.opacity !== '') {\n        // See http://www.quirksmode.org/css/opacity.html\n        const opacity = parseFloat(this.div.style.opacity || '')\n\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        this.div.style.msFilter =\n          '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity * 100 + ')\"'\n        this.div.style.filter = 'alpha(opacity=' + opacity * 100 + ')'\n      }\n\n      // Apply required styles\n      this.div.style.position = 'absolute'\n      this.div.style.visibility = 'hidden'\n      if (this.zIndex !== null) {\n        this.div.style.zIndex = this.zIndex + ''\n      }\n      if (!this.div.style.overflow) {\n        this.div.style.overflow = 'auto'\n      }\n    }\n  }\n\n  getBoxWidths(): { bottom: number; left: number; right: number; top: number } {\n    const bw = { top: 0, bottom: 0, left: 0, right: 0 }\n\n    if (!this.div) {\n      return bw\n    }\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      const ownerDocument = this.div.ownerDocument\n      const computedStyle =\n        ownerDocument && ownerDocument.defaultView\n          ? ownerDocument.defaultView.getComputedStyle(this.div, '')\n          : null\n\n      if (computedStyle) {\n        // The computed styles are always in pixel units (good!)\n        bw.top = parseInt(computedStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(computedStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(computedStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(computedStyle.borderRightWidth || '', 10) || 0\n      }\n    } else if (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      document.documentElement.currentStyle // MSIE\n    ) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const currentStyle = this.div.currentStyle\n\n      if (currentStyle) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // The current styles may not be in pixel units, but assume they are (bad!)\n        bw.top = parseInt(currentStyle.borderTopWidth || '', 10) || 0\n        bw.bottom = parseInt(currentStyle.borderBottomWidth || '', 10) || 0\n        bw.left = parseInt(currentStyle.borderLeftWidth || '', 10) || 0\n        bw.right = parseInt(currentStyle.borderRightWidth || '', 10) || 0\n      }\n    }\n\n    return bw\n  }\n\n  onRemove(): void {\n    if (this.div && this.div.parentNode) {\n      this.div.parentNode.removeChild(this.div)\n      this.div = null\n    }\n  }\n\n  draw(): void {\n    this.createInfoBoxDiv()\n\n    if (this.div) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      const projection: google.maps.MapCanvasProjection = this.getProjection()\n      const pixPosition = projection.fromLatLngToDivPixel(this.position)\n\n      this.div.style.left = pixPosition.x + this.pixelOffset.width + 'px'\n\n      if (this.alignBottom) {\n        this.div.style.bottom = -(pixPosition.y + this.pixelOffset.height) + 'px'\n      } else {\n        this.div.style.top = pixPosition.y + this.pixelOffset.height + 'px'\n      }\n\n      if (this.isHidden) {\n        this.div.style.visibility = 'hidden'\n      } else {\n        this.div.style.visibility = 'visible'\n      }\n    }\n  }\n\n  setOptions(options: InfoBoxOptions = {}): void {\n    if (typeof options.boxClass !== 'undefined') {\n      // Must be first\n      this.boxClass = options.boxClass\n      this.setBoxStyle()\n    }\n    if (typeof options.boxStyle !== 'undefined') {\n      // Must be second\n      this.boxStyle = options.boxStyle\n      this.setBoxStyle()\n    }\n    if (typeof options.content !== 'undefined') {\n      this.setContent(options.content)\n    }\n    if (typeof options.disableAutoPan !== 'undefined') {\n      this.disableAutoPan = options.disableAutoPan\n    }\n    if (typeof options.maxWidth !== 'undefined') {\n      this.maxWidth = options.maxWidth\n    }\n    if (typeof options.pixelOffset !== 'undefined') {\n      this.pixelOffset = options.pixelOffset\n    }\n    if (typeof options.alignBottom !== 'undefined') {\n      this.alignBottom = options.alignBottom\n    }\n    if (typeof options.position !== 'undefined') {\n      this.setPosition(options.position)\n    }\n    if (typeof options.zIndex !== 'undefined') {\n      this.setZIndex(options.zIndex)\n    }\n    if (typeof options.closeBoxMargin !== 'undefined') {\n      this.closeBoxMargin = options.closeBoxMargin\n    }\n    if (typeof options.closeBoxURL !== 'undefined') {\n      this.closeBoxURL = options.closeBoxURL\n    }\n    if (typeof options.infoBoxClearance !== 'undefined') {\n      this.infoBoxClearance = options.infoBoxClearance\n    }\n    if (typeof options.isHidden !== 'undefined') {\n      this.isHidden = options.isHidden\n    }\n    if (typeof options.visible !== 'undefined') {\n      this.isHidden = !options.visible\n    }\n    if (typeof options.enableEventPropagation !== 'undefined') {\n      this.enableEventPropagation = options.enableEventPropagation\n    }\n\n    if (this.div) {\n      this.draw()\n    }\n  }\n\n  setContent(content: string | Node): void {\n    this.content = content\n\n    if (this.div) {\n      if (this.closeListener) {\n        google.maps.event.removeListener(this.closeListener)\n        this.closeListener = null\n      }\n\n      // Odd code required to make things work with MSIE.\n      if (!this.fixedWidthSet) {\n        this.div.style.width = ''\n      }\n\n      if (typeof content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + content\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg()\n        this.div.appendChild(content)\n      }\n\n      // Perverse code required to make things work with MSIE.\n      // (Ensures the close box does, in fact, float to the right.)\n      if (!this.fixedWidthSet) {\n        this.div.style.width = this.div.offsetWidth + 'px'\n        if (typeof content === 'string') {\n          this.div.innerHTML = this.getCloseBoxImg() + content\n        } else {\n          this.div.innerHTML = this.getCloseBoxImg()\n          this.div.appendChild(content)\n        }\n      }\n\n      this.addClickHandler()\n    }\n\n    /**\n     * This event is fired when the content of the InfoBox changes.\n     * @name InfoBox#content_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'content_changed')\n  }\n\n  setPosition(latLng: google.maps.LatLng): void {\n    this.position = latLng\n\n    if (this.div) {\n      this.draw()\n    }\n\n    /**\n     * This event is fired when the position of the InfoBox changes.\n     * @name InfoBox#position_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'position_changed')\n  }\n\n  setVisible(isVisible: boolean): void {\n    this.isHidden = !isVisible\n    if (this.div) {\n      this.div.style.visibility = this.isHidden ? 'hidden' : 'visible'\n    }\n  }\n\n  setZIndex(index: number): void {\n    this.zIndex = index\n\n    if (this.div) {\n      this.div.style.zIndex = index + ''\n    }\n\n    /**\n     * This event is fired when the zIndex of the InfoBox changes.\n     * @name InfoBox#zindex_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'zindex_changed')\n  }\n\n  getContent(): string | Node {\n    return this.content\n  }\n\n  getPosition(): google.maps.LatLng {\n    return this.position\n  }\n\n  getZIndex(): number | null | undefined {\n    return this.zIndex\n  }\n\n  getVisible(): boolean {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    const map: google.maps.Map | google.maps.StreetViewPanorama | null | undefined = this.getMap()\n    let isVisible\n\n    if (typeof map === 'undefined' || map === null) {\n      isVisible = false\n    } else {\n      isVisible = !this.isHidden\n    }\n\n    return isVisible\n  }\n\n  show(): void {\n    this.isHidden = false\n    if (this.div) {\n      this.div.style.visibility = 'visible'\n    }\n  }\n\n  hide(): void {\n    this.isHidden = true\n    if (this.div) {\n      this.div.style.visibility = 'hidden'\n    }\n  }\n\n  open(\n    map: google.maps.Map | google.maps.StreetViewPanorama,\n    anchor?: google.maps.MVCObject\n  ): void {\n    if (anchor) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      this.position = anchor.getPosition()\n      this.moveListener = google.maps.event.addListener(\n        anchor,\n        'position_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          const position = anchor.getPosition()\n          this.setPosition(position)\n        }\n      )\n\n      this.mapListener = google.maps.event.addListener(\n        anchor,\n        'map_changed',\n        // eslint-disable-next-line  @getify/proper-arrows/this, @getify/proper-arrows/name\n        () => {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.setMap(anchor.map)\n        }\n      )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(map)\n\n    if (this.div) {\n      this.panBox()\n    }\n  }\n\n  close() {\n    if (this.closeListener) {\n      google.maps.event.removeListener(this.closeListener)\n      this.closeListener = null\n    }\n\n    if (this.eventListeners) {\n      for (let i = 0; i < this.eventListeners.length; i++) {\n        google.maps.event.removeListener(this.eventListeners[i])\n      }\n      this.eventListeners = null\n    }\n\n    if (this.moveListener) {\n      google.maps.event.removeListener(this.moveListener)\n      this.moveListener = null\n    }\n\n    if (this.mapListener) {\n      google.maps.event.removeListener(this.mapListener)\n      this.mapListener = null\n    }\n\n    if (this.contextListener) {\n      google.maps.event.removeListener(this.contextListener)\n      this.contextListener = null\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n    // @ts-ignore\n    this.setMap(null)\n  }\n\n  extend(obj1: any, obj2: any): any {\n    return function applyExtend(object: any) {\n      // eslint-disable-next-line guard-for-in\n      for (const property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n        // @ts-ignore\n        if (!this.prototype.hasOwnProperty(property)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n          // @ts-ignore\n          this.prototype[property] = object.prototype[property]\n        }\n      }\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      return this\n    }.apply(obj1, [obj2])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}