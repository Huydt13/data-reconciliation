{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\cds\\\\src\\\\profile\\\\components\\\\ProfileTableSearchSection.js\";\n/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { FiFileText, FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\nimport { getProfilesWithouDispatch } from 'profile/actions/profile';\nimport { DataTable } from 'app/components/shared';\nimport { formatToYear, renderGender, renderProfileKey } from 'app/utils/helpers';\nimport ProfileTableSearchFilter from './ProfileTableSearchFilter';\nconst shrinkColumn = [{\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 20\n}];\nconst expandColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 50\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref => {\n    let {\n      dateOfBirth\n    } = _ref;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Giới tính',\n  formatter: renderGender\n}, {\n  Header: 'Số điện thoại',\n  formatter: _ref2 => {\n    let {\n      phoneNumber\n    } = _ref2;\n    return phoneNumber;\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey\n}];\nconst normalColumns = [{\n  Header: '#',\n  accessor: 'index'\n}, {\n  Header: 'Họ và tên',\n  formatter: r => r.fullName,\n  cutlength: 25\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref3 => {\n    let {\n      dateOfBirth\n    } = _ref3;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Số điện thoại',\n  formatter: _ref4 => {\n    let {\n      phoneNumber\n    } = _ref4;\n    return phoneNumber;\n  }\n}, {\n  Header: 'Địa chỉ nhà',\n  formatter: renderProfileKey,\n  cutlength: 20\n}];\nconst ProfileTableSearchSection = _ref5 => {\n  let {\n    isShrink,\n    isNormal,\n    isCloseFilter,\n    selectingList,\n    onChange\n  } = _ref5;\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n  const rowActions = useMemo(() => [{\n    icon: /*#__PURE__*/React.createElement(FiFileText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }),\n    title: 'Hồ sơ',\n    color: 'blue',\n    onClick: r => {\n      window.open(`/profile/${r === null || r === void 0 ? void 0 : r.id}`, '_blank');\n    }\n  }, {\n    icon: /*#__PURE__*/React.createElement(FiArrowRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }),\n    title: 'Chọn',\n    color: 'green',\n    onClick: onChange,\n    hidden: r => selectingList.map(s => s.id).includes(r.id)\n  }], [selectingList, onChange]);\n  const handleFilter = value => {\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!_.isEqual(value, filter)) {\n      setFilter(value);\n    }\n  };\n  useEffect(() => {\n    setFetching(true);\n    getProfilesWithouDispatch({\n      ...filter,\n      hasGroupProfiles: false,\n      pageSize,\n      pageIndex\n    }).then(_ref6 => {\n      let {\n        data: dataRes,\n        totalPages\n      } = _ref6;\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageIndex, pageSize]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    as: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"Danh s\\xE1ch h\\u1ED3 s\\u01A1 trong h\\u1EC7 th\\u1ED1ng\"), /*#__PURE__*/React.createElement(ProfileTableSearchFilter, {\n    isCloseFilter: isCloseFilter,\n    onChange: handleFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    noPaging: isShrink,\n    columns: isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns,\n    data: (data || []).map((r, i) => ({\n      ...r,\n      index: i + 1\n    })),\n    loading: fetching,\n    pageCount: pageCount,\n    onPaginationChange: p => {\n      setPageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: isShrink ? [] : rowActions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }));\n};\nProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool\n};\nProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false\n};\nexport default ProfileTableSearchSection;","map":{"version":3,"names":["React","useEffect","useMemo","useState","PropTypes","_","FiFileText","FiArrowRight","Header","getProfilesWithouDispatch","DataTable","formatToYear","renderGender","renderProfileKey","ProfileTableSearchFilter","shrinkColumn","formatter","r","fullName","cutlength","expandColumns","accessor","_ref","dateOfBirth","_ref2","phoneNumber","normalColumns","_ref3","_ref4","ProfileTableSearchSection","_ref5","isShrink","isNormal","isCloseFilter","selectingList","onChange","data","setData","pageCount","setPageCount","fetching","setFetching","pageIndex","setPageIndex","pageSize","setPageSize","filter","setFilter","rowActions","icon","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","color","onClick","window","open","id","hidden","map","s","includes","handleFilter","value","isEqual","hasGroupProfiles","then","_ref6","dataRes","totalPages","Fragment","as","noPaging","columns","i","index","loading","onPaginationChange","p","actions","propTypes","arrayOf","shape","func","isRequired","bool","defaultProps"],"sources":["H:/BAKCO/pj/cds/src/profile/components/ProfileTableSearchSection.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nimport { FiFileText, FiArrowRight } from 'react-icons/fi';\nimport { Header } from 'semantic-ui-react';\n\nimport { getProfilesWithouDispatch } from 'profile/actions/profile';\n\nimport { DataTable } from 'app/components/shared';\nimport {\n  formatToYear,\n  renderGender,\n  renderProfileKey,\n} from 'app/utils/helpers';\nimport ProfileTableSearchFilter from './ProfileTableSearchFilter';\n\nconst shrinkColumn = [\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 20 },\n];\nconst expandColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 50 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Giới tính',\n    formatter: renderGender,\n  },\n  {\n    Header: 'Số điện thoại',\n    formatter: ({ phoneNumber }) => phoneNumber,\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n  },\n];\nconst normalColumns = [\n  {\n    Header: '#',\n    accessor: 'index',\n  },\n  { Header: 'Họ và tên', formatter: (r) => r.fullName, cutlength: 25 },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ dateOfBirth }) => formatToYear(dateOfBirth),\n  },\n  {\n    Header: 'Số điện thoại',\n    formatter: ({ phoneNumber }) => phoneNumber,\n  },\n  {\n    Header: 'Địa chỉ nhà',\n    formatter: renderProfileKey,\n    cutlength: 20,\n  },\n];\n\nconst ProfileTableSearchSection = ({\n  isShrink,\n  isNormal,\n  isCloseFilter,\n  selectingList,\n  onChange,\n}) => {\n  const [data, setData] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [fetching, setFetching] = useState(false);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [filter, setFilter] = useState({});\n\n  const rowActions = useMemo(\n    () => [\n      {\n        icon: <FiFileText />,\n        title: 'Hồ sơ',\n        color: 'blue',\n        onClick: (r) => {\n          window.open(`/profile/${r?.id}`, '_blank');\n        },\n      },\n\n      {\n        icon: <FiArrowRight />,\n        title: 'Chọn',\n        color: 'green',\n        onClick: onChange,\n        hidden: (r) => selectingList.map((s) => s.id).includes(r.id),\n      },\n    ],\n    [selectingList, onChange],\n  );\n\n  const handleFilter = (value) => {\n    // eslint-disable-next-line no-extra-boolean-cast\n    if (!_.isEqual(value, filter)) {\n      setFilter(value);\n    }\n  };\n\n  useEffect(() => {\n    setFetching(true);\n    getProfilesWithouDispatch({\n      ...filter,\n      hasGroupProfiles: false,\n      pageSize,\n      pageIndex,\n    }).then(({ data: dataRes, totalPages }) => {\n      setData(dataRes);\n      setPageCount(totalPages);\n      setFetching(false);\n    });\n  }, [filter, pageIndex, pageSize]);\n\n  return (\n    <>\n      <Header as=\"h3\">Danh sách hồ sơ trong hệ thống</Header>\n      <ProfileTableSearchFilter\n        isCloseFilter={isCloseFilter}\n        onChange={handleFilter}\n      />\n      <DataTable\n        noPaging={isShrink}\n        columns={\n          isShrink ? shrinkColumn : isNormal ? normalColumns : expandColumns\n        }\n        data={(data || []).map((r, i) => ({ ...r, index: i + 1 }))}\n        loading={fetching}\n        pageCount={pageCount}\n        onPaginationChange={(p) => {\n          setPageIndex(p.pageIndex);\n          setPageSize(p.pageSize);\n        }}\n        actions={isShrink ? [] : rowActions}\n      />\n    </>\n  );\n};\n\nProfileTableSearchSection.propTypes = {\n  selectingList: PropTypes.arrayOf(PropTypes.shape()),\n  onChange: PropTypes.func.isRequired,\n  isCloseFilter: PropTypes.bool,\n  isShrink: PropTypes.bool,\n  isNormal: PropTypes.bool,\n};\n\nProfileTableSearchSection.defaultProps = {\n  selectingList: [],\n  isCloseFilter: true,\n  isShrink: false,\n  isNormal: false,\n};\n\nexport default ProfileTableSearchSection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}