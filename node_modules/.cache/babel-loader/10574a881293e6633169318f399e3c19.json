{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\chain\\\\components\\\\ChainSubjectsTable.js\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Label } from 'semantic-ui-react';\nimport { FiFileText } from 'react-icons/fi';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getChainDetail, getChainSubjects } from 'chain/actions/chain';\nimport { formatToYear } from 'app/utils/helpers';\nimport { DataTable } from 'app/components/shared';\nimport ContactBySubjectTable from './ContactBySubjectTable';\nconst columns = [{\n  Header: 'Loại',\n  formatter: row => {\n    var _row$infectionType$co, _row$infectionType, _row$infectionType$na, _row$infectionType2;\n    return /*#__PURE__*/React.createElement(Label, {\n      basic: true,\n      color: (_row$infectionType$co = row === null || row === void 0 ? void 0 : (_row$infectionType = row.infectionType) === null || _row$infectionType === void 0 ? void 0 : _row$infectionType.colorCode) !== null && _row$infectionType$co !== void 0 ? _row$infectionType$co : 'black',\n      content: (_row$infectionType$na = row === null || row === void 0 ? void 0 : (_row$infectionType2 = row.infectionType) === null || _row$infectionType2 === void 0 ? void 0 : _row$infectionType2.name) !== null && _row$infectionType$na !== void 0 ? _row$infectionType$na : 'F?',\n      className: \"type-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 7\n      }\n    });\n  }\n}, {\n  Header: 'Họ và tên',\n  formatter: _ref => {\n    let {\n      profileDetail: {\n        fullName\n      }\n    } = _ref;\n    return fullName;\n  }\n}, {\n  Header: 'Năm sinh',\n  formatter: _ref2 => {\n    let {\n      profileDetail: {\n        dateOfBirth\n      }\n    } = _ref2;\n    return formatToYear(dateOfBirth);\n  }\n}, {\n  Header: 'Căn cước',\n  formatter: _ref3 => {\n    let {\n      profileDetail: {\n        cccd\n      }\n    } = _ref3;\n    return cccd;\n  }\n}, {\n  Header: 'Chứng minh',\n  formatter: _ref4 => {\n    let {\n      profileDetail: {\n        cmnd\n      }\n    } = _ref4;\n    return cmnd;\n  }\n}, {\n  Header: 'Hộ chiếu',\n  formatter: _ref5 => {\n    let {\n      profileDetail: {\n        passportNumber\n      }\n    } = _ref5;\n    return passportNumber;\n  }\n}, {\n  Header: 'Bảo hiểm',\n  formatter: _ref6 => {\n    let {\n      profileDetail: {\n        healthInsuranceNumber\n      }\n    } = _ref6;\n    return healthInsuranceNumber;\n  }\n}];\nconst ChainSubjectsTable = _ref7 => {\n  let {\n    chainId\n  } = _ref7;\n  const dispatch = useDispatch();\n  const {\n    getChainDetailLoading,\n    chainSubjectsData: {\n      data,\n      totalPages\n    },\n    getChainSubjectsLoading\n  } = useSelector(s => s.chain);\n  const loading = getChainDetailLoading || getChainSubjectsLoading;\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const getChainData = useCallback(() => {\n    dispatch(getChainDetail(chainId));\n  }, [dispatch, chainId]);\n  const getChainSubjectsData = useCallback(() => {\n    dispatch(getChainSubjects({\n      chainId,\n      pageSize,\n      pageIndex\n    }));\n  }, [dispatch, chainId, pageSize, pageIndex]);\n  useEffect(() => {\n    getChainData();\n    getChainSubjectsData();\n  }, [getChainData, getChainSubjectsData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    title: \"Danh s\\xE1ch \\u0111\\u1ED1i t\\u01B0\\u1EE3ng\",\n    loading: loading,\n    columns: columns,\n    data: (data || []).map((d, i) => ({\n      ...d,\n      index: i + 1,\n      profileDetail: d.profileDetail || {\n        fullName: '',\n        dateOfBirth: '',\n        cccd: '',\n        cmnd: '',\n        passportNumber: '',\n        healthInsuranceNumber: ''\n      }\n    })),\n    onPaginationChange: _ref8 => {\n      let {\n        pageSize: ps,\n        pageIndex: pi\n      } = _ref8;\n      setPageIndex(pi);\n      setPageSize(ps);\n    },\n    pageCount: totalPages,\n    actions: [{\n      icon: /*#__PURE__*/React.createElement(FiFileText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      }),\n      title: 'Hồ sơ',\n      color: 'blue',\n      onClick: _ref9 => {\n        let {\n          profileId: pId\n        } = _ref9;\n        return window.open(`/profile/${pId}/infection-chain/${chainId}`, '_blank');\n      }\n    }],\n    subComponent: _ref10 => {\n      var _infectionType$id;\n      let {\n        id: subjectId,\n        profileId,\n        infectionType,\n        profileDetail: {\n          fullName\n        }\n      } = _ref10;\n      return /*#__PURE__*/React.createElement(ContactBySubjectTable, {\n        chainId: chainId,\n        subjectId: subjectId,\n        infectionTypeId: (_infectionType$id = infectionType === null || infectionType === void 0 ? void 0 : infectionType.id) !== null && _infectionType$id !== void 0 ? _infectionType$id : '',\n        profileId: profileId,\n        profileName: fullName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n};\nChainSubjectsTable.propTypes = {\n  chainId: PropTypes.string\n};\nChainSubjectsTable.defaultProps = {\n  chainId: ''\n};\nexport default ChainSubjectsTable;","map":{"version":3,"names":["React","useCallback","useEffect","useState","PropTypes","Label","FiFileText","useDispatch","useSelector","getChainDetail","getChainSubjects","formatToYear","DataTable","ContactBySubjectTable","columns","Header","formatter","row","_row$infectionType$co","_row$infectionType","_row$infectionType$na","_row$infectionType2","createElement","basic","color","infectionType","colorCode","content","name","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_ref","profileDetail","fullName","_ref2","dateOfBirth","_ref3","cccd","_ref4","cmnd","_ref5","passportNumber","_ref6","healthInsuranceNumber","ChainSubjectsTable","_ref7","chainId","dispatch","getChainDetailLoading","chainSubjectsData","data","totalPages","getChainSubjectsLoading","s","chain","loading","pageIndex","setPageIndex","pageSize","setPageSize","getChainData","getChainSubjectsData","title","map","d","i","index","onPaginationChange","_ref8","ps","pi","pageCount","actions","icon","onClick","_ref9","profileId","pId","window","open","subComponent","_ref10","_infectionType$id","id","subjectId","infectionTypeId","profileName","propTypes","string","defaultProps"],"sources":["H:/BAKCO/pj/data reconciliation/src/chain/components/ChainSubjectsTable.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Label } from 'semantic-ui-react';\nimport { FiFileText } from 'react-icons/fi';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getChainDetail, getChainSubjects } from 'chain/actions/chain';\n\nimport { formatToYear } from 'app/utils/helpers';\n\nimport { DataTable } from 'app/components/shared';\nimport ContactBySubjectTable from './ContactBySubjectTable';\n\nconst columns = [\n  {\n    Header: 'Loại',\n    formatter: (row) => (\n      <Label\n        basic\n        color={row?.infectionType?.colorCode ?? 'black'}\n        content={row?.infectionType?.name ?? 'F?'}\n        className=\"type-label\"\n      />\n    ),\n  },\n  {\n    Header: 'Họ và tên',\n    formatter: ({ profileDetail: { fullName } }) => fullName,\n  },\n  {\n    Header: 'Năm sinh',\n    formatter: ({ profileDetail: { dateOfBirth } }) =>\n      formatToYear(dateOfBirth),\n  },\n  { Header: 'Căn cước', formatter: ({ profileDetail: { cccd } }) => cccd },\n  { Header: 'Chứng minh', formatter: ({ profileDetail: { cmnd } }) => cmnd },\n  {\n    Header: 'Hộ chiếu',\n    formatter: ({ profileDetail: { passportNumber } }) => passportNumber,\n  },\n  {\n    Header: 'Bảo hiểm',\n    formatter: ({ profileDetail: { healthInsuranceNumber } }) =>\n      healthInsuranceNumber,\n  },\n];\n\nconst ChainSubjectsTable = ({ chainId }) => {\n  const dispatch = useDispatch();\n  const {\n    getChainDetailLoading,\n    chainSubjectsData: { data, totalPages },\n    getChainSubjectsLoading,\n  } = useSelector((s) => s.chain);\n\n  const loading = getChainDetailLoading || getChainSubjectsLoading;\n\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n\n  const getChainData = useCallback(() => {\n    dispatch(getChainDetail(chainId));\n  }, [dispatch, chainId]);\n\n  const getChainSubjectsData = useCallback(() => {\n    dispatch(getChainSubjects({ chainId, pageSize, pageIndex }));\n  }, [dispatch, chainId, pageSize, pageIndex]);\n\n  useEffect(() => {\n    getChainData();\n    getChainSubjectsData();\n  }, [getChainData, getChainSubjectsData]);\n  return (\n    <div>\n      <DataTable\n        title=\"Danh sách đối tượng\"\n        loading={loading}\n        columns={columns}\n        data={(data || []).map((d, i) => ({\n          ...d,\n          index: i + 1,\n          profileDetail: d.profileDetail || {\n            fullName: '',\n            dateOfBirth: '',\n            cccd: '',\n            cmnd: '',\n            passportNumber: '',\n            healthInsuranceNumber: '',\n          },\n        }))}\n        onPaginationChange={({ pageSize: ps, pageIndex: pi }) => {\n          setPageIndex(pi);\n          setPageSize(ps);\n        }}\n        pageCount={totalPages}\n        actions={[\n          {\n            icon: <FiFileText />,\n            title: 'Hồ sơ',\n            color: 'blue',\n            onClick: ({ profileId: pId }) =>\n              window.open(\n                `/profile/${pId}/infection-chain/${chainId}`,\n                '_blank',\n              ),\n          },\n        ]}\n        subComponent={({\n          id: subjectId,\n          profileId,\n          infectionType,\n          profileDetail: { fullName },\n        }) => (\n          <ContactBySubjectTable\n            chainId={chainId}\n            subjectId={subjectId}\n            infectionTypeId={infectionType?.id ?? ''}\n            profileId={profileId}\n            profileName={fullName}\n          />\n        )}\n      />\n    </div>\n  );\n};\n\nChainSubjectsTable.propTypes = {\n  chainId: PropTypes.string,\n};\n\nChainSubjectsTable.defaultProps = {\n  chainId: '',\n};\n\nexport default ChainSubjectsTable;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC/D,OAAOC,SAAS,MAAM,YAAY;AAElC,SAASC,KAAK,QAAQ,mBAAmB;AACzC,SAASC,UAAU,QAAQ,gBAAgB;AAE3C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,cAAc,EAAEC,gBAAgB,QAAQ,qBAAqB;AAEtE,SAASC,YAAY,QAAQ,mBAAmB;AAEhD,SAASC,SAAS,QAAQ,uBAAuB;AACjD,OAAOC,qBAAqB,MAAM,yBAAyB;AAE3D,MAAMC,OAAO,GAAG,CACd;EACEC,MAAM,EAAE,MAAM;EACdC,SAAS,EAAGC,GAAG;IAAA,IAAAC,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,mBAAA;IAAA,oBACbrB,KAAA,CAAAsB,aAAA,CAACjB,KAAK;MACJkB,KAAK;MACLC,KAAK,GAAAN,qBAAA,GAAED,GAAG,aAAHA,GAAG,wBAAAE,kBAAA,GAAHF,GAAG,CAAEQ,aAAa,cAAAN,kBAAA,uBAAlBA,kBAAA,CAAoBO,SAAS,cAAAR,qBAAA,cAAAA,qBAAA,GAAI,OAAQ;MAChDS,OAAO,GAAAP,qBAAA,GAAEH,GAAG,aAAHA,GAAG,wBAAAI,mBAAA,GAAHJ,GAAG,CAAEQ,aAAa,cAAAJ,mBAAA,uBAAlBA,mBAAA,CAAoBO,IAAI,cAAAR,qBAAA,cAAAA,qBAAA,GAAI,IAAK;MAC1CS,SAAS,EAAC,YAAY;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,EACtB;EAAA;AAEN,CAAC,EACD;EACEpB,MAAM,EAAE,WAAW;EACnBC,SAAS,EAAEoB,IAAA;IAAA,IAAC;MAAEC,aAAa,EAAE;QAAEC;MAAS;IAAE,CAAC,GAAAF,IAAA;IAAA,OAAKE,QAAQ;EAAA;AAC1D,CAAC,EACD;EACEvB,MAAM,EAAE,UAAU;EAClBC,SAAS,EAAEuB,KAAA;IAAA,IAAC;MAAEF,aAAa,EAAE;QAAEG;MAAY;IAAE,CAAC,GAAAD,KAAA;IAAA,OAC5C5B,YAAY,CAAC6B,WAAW,CAAC;EAAA;AAC7B,CAAC,EACD;EAAEzB,MAAM,EAAE,UAAU;EAAEC,SAAS,EAAEyB,KAAA;IAAA,IAAC;MAAEJ,aAAa,EAAE;QAAEK;MAAK;IAAE,CAAC,GAAAD,KAAA;IAAA,OAAKC,IAAI;EAAA;AAAC,CAAC,EACxE;EAAE3B,MAAM,EAAE,YAAY;EAAEC,SAAS,EAAE2B,KAAA;IAAA,IAAC;MAAEN,aAAa,EAAE;QAAEO;MAAK;IAAE,CAAC,GAAAD,KAAA;IAAA,OAAKC,IAAI;EAAA;AAAC,CAAC,EAC1E;EACE7B,MAAM,EAAE,UAAU;EAClBC,SAAS,EAAE6B,KAAA;IAAA,IAAC;MAAER,aAAa,EAAE;QAAES;MAAe;IAAE,CAAC,GAAAD,KAAA;IAAA,OAAKC,cAAc;EAAA;AACtE,CAAC,EACD;EACE/B,MAAM,EAAE,UAAU;EAClBC,SAAS,EAAE+B,KAAA;IAAA,IAAC;MAAEV,aAAa,EAAE;QAAEW;MAAsB;IAAE,CAAC,GAAAD,KAAA;IAAA,OACtDC,qBAAqB;EAAA;AACzB,CAAC,CACF;AAED,MAAMC,kBAAkB,GAAGC,KAAA,IAAiB;EAAA,IAAhB;IAAEC;EAAQ,CAAC,GAAAD,KAAA;EACrC,MAAME,QAAQ,GAAG7C,WAAW,EAAE;EAC9B,MAAM;IACJ8C,qBAAqB;IACrBC,iBAAiB,EAAE;MAAEC,IAAI;MAAEC;IAAW,CAAC;IACvCC;EACF,CAAC,GAAGjD,WAAW,CAAEkD,CAAC,IAAKA,CAAC,CAACC,KAAK,CAAC;EAE/B,MAAMC,OAAO,GAAGP,qBAAqB,IAAII,uBAAuB;EAEhE,MAAM,CAACI,SAAS,EAAEC,YAAY,CAAC,GAAG3D,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAAC4D,QAAQ,EAAEC,WAAW,CAAC,GAAG7D,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAM8D,YAAY,GAAGhE,WAAW,CAAC,MAAM;IACrCmD,QAAQ,CAAC3C,cAAc,CAAC0C,OAAO,CAAC,CAAC;EACnC,CAAC,EAAE,CAACC,QAAQ,EAAED,OAAO,CAAC,CAAC;EAEvB,MAAMe,oBAAoB,GAAGjE,WAAW,CAAC,MAAM;IAC7CmD,QAAQ,CAAC1C,gBAAgB,CAAC;MAAEyC,OAAO;MAAEY,QAAQ;MAAEF;IAAU,CAAC,CAAC,CAAC;EAC9D,CAAC,EAAE,CAACT,QAAQ,EAAED,OAAO,EAAEY,QAAQ,EAAEF,SAAS,CAAC,CAAC;EAE5C3D,SAAS,CAAC,MAAM;IACd+D,YAAY,EAAE;IACdC,oBAAoB,EAAE;EACxB,CAAC,EAAE,CAACD,YAAY,EAAEC,oBAAoB,CAAC,CAAC;EACxC,oBACElE,KAAA,CAAAsB,aAAA;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEnC,KAAA,CAAAsB,aAAA,CAACV,SAAS;IACRuD,KAAK,EAAC,4CAAqB;IAC3BP,OAAO,EAAEA,OAAQ;IACjB9C,OAAO,EAAEA,OAAQ;IACjByC,IAAI,EAAE,CAACA,IAAI,IAAI,EAAE,EAAEa,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,MAAM;MAChC,GAAGD,CAAC;MACJE,KAAK,EAAED,CAAC,GAAG,CAAC;MACZjC,aAAa,EAAEgC,CAAC,CAAChC,aAAa,IAAI;QAChCC,QAAQ,EAAE,EAAE;QACZE,WAAW,EAAE,EAAE;QACfE,IAAI,EAAE,EAAE;QACRE,IAAI,EAAE,EAAE;QACRE,cAAc,EAAE,EAAE;QAClBE,qBAAqB,EAAE;MACzB;IACF,CAAC,CAAC,CAAE;IACJwB,kBAAkB,EAAEC,KAAA,IAAqC;MAAA,IAApC;QAAEV,QAAQ,EAAEW,EAAE;QAAEb,SAAS,EAAEc;MAAG,CAAC,GAAAF,KAAA;MAClDX,YAAY,CAACa,EAAE,CAAC;MAChBX,WAAW,CAACU,EAAE,CAAC;IACjB,CAAE;IACFE,SAAS,EAAEpB,UAAW;IACtBqB,OAAO,EAAE,CACP;MACEC,IAAI,eAAE9E,KAAA,CAAAsB,aAAA,CAAChB,UAAU;QAAAwB,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,EAAG;MACpBgC,KAAK,EAAE,OAAO;MACd3C,KAAK,EAAE,MAAM;MACbuD,OAAO,EAAEC,KAAA;QAAA,IAAC;UAAEC,SAAS,EAAEC;QAAI,CAAC,GAAAF,KAAA;QAAA,OAC1BG,MAAM,CAACC,IAAI,CACR,YAAWF,GAAI,oBAAmB/B,OAAQ,EAAC,EAC5C,QAAQ,CACT;MAAA;IACL,CAAC,CACD;IACFkC,YAAY,EAAEC,MAAA;MAAA,IAAAC,iBAAA;MAAA,IAAC;QACbC,EAAE,EAAEC,SAAS;QACbR,SAAS;QACTxD,aAAa;QACbY,aAAa,EAAE;UAAEC;QAAS;MAC5B,CAAC,GAAAgD,MAAA;MAAA,oBACCtF,KAAA,CAAAsB,aAAA,CAACT,qBAAqB;QACpBsC,OAAO,EAAEA,OAAQ;QACjBsC,SAAS,EAAEA,SAAU;QACrBC,eAAe,GAAAH,iBAAA,GAAE9D,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE+D,EAAE,cAAAD,iBAAA,cAAAA,iBAAA,GAAI,EAAG;QACzCN,SAAS,EAAEA,SAAU;QACrBU,WAAW,EAAErD,QAAS;QAAAR,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,EACtB;IAAA,CACF;IAAAL,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACF,CACE;AAEV,CAAC;AAEDc,kBAAkB,CAAC2C,SAAS,GAAG;EAC7BzC,OAAO,EAAE/C,SAAS,CAACyF;AACrB,CAAC;AAED5C,kBAAkB,CAAC6C,YAAY,GAAG;EAChC3C,OAAO,EAAE;AACX,CAAC;AAED,eAAeF,kBAAkB"},"metadata":{},"sourceType":"module"}