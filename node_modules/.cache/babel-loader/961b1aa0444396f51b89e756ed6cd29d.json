{"ast":null,"code":"var _jsxFileName = \"H:\\\\BAKCO\\\\pj\\\\data reconciliation\\\\src\\\\contact\\\\components\\\\contact-vehicle\\\\ContactVehicleTable.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Button } from 'semantic-ui-react';\nimport { FiEye, FiTrash2, FiArrowLeft, FiCheck } from 'react-icons/fi';\nimport styled from 'styled-components';\nimport { showConfirmModal } from 'app/actions/global';\nimport { DataTable } from 'app/components/shared';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getContactVehicles, deleteContactVehicle, createContactVehicle, updateContactVehicle } from '../../actions/contact';\nimport ContactVehicleForm from './ContactVehicleForm';\nimport ContactVehicleFilter from './ContactVehicleFilter';\nconst BackButton = styled(Button)`\n  margin-bottom: 16px !important;\n`;\nconst columns = [{\n  Header: 'Tên phương tiện',\n  accessor: 'vehicleName'\n}, {\n  Header: 'Loại hình',\n  accessor: 'vehicleType'\n}, {\n  Header: 'Điểm khởi hành',\n  accessor: 'from'\n}, {\n  Header: 'Điểm đến',\n  accessor: 'to'\n}, {\n  Header: 'Điểm nóng',\n  formatter: row => row.isHotpost ? /*#__PURE__*/React.createElement(FiCheck, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 63\n    }\n  }) : ''\n}];\nconst ContactVehicleTable = () => {\n  const dispatch = useDispatch();\n  const [filter, setFilter] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const [modal, setModal] = useState({\n    isOpen: false,\n    data: {}\n  });\n  const {\n    contactVehicleList,\n    loadingGetContactVehicle,\n    loadingCreateContactVehicle,\n    loadingUpdateContactVehicle,\n    loadingDeleteContactVehicle\n  } = useSelector(state => state.contact);\n  const handleRefresh = () => {\n    // dispatch(getContactVehicles());\n    dispatch(getContactVehicles({\n      ...filter,\n      pageIndex,\n      pageSize\n    }));\n  };\n\n  // eslint-disable-next-line\n  useEffect(() => {\n    handleRefresh();\n  }, [filter, pageIndex, pageSize]);\n  const handleSubmit = data => {\n    setModal({\n      isOpen: false,\n      data: {}\n    });\n    if (data.id) {\n      dispatch(updateContactVehicle(data)).then(() => {\n        handleRefresh();\n      });\n    } else {\n      dispatch(createContactVehicle(data)).then(() => {\n        handleRefresh();\n      });\n    }\n  };\n  useEffect(contactVehicleList.length === 0 ? handleRefresh : () => {}, []);\n  const {\n    data,\n    pageCount\n  } = contactVehicleList;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !modal.isOpen && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContactVehicleFilter, {\n    onChange: e => {\n      setFilter(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    title: \"Ph\\u01B0\\u01A1ng ti\\u1EC7n ti\\u1EBFp x\\xFAc\",\n    columns: columns,\n    data: data || [].map((d, i) => ({\n      ...d,\n      index: i + 1\n    })),\n    loading: loadingGetContactVehicle || loadingCreateContactVehicle || loadingUpdateContactVehicle || loadingDeleteContactVehicle,\n    pageCount: pageCount,\n    onPaginationChange: p => {\n      setPageIndex(p.pageIndex);\n      setPageSize(p.pageSize);\n    },\n    actions: [{\n      icon: /*#__PURE__*/React.createElement(FiEye, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 23\n        }\n      }),\n      title: 'Chi tiết',\n      color: 'blue',\n      onClick: row => {\n        setModal({\n          isOpen: true,\n          data: row\n        });\n      }\n    }, {\n      icon: /*#__PURE__*/React.createElement(FiTrash2, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 23\n        }\n      }),\n      title: 'Xóa',\n      color: 'red',\n      onClick: row => dispatch(showConfirmModal('Xác nhận xóa?', () => {\n        dispatch(deleteContactVehicle(row.id)).then(() => {\n          handleRefresh();\n        });\n      }))\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  })), modal.isOpen && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BackButton, {\n    basic: true,\n    animated: true,\n    onClick: () => {\n      setModal({\n        isOpen: false,\n        data: {}\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button.Content, {\n    visible: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \"Tr\\u1EDD v\\u1EC1\"), /*#__PURE__*/React.createElement(Button.Content, {\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FiArrowLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(ContactVehicleForm, {\n    initialData: modal.data,\n    onSubmit: d => handleSubmit(d),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  })));\n};\nexport default ContactVehicleTable;","map":{"version":3,"names":["React","useState","useEffect","Button","FiEye","FiTrash2","FiArrowLeft","FiCheck","styled","showConfirmModal","DataTable","useDispatch","useSelector","getContactVehicles","deleteContactVehicle","createContactVehicle","updateContactVehicle","ContactVehicleForm","ContactVehicleFilter","BackButton","columns","Header","accessor","formatter","row","isHotpost","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ContactVehicleTable","dispatch","filter","setFilter","pageIndex","setPageIndex","pageSize","setPageSize","modal","setModal","isOpen","data","contactVehicleList","loadingGetContactVehicle","loadingCreateContactVehicle","loadingUpdateContactVehicle","loadingDeleteContactVehicle","state","contact","handleRefresh","handleSubmit","id","then","length","pageCount","Fragment","onChange","e","title","map","d","i","index","loading","onPaginationChange","p","actions","icon","color","onClick","basic","animated","Content","visible","hidden","initialData","onSubmit"],"sources":["H:/BAKCO/pj/data reconciliation/src/contact/components/contact-vehicle/ContactVehicleTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button } from 'semantic-ui-react';\nimport {\n  FiEye,\n  FiTrash2,\n  FiArrowLeft,\n  FiCheck,\n} from 'react-icons/fi';\nimport styled from 'styled-components';\n\nimport { showConfirmModal } from 'app/actions/global';\nimport { DataTable } from 'app/components/shared';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getContactVehicles,\n  deleteContactVehicle,\n  createContactVehicle,\n  updateContactVehicle,\n} from '../../actions/contact';\n\nimport ContactVehicleForm from './ContactVehicleForm';\nimport ContactVehicleFilter from './ContactVehicleFilter';\n\nconst BackButton = styled(Button)`\n  margin-bottom: 16px !important;\n`;\n\nconst columns = [\n  { Header: 'Tên phương tiện', accessor: 'vehicleName' },\n  { Header: 'Loại hình', accessor: 'vehicleType' },\n  { Header: 'Điểm khởi hành', accessor: 'from' },\n  { Header: 'Điểm đến', accessor: 'to' },\n  { Header: 'Điểm nóng', formatter: (row) => (row.isHotpost ? <FiCheck /> : '') },\n];\n\nconst ContactVehicleTable = () => {\n  const dispatch = useDispatch();\n\n  const [filter, setFilter] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n\n  const [modal, setModal] = useState({\n    isOpen: false,\n    data: {},\n  });\n\n  const {\n    contactVehicleList,\n    loadingGetContactVehicle,\n    loadingCreateContactVehicle,\n    loadingUpdateContactVehicle,\n    loadingDeleteContactVehicle,\n  } = useSelector((state) => state.contact);\n\n  const handleRefresh = () => {\n    // dispatch(getContactVehicles());\n    dispatch(getContactVehicles({\n      ...filter,\n      pageIndex,\n      pageSize,\n    }));\n  };\n\n  // eslint-disable-next-line\n  useEffect(() => { handleRefresh(); }, [\n    filter,\n    pageIndex,\n    pageSize,\n  ]);\n\n  const handleSubmit = (data) => {\n    setModal({\n      isOpen: false,\n      data: {},\n    });\n    if (data.id) {\n      dispatch(updateContactVehicle(data)).then(() => {\n        handleRefresh();\n      });\n    } else {\n      dispatch(createContactVehicle(data)).then(() => {\n        handleRefresh();\n      });\n    }\n  };\n\n  useEffect(contactVehicleList.length === 0 ? handleRefresh : () => {}, []);\n\n  const { data, pageCount } = contactVehicleList;\n\n  return (\n    <>\n      {!modal.isOpen && (\n        <>\n          <ContactVehicleFilter onChange={(e) => { setFilter(e); }} />\n          <DataTable\n            title=\"Phương tiện tiếp xúc\"\n            columns={columns}\n            data={data || [].map((d, i) => ({ ...d, index: i + 1 }))}\n            loading={\n              loadingGetContactVehicle\n              || loadingCreateContactVehicle\n              || loadingUpdateContactVehicle\n              || loadingDeleteContactVehicle\n            }\n            pageCount={pageCount}\n            onPaginationChange={(p) => {\n              setPageIndex(p.pageIndex);\n              setPageSize(p.pageSize);\n            }}\n            actions={[\n              {\n                icon: <FiEye />,\n                title: 'Chi tiết',\n                color: 'blue',\n                onClick: (row) => {\n                  setModal({\n                    isOpen: true,\n                    data: row,\n                  });\n                },\n              },\n              {\n                icon: <FiTrash2 />,\n                title: 'Xóa',\n                color: 'red',\n                onClick: (row) => dispatch(\n                  showConfirmModal('Xác nhận xóa?', () => {\n                    dispatch(deleteContactVehicle(row.id)).then(() => {\n                      handleRefresh();\n                    });\n                  }),\n                ),\n              },\n            ]}\n          />\n        </>\n      )}\n      {modal.isOpen && (\n        <>\n          <BackButton\n            basic\n            animated\n            onClick={() => {\n              setModal({\n                isOpen: false,\n                data: {},\n              });\n            }}\n          >\n            <Button.Content visible>Trờ về</Button.Content>\n            <Button.Content hidden>\n              <FiArrowLeft />\n            </Button.Content>\n          </BackButton>\n\n          <ContactVehicleForm\n            initialData={modal.data}\n            onSubmit={(d) => handleSubmit(d)}\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ContactVehicleTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}